!function(){try{var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="efcc617a-f765-4aec-9b9f-5bbc0c850236",t._sentryDebugIdIdentifier="sentry-dbid-efcc617a-f765-4aec-9b9f-5bbc0c850236")}catch(t){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[1078],{66055:function(t,e,n){n.d(e,{A5:function(){return i},Dg:function(){return l},F4:function(){return d},L5:function(){return u},R3:function(){return s},VW:function(){return r},Wo:function(){return c},X2:function(){return a},nk:function(){return h},vd:function(){return f}});var i,s,r,o=n(71386);!function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=4]="Right",t[t.Full=7]="Full"}(i||(i={})),function(t){t[t.Inline=1]="Inline",t[t.Gutter=2]="Gutter"}(s||(s={})),function(t){t[t.Both=0]="Both",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.None=3]="None"}(r||(r={}));class a{constructor(t){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|t.tabSize),this.indentSize=0|t.tabSize,this.insertSpaces=Boolean(t.insertSpaces),this.defaultEOL=0|t.defaultEOL,this.trimAutoWhitespace=Boolean(t.trimAutoWhitespace),this.bracketPairColorizationOptions=t.bracketPairColorizationOptions}equals(t){return this.tabSize===t.tabSize&&this.indentSize===t.indentSize&&this.insertSpaces===t.insertSpaces&&this.defaultEOL===t.defaultEOL&&this.trimAutoWhitespace===t.trimAutoWhitespace&&(0,o.aI)(this.bracketPairColorizationOptions,t.bracketPairColorizationOptions)}createChangeEvent(t){return{tabSize:this.tabSize!==t.tabSize,indentSize:this.indentSize!==t.indentSize,insertSpaces:this.insertSpaces!==t.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==t.trimAutoWhitespace}}}class l{constructor(t,e){this._findMatchBrand=void 0,this.range=t,this.matches=e}}function h(t){return t&&"function"==typeof t.read}class c{constructor(t,e,n,i,s,r){this.identifier=t,this.range=e,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=r}}class u{constructor(t,e,n){this.regex=t,this.wordSeparators=e,this.simpleSearch=n}}class d{constructor(t,e,n){this.reverseEdits=t,this.changes=e,this.trimAutoWhitespaceLineNumbers=n}}function f(t){return!t.isTooLargeForSyncing()&&!t.isForSimpleWidget}},68901:function(t,e,n){n.d(e,{J:function(){return O}});var i=n(2106),s=n(10998),r=n(28061),o=n(67539),a=n(22994),l=n(85702),h=n(34883),c=n(68302),u=n(60756),d=n(33206);class f extends s.jG{constructor(t,e){if(super(),this.textModel=t,this.getLanguageConfiguration=e,this.didChangeEmitter=new i.vl,this.denseKeyProvider=new u.Mg,this.brackets=new l.Z(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,0===t.tokenization.backgroundTokenizationState){const t=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),e=new d._(this.textModel.getValue(),t);this.initialAstWithoutTokens=(0,c.T)(e,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}else 2===t.tokenization.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):1===t.tokenization.backgroundTokenizationState&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens)}didLanguageChange(t){return this.brackets.didLanguageChange(t)}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.tokenization.backgroundTokenizationState){const t=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){const e=t.map((t=>new a.c((0,h.qe)(t.fromLineNumber-1,0),(0,h.qe)(t.toLineNumber,0),(0,h.qe)(t.toLineNumber-t.fromLineNumber+1,0))));this.astWithTokens=this.parseDocumentFromTextBuffer(e,this.astWithTokens,!1),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){const e=t.changes.map((t=>{const e=r.Q.lift(t.range);return new a.c((0,h.VL)(e.getStartPosition()),(0,h.VL)(e.getEndPosition()),(0,h.rR)(t.text))})).reverse();this.astWithTokens=this.parseDocumentFromTextBuffer(e,this.astWithTokens,!1),this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(e,this.initialAstWithoutTokens,!1))}parseDocumentFromTextBuffer(t,e,n){const i=e,s=new d.tk(this.textModel,this.brackets);return(0,c.T)(s,t,i,n)}getBracketsInRange(t){const e=(0,h.qe)(t.startLineNumber-1,t.startColumn-1),n=(0,h.qe)(t.endLineNumber-1,t.endColumn-1),i=new Array,s=this.initialAstWithoutTokens||this.astWithTokens;return m(s,h.Vp,s.length,e,n,i,0,new Map),i}getBracketPairsInRange(t,e){const n=new Array,i=(0,h.VL)(t.getStartPosition()),s=(0,h.VL)(t.getEndPosition()),r=this.initialAstWithoutTokens||this.astWithTokens,o=new k(n,e,this.textModel);return C(r,h.Vp,r.length,i,s,o,0,new Map),n}getFirstBracketAfter(t){const e=this.initialAstWithoutTokens||this.astWithTokens;return p(e,h.Vp,e.length,(0,h.VL)(t))}getFirstBracketBefore(t){const e=this.initialAstWithoutTokens||this.astWithTokens;return g(e,h.Vp,e.length,(0,h.VL)(t))}}function g(t,e,n,i){if(4===t.kind||2===t.kind){const s=[];for(const i of t.children)n=(0,h.QB)(e,i.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:n}),e=n;for(let e=s.length-1;e>=0;e--){const{nodeOffsetStart:n,nodeOffsetEnd:r}=s[e];if((0,h.zG)(n,i)){const s=g(t.children[e],n,r,i);if(s)return s}}return null}if(3===t.kind)return null;if(1===t.kind){const i=(0,h.Qx)(e,n);return{bracketInfo:t.bracketInfo,range:i}}return null}function p(t,e,n,i){if(4===t.kind||2===t.kind){for(const s of t.children){if(n=(0,h.QB)(e,s.length),(0,h.zG)(i,n)){const t=p(s,e,n,i);if(t)return t}e=n}return null}if(3===t.kind)return null;if(1===t.kind){const i=(0,h.Qx)(e,n);return{bracketInfo:t.bracketInfo,range:i}}return null}function m(t,e,n,i,s,r,a,l){if(!(a>200))if(4===t.kind)for(const o of t.children)n=(0,h.QB)(e,o.length),(0,h.vr)(e,s)&&(0,h.o0)(n,i)&&m(o,e,n,i,s,r,a,l),e=n;else if(2===t.kind){let c=0;if(l){let e=l.get(t.openingBracket.text);void 0===e&&(e=0),c=e,e++,l.set(t.openingBracket.text,e)}{const l=t.openingBracket;if(n=(0,h.QB)(e,l.length),(0,h.vr)(e,s)&&(0,h.o0)(n,i)){const i=(0,h.Qx)(e,n);r.push(new o.jY(i,a,c,!t.closingBracket))}e=n}if(t.child){const o=t.child;n=(0,h.QB)(e,o.length),(0,h.vr)(e,s)&&(0,h.o0)(n,i)&&m(o,e,n,i,s,r,a+1,l),e=n}if(t.closingBracket){const l=t.closingBracket;if(n=(0,h.QB)(e,l.length),(0,h.vr)(e,s)&&(0,h.o0)(n,i)){const t=(0,h.Qx)(e,n);r.push(new o.jY(t,a,c,!1))}e=n}null==l||l.set(t.openingBracket.text,c)}else if(3===t.kind){const t=(0,h.Qx)(e,n);r.push(new o.jY(t,a-1,0,!0))}else if(1===t.kind){const t=(0,h.Qx)(e,n);r.push(new o.jY(t,a-1,0,!1))}}class k{constructor(t,e,n){this.result=t,this.includeMinIndentation=e,this.textModel=n}}function C(t,e,n,i,s,r,a,l){var c;if(!(a>200))if(2===t.kind){let u=0;if(l){let e=l.get(t.openingBracket.text);void 0===e&&(e=0),u=e,e++,l.set(t.openingBracket.text,e)}const d=(0,h.QB)(e,t.openingBracket.length);let f=-1;if(r.includeMinIndentation&&(f=t.computeMinIndentation(e,r.textModel)),r.result.push(new o.yU((0,h.Qx)(e,n),(0,h.Qx)(e,d),t.closingBracket?(0,h.Qx)((0,h.QB)(d,(null===(c=t.child)||void 0===c?void 0:c.length)||h.Vp),n):void 0,a,u,t,f)),e=d,t.child){const o=t.child;n=(0,h.QB)(e,o.length),(0,h.vr)(e,s)&&(0,h.o0)(n,i)&&C(o,e,n,i,s,r,a+1,l)}null==l||l.set(t.openingBracket.text,u)}else{let n=e;for(const e of t.children){const t=n;n=(0,h.QB)(n,e.length),(0,h.vr)(t,s)&&(0,h.vr)(i,n)&&C(e,t,n,i,s,r,a,l)}}}var I=n(19184),b=n(1804),x=n(13338);class O extends s.jG{constructor(t,e){super(),this.textModel=t,this.languageConfigurationService=e,this.bracketPairsTree=this._register(new s.HE),this.onDidChangeEmitter=new i.vl,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange((t=>{var e;t.languageId&&!(null===(e=this.bracketPairsTree.value)||void 0===e?void 0:e.object.didLanguageChange(t.languageId))||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())})))}get canBuildAST(){return this.textModel.getValueLength()<=5e6}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const n=new s.Cm;this.bracketPairsTree.value=(t=n.add(new f(this.textModel,(t=>this.languageConfigurationService.getLanguageConfiguration(t)))),e=n,{object:t,dispose:()=>null==e?void 0:e.dispose()}),n.add(this.bracketPairsTree.value.object.onDidChange((t=>this.onDidChangeEmitter.fire(t)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var t,e}getBracketPairsInRange(t){var e;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(e=this.bracketPairsTree.value)||void 0===e?void 0:e.object.getBracketPairsInRange(t,!1))||[]}getBracketPairsInRangeWithMinIndentation(t){var e;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(e=this.bracketPairsTree.value)||void 0===e?void 0:e.object.getBracketPairsInRange(t,!0))||[]}getBracketsInRange(t){var e;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(e=this.bracketPairsTree.value)||void 0===e?void 0:e.object.getBracketsInRange(t))||[]}findMatchingBracketUp(t,e,n){const i=this.textModel.validatePosition(e),s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const n=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(t);if(!n)return null;const i=(0,x.Uk)(this.getBracketPairsInRange(r.Q.fromPositions(e,e))||[],(t=>n.closes(t.openingBracketInfo)));return i?i.openingBracketRange:null}{const e=t.toLowerCase(),r=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!r)return null;const o=r.textIsBracket[e];return o?B(this._findMatchingBracketUp(o,i,L(n))):null}}matchBracket(t,e){if(this.canBuildAST){const e=(0,x.Jw)(this.getBracketPairsInRange(r.Q.fromPositions(t,t)).filter((e=>void 0!==e.closingBracketRange&&(e.openingBracketRange.containsPosition(t)||e.closingBracketRange.containsPosition(t)))),(0,x.VE)((e=>e.openingBracketRange.containsPosition(t)?e.openingBracketRange:e.closingBracketRange),r.Q.compareRangesUsingStarts));return e?[e.openingBracketRange,e.closingBracketRange]:null}{const n=L(e);return this._matchBracket(this.textModel.validatePosition(t),n)}}_establishBracketSearchOffsets(t,e,n,i){const s=e.getCount(),r=e.getLanguageId(i);let o=Math.max(0,t.column-1-n.maxBracketLength);for(let t=i-1;t>=0;t--){const n=e.getEndOffset(t);if(n<=o)break;if((0,I.Yo)(e.getStandardTokenType(t))||e.getLanguageId(t)!==r){o=n;break}}let a=Math.min(e.getLineContent().length,t.column-1+n.maxBracketLength);for(let t=i+1;t<s;t++){const n=e.getStartOffset(t);if(n>=a)break;if((0,I.Yo)(e.getStandardTokenType(t))||e.getLanguageId(t)!==r){a=n;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(t,e){const n=t.lineNumber,i=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(t.column-1);if(r<0)return null;const o=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(o&&!(0,I.Yo)(i.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(t,i,o,r),h=null;for(;;){const i=b.Fu.findNextBracketInRange(o.forwardRegex,n,s,a,l);if(!i)break;if(i.startColumn<=t.column&&t.column<=i.endColumn){const t=s.substring(i.startColumn-1,i.endColumn-1).toLowerCase(),n=this._matchFoundBracket(i,o.textIsBracket[t],o.textIsOpenBracket[t],e);if(n){if(n instanceof w)return null;h=n}}a=i.endColumn-1}if(h)return h}if(r>0&&i.getStartOffset(r)===t.column-1){const o=r-1,a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(o)).brackets;if(a&&!(0,I.Yo)(i.getStandardTokenType(o))){const{searchStartOffset:r,searchEndOffset:l}=this._establishBracketSearchOffsets(t,i,a,o),h=b.Fu.findPrevBracketInRange(a.reversedRegex,n,s,r,l);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn){const t=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),n=this._matchFoundBracket(h,a.textIsBracket[t],a.textIsOpenBracket[t],e);if(n)return n instanceof w?null:n}}}return null}_matchFoundBracket(t,e,n,i){if(!e)return null;const s=n?this._findMatchingBracketDown(e,t.getEndPosition(),i):this._findMatchingBracketUp(e,t.getStartPosition(),i);return s?s instanceof w?s:[t,s]:null}_findMatchingBracketUp(t,e,n){const i=t.languageId,s=t.reversedRegex;let r=-1,o=0;const a=(e,i,a,l)=>{for(;;){if(n&&++o%100==0&&!n())return w.INSTANCE;const h=b.Fu.findPrevBracketInRange(s,e,i,a,l);if(!h)break;const c=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(t.isOpen(c)?r++:t.isClose(c)&&r--,0===r)return h;l=h.startColumn-1}return null};for(let t=e.lineNumber;t>=1;t--){const n=this.textModel.tokenization.getLineTokens(t),s=n.getCount(),r=this.textModel.getLineContent(t);let o=s-1,l=r.length,h=r.length;t===e.lineNumber&&(o=n.findTokenIndexAtOffset(e.column-1),l=e.column-1,h=e.column-1);let c=!0;for(;o>=0;o--){const e=n.getLanguageId(o)===i&&!(0,I.Yo)(n.getStandardTokenType(o));if(e)c?l=n.getStartOffset(o):(l=n.getStartOffset(o),h=n.getEndOffset(o));else if(c&&l!==h){const e=a(t,r,l,h);if(e)return e}c=e}if(c&&l!==h){const e=a(t,r,l,h);if(e)return e}}return null}_findMatchingBracketDown(t,e,n){const i=t.languageId,s=t.forwardRegex;let r=1,o=0;const a=(e,i,a,l)=>{for(;;){if(n&&++o%100==0&&!n())return w.INSTANCE;const h=b.Fu.findNextBracketInRange(s,e,i,a,l);if(!h)break;const c=i.substring(h.startColumn-1,h.endColumn-1).toLowerCase();if(t.isOpen(c)?r++:t.isClose(c)&&r--,0===r)return h;a=h.endColumn-1}return null},l=this.textModel.getLineCount();for(let t=e.lineNumber;t<=l;t++){const n=this.textModel.tokenization.getLineTokens(t),s=n.getCount(),r=this.textModel.getLineContent(t);let o=0,l=0,h=0;t===e.lineNumber&&(o=n.findTokenIndexAtOffset(e.column-1),l=e.column-1,h=e.column-1);let c=!0;for(;o<s;o++){const e=n.getLanguageId(o)===i&&!(0,I.Yo)(n.getStandardTokenType(o));if(e)c||(l=n.getStartOffset(o)),h=n.getEndOffset(o);else if(c&&l!==h){const e=a(t,r,l,h);if(e)return e}c=e}if(c&&l!==h){const e=a(t,r,l,h);if(e)return e}}return null}findPrevBracket(t){var e;const n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(e=this.bracketPairsTree.value)||void 0===e?void 0:e.object.getFirstBracketBefore(n))||null;let i=null,s=null,r=null;for(let t=n.lineNumber;t>=1;t--){const e=this.textModel.tokenization.getLineTokens(t),o=e.getCount(),a=this.textModel.getLineContent(t);let l=o-1,h=a.length,c=a.length;if(t===n.lineNumber){l=e.findTokenIndexAtOffset(n.column-1),h=n.column-1,c=n.column-1;const t=e.getLanguageId(l);i!==t&&(i=t,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let u=!0;for(;l>=0;l--){const n=e.getLanguageId(l);if(i!==n){if(s&&r&&u&&h!==c){const e=b.Fu.findPrevBracketInRange(s.reversedRegex,t,a,h,c);if(e)return this._toFoundBracket(r,e);u=!1}i=n,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const o=!!s&&!(0,I.Yo)(e.getStandardTokenType(l));if(o)u?h=e.getStartOffset(l):(h=e.getStartOffset(l),c=e.getEndOffset(l));else if(r&&s&&u&&h!==c){const e=b.Fu.findPrevBracketInRange(s.reversedRegex,t,a,h,c);if(e)return this._toFoundBracket(r,e)}u=o}if(r&&s&&u&&h!==c){const e=b.Fu.findPrevBracketInRange(s.reversedRegex,t,a,h,c);if(e)return this._toFoundBracket(r,e)}}return null}findNextBracket(t){var e;const n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(e=this.bracketPairsTree.value)||void 0===e?void 0:e.object.getFirstBracketAfter(n))||null;const i=this.textModel.getLineCount();let s=null,r=null,o=null;for(let t=n.lineNumber;t<=i;t++){const e=this.textModel.tokenization.getLineTokens(t),i=e.getCount(),a=this.textModel.getLineContent(t);let l=0,h=0,c=0;if(t===n.lineNumber){l=e.findTokenIndexAtOffset(n.column-1),h=n.column-1,c=n.column-1;const t=e.getLanguageId(l);s!==t&&(s=t,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let u=!0;for(;l<i;l++){const n=e.getLanguageId(l);if(s!==n){if(o&&r&&u&&h!==c){const e=b.Fu.findNextBracketInRange(r.forwardRegex,t,a,h,c);if(e)return this._toFoundBracket(o,e);u=!1}s=n,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const i=!!r&&!(0,I.Yo)(e.getStandardTokenType(l));if(i)u||(h=e.getStartOffset(l)),c=e.getEndOffset(l);else if(o&&r&&u&&h!==c){const e=b.Fu.findNextBracketInRange(r.forwardRegex,t,a,h,c);if(e)return this._toFoundBracket(o,e)}u=i}if(o&&r&&u&&h!==c){const e=b.Fu.findNextBracketInRange(r.forwardRegex,t,a,h,c);if(e)return this._toFoundBracket(o,e)}}return null}findEnclosingBrackets(t,e){const n=this.textModel.validatePosition(t);if(this.canBuildAST){const t=r.Q.fromPositions(n),e=(0,x.Uk)(this.getBracketPairsInRange(r.Q.fromPositions(n,n)),(e=>void 0!==e.closingBracketRange&&e.range.strictContainsRange(t)));return e?[e.openingBracketRange,e.closingBracketRange]:null}const i=L(e),s=this.textModel.getLineCount(),o=new Map;let a=[];const l=(t,e)=>{if(!o.has(t)){const n=[];for(let t=0,i=e?e.brackets.length:0;t<i;t++)n[t]=0;o.set(t,n)}a=o.get(t)};let h=0;const c=(t,e,n,s,r)=>{for(;;){if(i&&++h%100==0&&!i())return w.INSTANCE;const o=b.Fu.findNextBracketInRange(t.forwardRegex,e,n,s,r);if(!o)break;const l=n.substring(o.startColumn-1,o.endColumn-1).toLowerCase(),c=t.textIsBracket[l];if(c&&(c.isOpen(l)?a[c.index]++:c.isClose(l)&&a[c.index]--,-1===a[c.index]))return this._matchFoundBracket(o,c,!1,i);s=o.endColumn-1}return null};let u=null,d=null;for(let t=n.lineNumber;t<=s;t++){const e=this.textModel.tokenization.getLineTokens(t),i=e.getCount(),s=this.textModel.getLineContent(t);let r=0,o=0,a=0;if(t===n.lineNumber){r=e.findTokenIndexAtOffset(n.column-1),o=n.column-1,a=n.column-1;const t=e.getLanguageId(r);u!==t&&(u=t,d=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,d))}let h=!0;for(;r<i;r++){const n=e.getLanguageId(r);if(u!==n){if(d&&h&&o!==a){const e=c(d,t,s,o,a);if(e)return B(e);h=!1}u=n,d=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,d)}const i=!!d&&!(0,I.Yo)(e.getStandardTokenType(r));if(i)h||(o=e.getStartOffset(r)),a=e.getEndOffset(r);else if(d&&h&&o!==a){const e=c(d,t,s,o,a);if(e)return B(e)}h=i}if(d&&h&&o!==a){const e=c(d,t,s,o,a);if(e)return B(e)}}return null}_toFoundBracket(t,e){if(!e)return null;let n=this.textModel.getValueInRange(e);n=n.toLowerCase();const i=t.getBracketInfo(n);return i?{range:e,bracketInfo:i}:null}}function L(t){if(void 0===t)return()=>!0;{const e=Date.now();return()=>Date.now()-e<=t}}class w{constructor(){this._searchCanceledBrand=void 0}}function B(t){return t instanceof w?null:t}w.INSTANCE=new w},64651:function(t,e,n){n.d(e,{Gc:function(){return k},Nn:function(){return a},Xw:function(){return l},rh:function(){return m},yF:function(){return p}});var i=n(62549),s=n(34883),r=n(60756);class o{constructor(t){this._length=t}get length(){return this._length}}class a extends o{constructor(t,e,n,i,s){super(t),this.openingBracket=e,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}static create(t,e,n){let i=t.length;return e&&(i=(0,s.QB)(i,e.length)),n&&(i=(0,s.QB)(i,n.length)),new a(i,t,e,n,e?e.missingOpeningBracketIds:r.gV.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const t=new Array;return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}canBeReused(t){return null!==this.closingBracket&&!t.intersects(this.missingOpeningBracketIds)}deepClone(){return new a(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,e){return this.child?this.child.computeMinIndentation((0,s.QB)(t,this.openingBracket.length),e):Number.MAX_SAFE_INTEGER}}class l extends o{constructor(t,e,n){super(t),this.listHeight=e,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}static create23(t,e,n,i=!1){let r=t.length,o=t.missingOpeningBracketIds;if(t.listHeight!==e.listHeight)throw new Error("Invalid list heights");if(r=(0,s.QB)(r,e.length),o=o.merge(e.missingOpeningBracketIds),n){if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=(0,s.QB)(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return i?new c(r,t.listHeight+1,t,e,n,o):new h(r,t.listHeight+1,t,e,n,o)}static getEmpty(){return new d(s.Vp,0,[],r.gV.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const t=this.childrenLength;if(0===t)return;const e=this.getChild(t-1),n=4===e.kind?e.toMutable():e;return e!==n&&this.setChild(t-1,n),n}makeFirstElementMutable(){this.throwIfImmutable();if(0===this.childrenLength)return;const t=this.getChild(0),e=4===t.kind?t.toMutable():t;return t!==e&&this.setChild(0,e),e}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds))return!1;let e,n=this;for(;4===n.kind&&(e=n.childrenLength)>0;)n=n.getChild(e-1);return n.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();const t=this.childrenLength;let e=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<t;i++){const t=this.getChild(i);e=(0,s.QB)(e,t.length),n=n.merge(t.missingOpeningBracketIds)}this._length=e,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(t,e){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=t;for(let t=0;t<this.childrenLength;t++){const r=this.getChild(t);r&&(n=Math.min(n,r.computeMinIndentation(i,e)),i=(0,s.QB)(i,r.length))}return this.cachedMinIndentation=n,n}}class h extends l{constructor(t,e,n,i,s,r){super(t,e,r),this._item1=n,this._item2=i,this._item3=s}get childrenLength(){return null!==this._item3?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,e){switch(t){case 0:return void(this._item1=e);case 1:return void(this._item2=e);case 2:return void(this._item3=e)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new h(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}}class c extends h{toMutable(){return new h(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class u extends l{constructor(t,e,n,i){super(t,e,i),this._children=n}get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,e){this._children[t]=e}get children(){return this._children}deepClone(){const t=new Array(this._children.length);for(let e=0;e<this._children.length;e++)t[e]=this._children[e].deepClone();return new u(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}}class d extends u{toMutable(){return new u(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const f=[];class g extends o{get listHeight(){return 0}get childrenLength(){return 0}getChild(t){return null}get children(){return f}deepClone(){return this}}class p extends g{get kind(){return 0}get missingOpeningBracketIds(){return r.gV.getEmpty()}canBeReused(t){return!0}computeMinIndentation(t,e){const n=(0,s.l4)(t),r=(0===n.columnCount?n.lineCount:n.lineCount+1)+1,o=(0,s.eu)((0,s.QB)(t,this.length))+1;let a=Number.MAX_SAFE_INTEGER;for(let t=r;t<=o;t++){const n=e.getLineFirstNonWhitespaceColumn(t),s=e.getLineContent(t);if(0===n)continue;const r=i.A.visibleColumnFromColumn(s,n,e.getOptions().tabSize);a=Math.min(a,r)}return a}}class m extends g{constructor(t,e,n){super(t),this.bracketInfo=e,this.bracketIds=n}static create(t,e,n){return new m(t,e,n)}get kind(){return 1}get missingOpeningBracketIds(){return r.gV.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,e){return Number.MAX_SAFE_INTEGER}}class k extends g{constructor(t,e){super(e),this.missingOpeningBracketIds=t}get kind(){return 3}canBeReused(t){return!t.intersects(this.missingOpeningBracketIds)}computeMinIndentation(t,e){return Number.MAX_SAFE_INTEGER}}},22994:function(t,e,n){n.d(e,{W:function(){return r},c:function(){return s}});var i=n(34883);class s{constructor(t,e,n){this.startOffset=t,this.endOffset=e,this.newLength=n}}class r{constructor(t,e){this.documentLength=e,this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=t.map((t=>o.from(t)))}getOffsetBeforeChange(t){return this.adjustNextEdit(t),this.translateCurToOld(t)}getDistanceToNextChange(t){this.adjustNextEdit(t);const e=this.edits[this.nextEditIdx],n=e?this.translateOldToCur(e.offsetObj):this.documentLength;return(0,i.MS)(t,n)}translateOldToCur(t){return t.lineCount===this.deltaLineIdxInOld?(0,i.qe)(t.lineCount+this.deltaOldToNewLineCount,t.columnCount+this.deltaOldToNewColumnCount):(0,i.qe)(t.lineCount+this.deltaOldToNewLineCount,t.columnCount)}translateCurToOld(t){const e=(0,i.l4)(t);return e.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,i.qe)(e.lineCount-this.deltaOldToNewLineCount,e.columnCount-this.deltaOldToNewColumnCount):(0,i.qe)(e.lineCount-this.deltaOldToNewLineCount,e.columnCount)}adjustNextEdit(t){for(;this.nextEditIdx<this.edits.length;){const e=this.edits[this.nextEditIdx],n=this.translateOldToCur(e.endOffsetAfterObj);if(!(0,i.vr)(n,t))break;{this.nextEditIdx++;const t=(0,i.l4)(n),s=(0,i.l4)(this.translateOldToCur(e.endOffsetBeforeObj)),r=t.lineCount-s.lineCount;this.deltaOldToNewLineCount+=r;const o=this.deltaLineIdxInOld===e.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,a=t.columnCount-s.columnCount;this.deltaOldToNewColumnCount=o+a,this.deltaLineIdxInOld=e.endOffsetBeforeObj.lineCount}}}}class o{constructor(t,e,n){this.endOffsetBeforeObj=(0,i.l4)(e),this.endOffsetAfterObj=(0,i.l4)((0,i.QB)(t,n)),this.offsetObj=(0,i.l4)(t)}static from(t){return new o(t.startOffset,t.endOffset,t.newLength)}}},85702:function(t,e,n){n.d(e,{Z:function(){return h}});var i=n(16844),s=n(64651),r=n(34883),o=n(60756),a=n(33206);class l{constructor(t){this.map=t,this.hasRegExp=!1,this._regExpGlobal=null}static createFromLanguage(t,e){function n(t){return e.getKey(`${t.languageId}:::${t.bracketText}`)}const i=new Map;for(const e of t.bracketsNew.openingBrackets){const t=(0,r.qe)(0,e.bracketText.length),l=n(e),h=o.gV.getEmpty().add(l,o.FD);i.set(e.bracketText,new a.ou(t,1,l,h,s.rh.create(t,e,h)))}for(const e of t.bracketsNew.closingBrackets){const t=(0,r.qe)(0,e.bracketText.length);let l=o.gV.getEmpty();const h=e.getClosedBrackets();for(const t of h)l=l.add(n(t),o.FD);i.set(e.bracketText,new a.ou(t,2,n(h[0]),l,s.rh.create(t,e,l)))}return new l(i)}getRegExpStr(){if(this.isEmpty)return null;{const t=[...this.map.keys()];return t.sort(),t.reverse(),t.map((t=>function(t){let e=(0,i.bm)(t);/^[\w ]+/.test(t)&&(e=`\\b${e}`);/[\w ]+$/.test(t)&&(e=`${e}\\b`);return e}(t))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const t=this.getRegExpStr();this._regExpGlobal=t?new RegExp(t,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(t){return this.map.get(t.toLowerCase())}findClosingTokenText(t){for(const[e,n]of this.map)if(2===n.kind&&n.bracketIds.intersects(t))return e}get isEmpty(){return 0===this.map.size}}class h{constructor(t,e){this.denseKeyProvider=t,this.getLanguageConfiguration=e,this.languageIdToBracketTokens=new Map}didLanguageChange(t){return this.languageIdToBracketTokens.has(t)}getSingleLanguageBracketTokens(t){let e=this.languageIdToBracketTokens.get(t);return e||(e=l.createFromLanguage(this.getLanguageConfiguration(t),this.denseKeyProvider),this.languageIdToBracketTokens.set(t,e)),e}}},34883:function(t,e,n){n.d(e,{C7:function(){return o},MS:function(){return p},QB:function(){return g},Qx:function(){return b},VL:function(){return I},Vh:function(){return l},Vp:function(){return a},eu:function(){return d},l4:function(){return u},o0:function(){return C},qe:function(){return c},rR:function(){return x},sS:function(){return f},vr:function(){return k},zG:function(){return m}});var i=n(16844),s=n(28061);class r{constructor(t,e){this.lineCount=t,this.columnCount=e}toString(){return`${this.lineCount},${this.columnCount}`}}function o(t,e,n,i){return t!==n?c(n-t,i):c(0,i-e)}r.zero=new r(0,0);const a=0;function l(t){return 0===t}const h=Math.pow(2,26);function c(t,e){return t*h+e}function u(t){const e=t,n=Math.floor(e/h);return new r(n,e-n*h)}function d(t){return Math.floor(t/h)}function f(t){return t}function g(t,e){return e<h?t+e:t-t%h+e}function p(t,e){const n=t,i=e;if(i-n<=0)return a;const s=Math.floor(n/h),r=Math.floor(i/h),o=i-r*h;if(s===r){return c(0,o-(n-s*h))}return c(r-s,o)}function m(t,e){return t<e}function k(t,e){return t<=e}function C(t,e){return t>=e}function I(t){return c(t.lineNumber-1,t.column-1)}function b(t,e){const n=t,i=Math.floor(n/h),r=n-i*h,o=e,a=Math.floor(o/h),l=o-a*h;return new s.Q(i+1,r+1,a+1,l+1)}function x(t){const e=(0,i.uz)(t);return c(e.length-1,e[e.length-1].length)}},68302:function(t,e,n){n.d(e,{T:function(){return f}});var i=n(64651),s=n(22994),r=n(60756),o=n(34883);function a(t,e=!1){if(0===t.length)return null;if(1===t.length)return t[0];let n=t.length;for(;n>3;){const s=n>>1;for(let r=0;r<s;r++){const s=r<<1;t[r]=i.Xw.create23(t[s],t[s+1],s+3===n?t[s+2]:null,e)}n=s}return i.Xw.create23(t[0],t[1],n>=3?t[2]:null,e)}function l(t,e){return Math.abs(t.listHeight-e.listHeight)}function h(t,e){return t.listHeight===e.listHeight?i.Xw.create23(t,e,null,!1):t.listHeight>e.listHeight?function(t,e){let n=t=t.toMutable();const s=new Array;let r;for(;;){if(e.listHeight===n.listHeight){r=e;break}if(4!==n.kind)throw new Error("unexpected");s.push(n),n=n.makeLastElementMutable()}for(let t=s.length-1;t>=0;t--){const e=s[t];r?e.childrenLength>=3?r=i.Xw.create23(e.unappendChild(),r,null,!1):(e.appendChildOfSameHeight(r),r=void 0):e.handleChildrenChanged()}return r?i.Xw.create23(t,r,null,!1):t}(t,e):function(t,e){let n=t=t.toMutable();const s=new Array;for(;e.listHeight!==n.listHeight;){if(4!==n.kind)throw new Error("unexpected");s.push(n),n=n.makeFirstElementMutable()}let r=e;for(let t=s.length-1;t>=0;t--){const e=s[t];r?e.childrenLength>=3?r=i.Xw.create23(r,e.unprependChild(),null,!1):(e.prependChildOfSameHeight(r),r=void 0):e.handleChildrenChanged()}return r?i.Xw.create23(r,t,null,!1):t}(e,t)}class c{constructor(t){this.lastOffset=o.Vp,this.nextNodes=[t],this.offsets=[o.Vp],this.idxs=[]}readLongestNodeAt(t,e){if((0,o.zG)(t,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=t;;){const n=d(this.nextNodes);if(!n)return;const i=d(this.offsets);if((0,o.zG)(t,i))return;if((0,o.zG)(i,t))if((0,o.QB)(i,n.length)<=t)this.nextNodeAfterCurrent();else{const t=u(n);-1!==t?(this.nextNodes.push(n.getChild(t)),this.offsets.push(i),this.idxs.push(t)):this.nextNodeAfterCurrent()}else{if(e(n))return this.nextNodeAfterCurrent(),n;{const t=u(n);if(-1===t)return void this.nextNodeAfterCurrent();this.nextNodes.push(n.getChild(t)),this.offsets.push(i),this.idxs.push(t)}}}}nextNodeAfterCurrent(){for(;;){const t=d(this.offsets),e=d(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;const n=d(this.nextNodes),i=u(n,this.idxs[this.idxs.length-1]);if(-1!==i){this.nextNodes.push(n.getChild(i)),this.offsets.push((0,o.QB)(t,e.length)),this.idxs[this.idxs.length-1]=i;break}this.idxs.pop()}}}function u(t,e=-1){for(;;){if(++e>=t.childrenLength)return-1;if(t.getChild(e))return e}}function d(t){return t.length>0?t[t.length-1]:void 0}function f(t,e,n,i){return new g(t,e,n,i).parseDocument()}class g{constructor(t,e,n,i){if(this.tokenizer=t,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new c(n):void 0,this.positionMapper=new s.W(e,t.length)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let t=this.parseList(r.gV.getEmpty());return t||(t=i.Xw.getEmpty()),t}parseList(t){const e=new Array;for(;;){const n=this.tokenizer.peek();if(!n||2===n.kind&&n.bracketIds.intersects(t))break;const i=this.parseChild(t);4===i.kind&&0===i.childrenLength||e.push(i)}const n=this.oldNodeReader?function(t){if(0===t.length)return null;if(1===t.length)return t[0];let e=0;function n(){if(e>=t.length)return null;const n=e,i=t[n].listHeight;for(e++;e<t.length&&t[e].listHeight===i;)e++;return e-n>=2?a(0===n&&e===t.length?t:t.slice(n,e),!1):t[n]}let i=n(),s=n();if(!s)return i;for(let t=n();t;t=n())l(i,s)<=l(s,t)?(i=h(i,s),s=t):s=h(s,t);return h(i,s)}(e):a(e,this.createImmutableLists);return n}parseChild(t){if(this.oldNodeReader){const e=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(!(0,o.Vh)(e)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(n=>{if(!(0,o.zG)(n.length,e))return!1;return n.canBeReused(t)}));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}this._itemsConstructed++;const e=this.tokenizer.read();switch(e.kind){case 2:return new i.Gc(e.bracketIds,e.length);case 0:return e.astNode;case 1:{const n=t.merge(e.bracketIds),s=this.parseList(n),r=this.tokenizer.peek();return r&&2===r.kind&&(r.bracketId===e.bracketId||r.bracketIds.intersects(e.bracketIds))?(this.tokenizer.read(),i.Nn.create(e.astNode,s,r.astNode)):i.Nn.create(e.astNode,s,null)}default:throw new Error("unexpected")}}}},60756:function(t,e,n){n.d(e,{FD:function(){return r},Mg:function(){return o},gV:function(){return s}});const i=new Array;class s{constructor(t,e){this.items=t,this.additionalItems=e}static create(t,e){if(t<=128&&0===e.length){let n=s.cache[t];return n||(n=new s(t,e),s.cache[t]=n),n}return new s(t,e)}static getEmpty(){return this.empty}add(t,e){const n=e.getKey(t);let i=n>>5;if(0===i){const t=1<<n|this.items;return t===this.items?this:s.create(t,this.additionalItems)}i--;const r=this.additionalItems.slice(0);for(;r.length<i;)r.push(0);return r[i]|=1<<(31&n),s.create(this.items,r)}merge(t){const e=this.items|t.items;if(this.additionalItems===i&&t.additionalItems===i)return e===this.items?this:e===t.items?t:s.create(e,i);const n=new Array;for(let e=0;e<Math.max(this.additionalItems.length,t.additionalItems.length);e++){const i=this.additionalItems[e]||0,s=t.additionalItems[e]||0;n.push(i|s)}return s.create(e,n)}intersects(t){if(this.items&t.items)return!0;for(let e=0;e<Math.min(this.additionalItems.length,t.additionalItems.length);e++)if(this.additionalItems[e]&t.additionalItems[e])return!0;return!1}}s.cache=new Array(129),s.empty=s.create(0,i);const r={getKey(t){return t}};class o{constructor(){this.items=new Map}getKey(t){let e=this.items.get(t);return void 0===e&&(e=this.items.size,this.items.set(t,e)),e}}},33206:function(t,e,n){n.d(e,{_:function(){return u},ou:function(){return l},tk:function(){return h}});var i=n(94327),s=n(15910),r=n(64651),o=n(34883),a=n(60756);class l{constructor(t,e,n,i,s){this.length=t,this.kind=e,this.bracketId=n,this.bracketIds=i,this.astNode=s}}class h{constructor(t,e){this.textModel=t,this.bracketTokens=e,this.reader=new c(this.textModel,this.bracketTokens),this._offset=o.Vp,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,o.qe)(this.textBufferLineCount,this.textBufferLastLineLength)}skip(t){this.didPeek=!1,this._offset=(0,o.QB)(this._offset,t);const e=(0,o.l4)(this._offset);this.reader.setPosition(e.lineCount,e.columnCount)}read(){let t;return this.peeked?(this.didPeek=!1,t=this.peeked):t=this.reader.read(),t&&(this._offset=(0,o.QB)(this._offset,t.length)),t}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class c{constructor(t,e){this.textModel=t,this.bracketTokens=e,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=t.getLineCount(),this.textBufferLastLineLength=t.getLineLength(this.textBufferLineCount)}setPosition(t,e){t===this.lineIdx?(this.lineCharOffset=e,this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset)):(this.lineIdx=t,this.lineCharOffset=e,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const t=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,o.sS)(t.length),t}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const t=this.lineIdx,e=this.lineCharOffset;let n=0;for(;;){const i=this.lineTokens,r=i.getCount();let a=null;if(this.lineTokenOffset<r){const l=i.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===i.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const h=0===s.x.getTokenType(l),c=s.x.containsBalancedBrackets(l),u=i.getEndOffset(this.lineTokenOffset);if(c&&h&&this.lineCharOffset<u){const t=i.getLanguageId(this.lineTokenOffset),e=this.line.substring(this.lineCharOffset,u),n=this.bracketTokens.getSingleLanguageBracketTokens(t),s=n.regExpGlobal;if(s){s.lastIndex=0;const t=s.exec(e);t&&(a=n.getToken(t[0]),a&&(this.lineCharOffset+=t.index))}}if(n+=u-this.lineCharOffset,a){if(t!==this.lineIdx||e!==this.lineCharOffset){this.peekedToken=a;break}return this.lineCharOffset+=(0,o.sS)(a.length),a}this.lineTokenOffset++,this.lineCharOffset=u}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3)break}if(n>1500)break}const i=(0,o.C7)(t,e,this.lineIdx,this.lineCharOffset);return new l(i,0,-1,a.gV.getEmpty(),new r.yF(i))}}class u{constructor(t,e){this.text=t,this._offset=o.Vp,this.idx=0;const n=e.getRegExpStr(),i=n?new RegExp(n+"|\n","gi"):null,s=[];let h,c=0,u=0,d=0,f=0;const g=new Array;for(let t=0;t<60;t++)g.push(new l((0,o.qe)(0,t),0,-1,a.gV.getEmpty(),new r.yF((0,o.qe)(0,t))));const p=new Array;for(let t=0;t<60;t++)p.push(new l((0,o.qe)(1,t),0,-1,a.gV.getEmpty(),new r.yF((0,o.qe)(1,t))));if(i)for(i.lastIndex=0;null!==(h=i.exec(t));){const t=h.index,n=h[0];if("\n"===n)c++,u=t+1;else{if(d!==t){let e;if(f===c){const n=t-d;if(n<g.length)e=g[n];else{const t=(0,o.qe)(0,n);e=new l(t,0,-1,a.gV.getEmpty(),new r.yF(t))}}else{const n=c-f,i=t-u;if(1===n&&i<p.length)e=p[i];else{const t=(0,o.qe)(n,i);e=new l(t,0,-1,a.gV.getEmpty(),new r.yF(t))}}s.push(e)}s.push(e.getToken(n)),d=t+n.length,f=c}}const m=t.length;if(d!==m){const t=f===c?(0,o.qe)(0,m-d):(0,o.qe)(c-f,m-u);s.push(new l(t,0,-1,a.gV.getEmpty(),new r.yF(t)))}this.length=(0,o.qe)(c,m-u),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(t){throw new i.EM}}},5966:function(t,e,n){n.d(e,{I:function(){return l}});var i=n(2106),s=n(10998),r=n(28061),o=n(48295),a=n(89044);class l extends s.jG{constructor(t){super(),this.textModel=t,this.colorProvider=new h,this.onDidChangeEmitter=new i.vl,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange((t=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,e,n){if(void 0===e)return[];if(!this.colorizationOptions.enabled)return[];const i=new Array,s=this.textModel.bracketPairs.getBracketsInRange(t);for(const t of s)i.push({id:`bracket${t.range.toString()}-${t.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(t,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:t.range});return i}getAllDecorations(t,e){return void 0===t?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new r.Q(1,1,this.textModel.getLineCount(),1),t,e):[]}}class h{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(t,e){return t.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(e?t.nestingLevelOfEqualBracketType:t.nestingLevel)}getInlineClassNameOfLevel(t){return"bracket-highlighting-"+t%30}}(0,a.zy)(((t,e)=>{const n=[o.sN,o.lQ,o.ss,o.l5,o.sH,o.zp],i=new h;e.addRule(`.monaco-editor .${i.unexpectedClosingBracketClassName} { color: ${t.getColor(o.s7)}; }`);const s=n.map((e=>t.getColor(e))).filter((t=>!!t)).filter((t=>!t.isTransparent()));for(let t=0;t<30;t++){const n=s[t%s.length];e.addRule(`.monaco-editor .${i.getInlineClassNameOfLevel(t)} { color: ${n}; }`)}}))},81607:function(t,e,n){n.d(e,{I:function(){return l}});var i=n(85702),s=n(34883),r=n(68302),o=n(60756),a=n(33206);function l(t,e){const n=new o.Mg,l=new i.Z(n,(t=>e.getLanguageConfiguration(t))),c=new a.tk(new h([t]),l),u=(0,r.T)(c,[],void 0,!0);let d="";const f=t.getLineContent();return function t(e,n){if(2===e.kind)if(t(e.openingBracket,n),n=(0,s.QB)(n,e.openingBracket.length),e.child&&(t(e.child,n),n=(0,s.QB)(n,e.child.length)),e.closingBracket)t(e.closingBracket,n),n=(0,s.QB)(n,e.closingBracket.length);else{const t=l.getSingleLanguageBracketTokens(e.openingBracket.languageId).findClosingTokenText(e.openingBracket.bracketIds);d+=t}else if(3===e.kind);else if(0===e.kind||1===e.kind)d+=f.substring((0,s.sS)(n),(0,s.sS)((0,s.QB)(n,e.length)));else if(4===e.kind)for(const i of e.children)t(i,n),n=(0,s.QB)(n,i.length)}(u,s.Vp),d}class h{constructor(t){this.lines=t,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(t){return this.lines[t-1].getLineContent().length}}},54296:function(t,e,n){n.d(e,{Th:function(){return p},z8:function(){return m}});var i=n(3765),s=n(94327),r=n(93702),o=n(37264),a=n(6949),l=n(42802),h=n(22467);function c(t){return t.toString()}class u{constructor(t,e,n,i,s,r,o){this.beforeVersionId=t,this.afterVersionId=e,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=r,this.changes=o}static create(t,e){const n=t.getAlternativeVersionId(),i=g(t);return new u(n,n,i,i,e,e,[])}append(t,e,n,i,s){e.length>0&&(this.changes=(0,a.x)(this.changes,e)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(t){return 4+16*(t?t.length:0)}static _writeSelections(t,e,n){if(l.Sw(t,e?e.length:0,n),n+=4,e)for(const i of e)l.Sw(t,i.selectionStartLineNumber,n),n+=4,l.Sw(t,i.selectionStartColumn,n),n+=4,l.Sw(t,i.positionLineNumber,n),n+=4,l.Sw(t,i.positionColumn,n),n+=4;return n}static _readSelections(t,e,n){const i=l.bb(t,e);e+=4;for(let s=0;s<i;s++){const i=l.bb(t,e);e+=4;const s=l.bb(t,e);e+=4;const o=l.bb(t,e);e+=4;const a=l.bb(t,e);e+=4,n.push(new r.L(i,s,o,a))}return e}serialize(){let t=10+u._writeSelectionsSize(this.beforeCursorState)+u._writeSelectionsSize(this.afterCursorState)+4;for(const e of this.changes)t+=e.writeSize();const e=new Uint8Array(t);let n=0;l.Sw(e,this.beforeVersionId,n),n+=4,l.Sw(e,this.afterVersionId,n),n+=4,l.Gs(e,this.beforeEOL,n),n+=1,l.Gs(e,this.afterEOL,n),n+=1,n=u._writeSelections(e,this.beforeCursorState,n),n=u._writeSelections(e,this.afterCursorState,n),l.Sw(e,this.changes.length,n),n+=4;for(const t of this.changes)n=t.write(e,n);return e.buffer}static deserialize(t){const e=new Uint8Array(t);let n=0;const i=l.bb(e,n);n+=4;const s=l.bb(e,n);n+=4;const r=l.pJ(e,n);n+=1;const o=l.pJ(e,n);n+=1;const h=[];n=u._readSelections(e,n,h);const c=[];n=u._readSelections(e,n,c);const d=l.bb(e,n);n+=4;const f=[];for(let t=0;t<d;t++)n=a.k.read(e,n,f);return new u(i,s,r,o,h,c,f)}}class d{constructor(t,e,n,i){this.label=t,this.code=e,this.model=n,this._data=u.create(n,i)}get type(){return 0}get resource(){return o.r.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof u?this._data:u.deserialize(this._data)).changes.map((t=>t.toString())).join(", ")}matchesResource(t){return(o.r.isUri(this.model)?this.model:this.model.uri).toString()===t.toString()}setModel(t){this.model=t}canAppend(t){return this.model===t&&this._data instanceof u}append(t,e,n,i,s){this._data instanceof u&&this._data.append(t,e,n,i,s)}close(){this._data instanceof u&&(this._data=this._data.serialize())}open(){this._data instanceof u||(this._data=u.deserialize(this._data))}undo(){if(o.r.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof u&&(this._data=this._data.serialize());const t=u.deserialize(this._data);this.model._applyUndo(t.changes,t.beforeEOL,t.beforeVersionId,t.beforeCursorState)}redo(){if(o.r.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof u&&(this._data=this._data.serialize());const t=u.deserialize(this._data);this.model._applyRedo(t.changes,t.afterEOL,t.afterVersionId,t.afterCursorState)}heapSize(){return this._data instanceof u&&(this._data=this._data.serialize()),this._data.byteLength+168}}class f{constructor(t,e,n){this.label=t,this.code=e,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const t of this._editStackElementsArr){const e=c(t.resource);this._editStackElementsMap.set(e,t)}this._delegate=null}get resources(){return this._editStackElementsArr.map((t=>t.resource))}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(t){const e=c(t);return this._editStackElementsMap.has(e)}setModel(t){const e=c(o.r.isUri(t)?t:t.uri);this._editStackElementsMap.has(e)&&this._editStackElementsMap.get(e).setModel(t)}canAppend(t){if(!this._isOpen)return!1;const e=c(t.uri);if(this._editStackElementsMap.has(e)){return this._editStackElementsMap.get(e).canAppend(t)}return!1}append(t,e,n,i,s){const r=c(t.uri);this._editStackElementsMap.get(r).append(t,e,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const t of this._editStackElementsArr)t.undo()}redo(){for(const t of this._editStackElementsArr)t.redo()}heapSize(t){const e=c(t);if(this._editStackElementsMap.has(e)){return this._editStackElementsMap.get(e).heapSize()}return 0}split(){return this._editStackElementsArr}toString(){const t=[];for(const e of this._editStackElementsArr)t.push(`${(0,h.P8)(e.resource)}: ${e}`);return`{${t.join(", ")}}`}}function g(t){return"\n"===t.getEOL()?0:1}function p(t){return!!t&&(t instanceof d||t instanceof f)}class m{constructor(t,e){this._model=t,this._undoRedoService=e}pushStackElement(){const t=this._undoRedoService.getLastElement(this._model.uri);p(t)&&t.close()}popStackElement(){const t=this._undoRedoService.getLastElement(this._model.uri);p(t)&&t.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(t){const e=this._undoRedoService.getLastElement(this._model.uri);if(p(e)&&e.canAppend(this._model))return e;const n=new d(i.kg("edit","Typing"),"undoredo.textBufferEdit",this._model,t);return this._undoRedoService.pushElement(n),n}pushEOL(t){const e=this._getOrCreateEditStackElement(null);this._model.setEOL(t),e.append(this._model,[],g(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(t,e,n){const i=this._getOrCreateEditStackElement(t),s=this._model.applyEdits(e,!0),r=m._computeCursorState(n,s),o=s.map(((t,e)=>({index:e,textChange:t.textChange})));return o.sort(((t,e)=>t.textChange.oldPosition===e.textChange.oldPosition?t.index-e.index:t.textChange.oldPosition-e.textChange.oldPosition)),i.append(this._model,o.map((t=>t.textChange)),g(this._model),this._model.getAlternativeVersionId(),r),r}static _computeCursorState(t,e){try{return t?t(e):null}catch(t){return(0,s.dz)(t),null}}}},52818:function(t,e,n){n.d(e,{P:function(){return c},k:function(){return u}});var i=n(13338),s=n(16844),r=n(62549),o=n(28061),a=n(32177),l=n(50969),h=n(60779);class c extends a._{constructor(t,e){super(),this.textModel=t,this.languageConfigurationService=e}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return(0,l.G)(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,e,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(t<1||t>i)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide);let o=-2,a=-1,l=-2,h=-1;const c=t=>{if(-1!==o&&(-2===o||o>t-1)){o=-1,a=-1;for(let e=t-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){o=e,a=t;break}}}if(-2===l){l=-1,h=-1;for(let e=t;e<i;e++){const t=this._computeIndentLevel(e);if(t>=0){l=e,h=t;break}}}};let u=-2,d=-1,f=-2,g=-1;const p=t=>{if(-2===u){u=-1,d=-1;for(let e=t-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){u=e,d=t;break}}}if(-1!==f&&(-2===f||f<t-1)){f=-1,g=-1;for(let e=t;e<i;e++){const t=this._computeIndentLevel(e);if(t>=0){f=e,g=t;break}}}};let m=0,k=!0,C=0,I=!0,b=0,x=0;for(let s=0;k||I;s++){const o=t-s,f=t+s;s>1&&(o<1||o<e)&&(k=!1),s>1&&(f>i||f>n)&&(I=!1),s>5e4&&(k=!1,I=!1);let O=-1;if(k&&o>=1){const t=this._computeIndentLevel(o-1);t>=0?(l=o-1,h=t,O=Math.ceil(t/this.textModel.getOptions().indentSize)):(c(o),O=this._getIndentLevelForWhitespaceLine(r,a,h))}let L=-1;if(I&&f<=i){const t=this._computeIndentLevel(f-1);t>=0?(u=f-1,d=t,L=Math.ceil(t/this.textModel.getOptions().indentSize)):(p(f),L=this._getIndentLevelForWhitespaceLine(r,d,g))}if(0!==s){if(1===s){if(f<=i&&L>=0&&x+1===L){k=!1,m=f,C=f,b=L;continue}if(o>=1&&O>=0&&O-1===x){I=!1,m=o,C=o,b=O;continue}if(m=t,C=t,b=x,0===b)return{startLineNumber:m,endLineNumber:C,indent:b}}k&&(O>=b?m=o:k=!1),I&&(L>=b?C=f:I=!1)}else x=O}return{startLineNumber:m,endLineNumber:C,indent:b}}getLinesBracketGuides(t,e,n,r){var a;const l=[];for(let n=t;n<=e;n++)l.push([]);const c=!0,d=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new o.Q(t,1,e,this.textModel.getLineMaxColumn(e)));let f;if(n&&d.length>0){const s=(t<=n.lineNumber&&n.lineNumber<=e?d:this.textModel.bracketPairs.getBracketPairsInRange(o.Q.fromPositions(n))).filter((t=>o.Q.strictContainsPosition(t.range,n)));f=null===(a=(0,i.Uk)(s,(t=>c)))||void 0===a?void 0:a.range}const g=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new u;for(const n of d){if(!n.closingBracketRange)continue;const i=f&&n.range.equalsRange(f);if(!i&&!r.includeInactive)continue;const o=p.getInlineClassName(n.nestingLevel,n.nestingLevelOfEqualBracketType,g)+(r.highlightActive&&i?" "+p.activeClassName:""),a=n.openingBracketRange.getStartPosition(),c=n.closingBracketRange.getStartPosition(),u=r.horizontalGuides===h.N6.Enabled||r.horizontalGuides===h.N6.EnabledForActive&&i;if(n.range.startLineNumber===n.range.endLineNumber){u&&l[n.range.startLineNumber-t].push(new h.TH(-1,n.openingBracketRange.getEndPosition().column,o,new h.pv(!1,c.column),-1,-1));continue}const d=this.getVisibleColumnFromPosition(c),m=this.getVisibleColumnFromPosition(n.openingBracketRange.getStartPosition()),k=Math.min(m,d,n.minVisibleColumnIndentation+1);let C=!1;s.HG(this.textModel.getLineContent(n.closingBracketRange.startLineNumber))<n.closingBracketRange.startColumn-1&&(C=!0);const I=Math.max(a.lineNumber,t),b=Math.min(c.lineNumber,e),x=C?1:0;for(let e=I;e<b+x;e++)l[e-t].push(new h.TH(k,-1,o,null,e===a.lineNumber?a.column:-1,e===c.lineNumber?c.column:-1));u&&(a.lineNumber>=t&&m>k&&l[a.lineNumber-t].push(new h.TH(k,-1,o,new h.pv(!1,a.column),-1,-1)),c.lineNumber<=e&&d>k&&l[c.lineNumber-t].push(new h.TH(k,-1,o,new h.pv(!C,c.column),-1,-1)))}for(const t of l)t.sort(((t,e)=>t.visibleColumn-e.visibleColumn));return l}getVisibleColumnFromPosition(t){return r.A.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,e){this.assertNotDisposed();const n=this.textModel.getLineCount();if(t<1||t>n)throw new Error("Illegal value for startLineNumber");if(e<1||e>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide),o=new Array(e-t+1);let a=-2,l=-1,h=-2,c=-1;for(let s=t;s<=e;s++){const e=s-t,u=this._computeIndentLevel(s-1);if(u>=0)a=s-1,l=u,o[e]=Math.ceil(u/i.indentSize);else{if(-2===a){a=-1,l=-1;for(let t=s-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){a=t,l=e;break}}}if(-1!==h&&(-2===h||h<s-1)){h=-1,c=-1;for(let t=s;t<n;t++){const e=this._computeIndentLevel(t);if(e>=0){h=t,c=e;break}}}o[e]=this._getIndentLevelForWhitespaceLine(r,l,c)}}return o}_getIndentLevelForWhitespaceLine(t,e,n){const i=this.textModel.getOptions();return-1===e||-1===n?0:e<n?1+Math.floor(e/i.indentSize):e===n||t?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}class u{constructor(){this.activeClassName="indent-active"}getInlineClassName(t,e,n){return this.getInlineClassNameOfLevel(n?e:t)}getInlineClassNameOfLevel(t){return"bracket-indent-guide lvl-"+t%30}}},63713:function(t,e,n){n.d(e,{v:function(){return r}});class i{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function s(t,e,n,i,s){let r;for(s.spacesDiff=0,s.looksLikeAlignment=!1,r=0;r<e&&r<i;r++){if(t.charCodeAt(r)!==n.charCodeAt(r))break}let o=0,a=0;for(let n=r;n<e;n++){32===t.charCodeAt(n)?o++:a++}let l=0,h=0;for(let t=r;t<i;t++){32===n.charCodeAt(t)?l++:h++}if(o>0&&a>0)return;if(l>0&&h>0)return;const c=Math.abs(a-h),u=Math.abs(o-l);if(0===c)return s.spacesDiff=u,void(u>0&&0<=l-1&&l-1<t.length&&l<n.length&&32!==n.charCodeAt(l)&&32===t.charCodeAt(l-1)&&44===t.charCodeAt(t.length-1)&&(s.looksLikeAlignment=!0));u%c!=0||(s.spacesDiff=u/c)}function r(t,e,n){const r=Math.min(t.getLineCount(),1e4);let o=0,a=0,l="",h=0;const c=[2,4,6,8,3,5,7],u=[0,0,0,0,0,0,0,0,0],d=new i;for(let i=1;i<=r;i++){const r=t.getLineLength(i),c=t.getLineContent(i),f=r<=65536;let g=!1,p=0,m=0,k=0;for(let e=0,n=r;e<n;e++){const n=f?c.charCodeAt(e):t.getLineCharCode(i,e);if(9===n)k++;else{if(32!==n){g=!0,p=e;break}m++}}if(!g)continue;if(k>0?o++:m>1&&a++,s(l,h,c,p,d),d.looksLikeAlignment&&(!n||e!==d.spacesDiff))continue;const C=d.spacesDiff;C<=8&&u[C]++,l=c,h=p}let f=n;o!==a&&(f=o<a);let g=e;if(f){let t=f?0:.1*r;c.forEach((e=>{const n=u[e];n>t&&(t=n,g=e)})),4===g&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(g=2)}return{insertSpaces:f,tabSize:g}}},85487:function(t,e,n){function i(t){return(1&t.metadata)>>>0}function s(t,e){t.metadata=254&t.metadata|e}function r(t){return(2&t.metadata)>>>1==1}function o(t,e){t.metadata=253&t.metadata|(e?1:0)<<1}function a(t){return(4&t.metadata)>>>2==1}function l(t,e){t.metadata=251&t.metadata|(e?1:0)<<2}function h(t,e){t.metadata=231&t.metadata|e<<3}function c(t,e){t.metadata=223&t.metadata|(e?1:0)<<5}n.d(e,{CW:function(){return u},KJ:function(){return O},MF:function(){return f}});class u{constructor(t,e,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,s(this,1),this.start=e,this.end=n,this.delta=0,this.maxEnd=n,this.id=t,this.ownerId=0,this.options=null,l(this,!1),h(this,1),c(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=n,this.range=null,o(this,!1)}reset(t,e,n,i){this.start=e,this.end=n,this.maxEnd=n,this.cachedVersionId=t,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=n,this.range=i}setOptions(t){this.options=t;const e=this.options.className;l(this,"squiggly-error"===e||"squiggly-warning"===e||"squiggly-info"===e),h(this,this.options.stickiness),c(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(t,e,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=e}detach(){this.parent=null,this.left=null,this.right=null}}const d=new u(null,0,0);d.parent=d,d.left=d,d.right=d,s(d,0);class f{constructor(){this.root=d,this.requestNormalizeDelta=!1}intervalSearch(t,e,n,i,s){return this.root===d?[]:function(t,e,n,i,s,l){let h=t.root,c=0,u=0,f=0,g=0;const p=[];let m=0;for(;h!==d;)if(r(h))o(h.left,!1),o(h.right,!1),h===h.parent.right&&(c-=h.parent.delta),h=h.parent;else{if(!r(h.left)){if(u=c+h.maxEnd,u<e){o(h,!0);continue}if(h.left!==d){h=h.left;continue}}if(f=c+h.start,f>n)o(h,!0);else{if(g=c+h.end,g>=e){h.setCachedOffsets(f,g,l);let t=!0;i&&h.ownerId&&h.ownerId!==i&&(t=!1),s&&a(h)&&(t=!1),t&&(p[m++]=h)}o(h,!0),h.right===d||r(h.right)||(c+=h.delta,h=h.right)}}return o(t.root,!1),p}(this,t,e,n,i,s)}search(t,e,n){return this.root===d?[]:function(t,e,n,i){let s=t.root,l=0,h=0,c=0;const u=[];let f=0;for(;s!==d;){if(r(s)){o(s.left,!1),o(s.right,!1),s===s.parent.right&&(l-=s.parent.delta),s=s.parent;continue}if(s.left!==d&&!r(s.left)){s=s.left;continue}h=l+s.start,c=l+s.end,s.setCachedOffsets(h,c,i);let t=!0;e&&s.ownerId&&s.ownerId!==e&&(t=!1),n&&a(s)&&(t=!1),t&&(u[f++]=s),o(s,!0),s.right===d||r(s.right)||(l+=s.delta,s=s.right)}return o(t.root,!1),u}(this,t,e,n)}collectNodesFromOwner(t){return function(t,e){let n=t.root;const i=[];let s=0;for(;n!==d;)r(n)?(o(n.left,!1),o(n.right,!1),n=n.parent):n.left===d||r(n.left)?(n.ownerId===e&&(i[s++]=n),o(n,!0),n.right===d||r(n.right)||(n=n.right)):n=n.left;return o(t.root,!1),i}(this,t)}collectNodesPostOrder(){return function(t){let e=t.root;const n=[];let i=0;for(;e!==d;)r(e)?(o(e.left,!1),o(e.right,!1),e=e.parent):e.left===d||r(e.left)?e.right===d||r(e.right)?(n[i++]=e,o(e,!0)):e=e.right:e=e.left;return o(t.root,!1),n}(this)}insert(t){m(this,t),this._normalizeDeltaIfNecessary()}delete(t){k(this,t),this._normalizeDeltaIfNecessary()}resolveNode(t,e){const n=t;let i=0;for(;t!==this.root;)t===t.parent.right&&(i+=t.parent.delta),t=t.parent;const s=n.start+i,r=n.end+i;n.setCachedOffsets(s,r,e)}acceptReplace(t,e,n,i){const s=function(t,e,n){let i=t.root,s=0,a=0,l=0,h=0;const c=[];let u=0;for(;i!==d;)if(r(i))o(i.left,!1),o(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;else{if(!r(i.left)){if(a=s+i.maxEnd,a<e){o(i,!0);continue}if(i.left!==d){i=i.left;continue}}l=s+i.start,l>n?o(i,!0):(h=s+i.end,h>=e&&(i.setCachedOffsets(l,h,0),c[u++]=i),o(i,!0),i.right===d||r(i.right)||(s+=i.delta,i=i.right))}return o(t.root,!1),c}(this,t,t+e);for(let t=0,e=s.length;t<e;t++){k(this,s[t])}this._normalizeDeltaIfNecessary(),function(t,e,n,i){let s=t.root,a=0,l=0,h=0;const c=i-(n-e);for(;s!==d;)if(r(s))o(s.left,!1),o(s.right,!1),s===s.parent.right&&(a-=s.parent.delta),O(s),s=s.parent;else{if(!r(s.left)){if(l=a+s.maxEnd,l<e){o(s,!0);continue}if(s.left!==d){s=s.left;continue}}h=a+s.start,h>n?(s.start+=c,s.end+=c,s.delta+=c,(s.delta<-1073741824||s.delta>1073741824)&&(t.requestNormalizeDelta=!0),o(s,!0)):(o(s,!0),s.right===d||r(s.right)||(a+=s.delta,s=s.right))}o(t.root,!1)}(this,t,t+e,n),this._normalizeDeltaIfNecessary();for(let r=0,o=s.length;r<o;r++){const o=s[r];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,p(o,t,t+e,n,i),o.maxEnd=o.end,m(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(t){let e=t.root,n=0;for(;e!==d;)e.left===d||r(e.left)?e.right===d||r(e.right)?(e.start=n+e.start,e.end=n+e.end,e.delta=0,O(e),o(e,!0),o(e.left,!1),o(e.right,!1),e===e.parent.right&&(n-=e.parent.delta),e=e.parent):(n+=e.delta,e=e.right):e=e.left;o(t.root,!1)}(this))}}function g(t,e,n,i){return t<n||!(t>n)&&(1!==i&&(2===i||e))}function p(t,e,n,i,s){const r=function(t){return(24&t.metadata)>>>3}(t),o=0===r||2===r,a=1===r||2===r,l=n-e,h=i,c=Math.min(l,h),u=t.start;let d=!1;const f=t.end;let p=!1;e<=u&&f<=n&&function(t){return(32&t.metadata)>>>5==1}(t)&&(t.start=e,d=!0,t.end=e,p=!0);{const t=s?1:l>0?2:0;!d&&g(u,o,e,t)&&(d=!0),!p&&g(f,a,e,t)&&(p=!0)}if(c>0&&!s){const t=l>h?2:0;!d&&g(u,o,e+c,t)&&(d=!0),!p&&g(f,a,e+c,t)&&(p=!0)}{const i=s?1:0;!d&&g(u,o,n,i)&&(t.start=e+h,d=!0),!p&&g(f,a,n,i)&&(t.end=e+h,p=!0)}const m=h-l;d||(t.start=Math.max(0,u+m)),p||(t.end=Math.max(0,f+m)),t.start>t.end&&(t.end=t.start)}function m(t,e){if(t.root===d)return e.parent=d,e.left=d,e.right=d,s(e,0),t.root=e,t.root;!function(t,e){let n=0,i=t.root;const r=e.start,o=e.end;for(;;){if(w(r,o,i.start+n,i.end+n)<0){if(i.left===d){e.start-=n,e.end-=n,e.maxEnd-=n,i.left=e;break}i=i.left}else{if(i.right===d){e.start-=n+i.delta,e.end-=n+i.delta,e.maxEnd-=n+i.delta,i.right=e;break}n+=i.delta,i=i.right}}e.parent=i,e.left=d,e.right=d,s(e,1)}(t,e),L(e.parent);let n=e;for(;n!==t.root&&1===i(n.parent);)if(n.parent===n.parent.parent.left){const e=n.parent.parent.right;1===i(e)?(s(n.parent,0),s(e,0),s(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&(n=n.parent,I(t,n)),s(n.parent,0),s(n.parent.parent,1),b(t,n.parent.parent))}else{const e=n.parent.parent.left;1===i(e)?(s(n.parent,0),s(e,0),s(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&(n=n.parent,b(t,n)),s(n.parent,0),s(n.parent.parent,1),I(t,n.parent.parent))}return s(t.root,0),e}function k(t,e){let n,r;if(e.left===d?(n=e.right,r=e,n.delta+=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(t.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta):e.right===d?(n=e.left,r=e):(r=function(t){for(;t.left!==d;)t=t.left;return t}(e.right),n=r.right,n.start+=r.delta,n.end+=r.delta,n.delta+=r.delta,(n.delta<-1073741824||n.delta>1073741824)&&(t.requestNormalizeDelta=!0),r.start+=e.delta,r.end+=e.delta,r.delta=e.delta,(r.delta<-1073741824||r.delta>1073741824)&&(t.requestNormalizeDelta=!0)),r===t.root)return t.root=n,s(n,0),e.detach(),C(),O(n),void(t.root.parent=d);const o=1===i(r);if(r===r.parent.left?r.parent.left=n:r.parent.right=n,r===e?n.parent=r.parent:(r.parent===e?n.parent=r:n.parent=r.parent,r.left=e.left,r.right=e.right,r.parent=e.parent,s(r,i(e)),e===t.root?t.root=r:e===e.parent.left?e.parent.left=r:e.parent.right=r,r.left!==d&&(r.left.parent=r),r.right!==d&&(r.right.parent=r)),e.detach(),o)return L(n.parent),r!==e&&(L(r),L(r.parent)),void C();let a;for(L(n),L(n.parent),r!==e&&(L(r),L(r.parent));n!==t.root&&0===i(n);)n===n.parent.left?(a=n.parent.right,1===i(a)&&(s(a,0),s(n.parent,1),I(t,n.parent),a=n.parent.right),0===i(a.left)&&0===i(a.right)?(s(a,1),n=n.parent):(0===i(a.right)&&(s(a.left,0),s(a,1),b(t,a),a=n.parent.right),s(a,i(n.parent)),s(n.parent,0),s(a.right,0),I(t,n.parent),n=t.root)):(a=n.parent.left,1===i(a)&&(s(a,0),s(n.parent,1),b(t,n.parent),a=n.parent.left),0===i(a.left)&&0===i(a.right)?(s(a,1),n=n.parent):(0===i(a.left)&&(s(a.right,0),s(a,1),I(t,a),a=n.parent.left),s(a,i(n.parent)),s(n.parent,0),s(a.left,0),b(t,n.parent),n=t.root));s(n,0),C()}function C(){d.parent=d,d.delta=0,d.start=0,d.end=0}function I(t,e){const n=e.right;n.delta+=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(t.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,e.right=n.left,n.left!==d&&(n.left.parent=e),n.parent=e.parent,e.parent===d?t.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left=e,e.parent=n,O(e),O(n)}function b(t,e){const n=e.left;e.delta-=n.delta,(e.delta<-1073741824||e.delta>1073741824)&&(t.requestNormalizeDelta=!0),e.start-=n.delta,e.end-=n.delta,e.left=n.right,n.right!==d&&(n.right.parent=e),n.parent=e.parent,e.parent===d?t.root=n:e===e.parent.right?e.parent.right=n:e.parent.left=n,n.right=e,e.parent=n,O(e),O(n)}function x(t){let e=t.end;if(t.left!==d){const n=t.left.maxEnd;n>e&&(e=n)}if(t.right!==d){const n=t.right.maxEnd+t.delta;n>e&&(e=n)}return e}function O(t){t.maxEnd=x(t)}function L(t){for(;t!==d;){const e=x(t);if(t.maxEnd===e)return;t.maxEnd=e,t=t.parent}}function w(t,e,n,i){return t===n?e-i:t-n}},23996:function(t,e,n){n.d(e,{R_:function(){return o}});var i=n(79359),s=n(15365),r=n(66055);class o{constructor(t,e,n,i,s){this.injectionOffsets=t,this.injectionOptions=e,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(t){return t>0?this.wrappedTextIndentLength:0}getLineLength(t){const e=t>0?this.breakOffsets[t-1]:0;let n=this.breakOffsets[t]-e;return t>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(t){return this.getLineLength(t)}translateToInputOffset(t,e){t>0&&(e=Math.max(0,e-this.wrappedTextIndentLength));let n=0===t?e:this.breakOffsets[t-1]+e;if(null!==this.injectionOffsets)for(let t=0;t<this.injectionOffsets.length&&n>this.injectionOffsets[t];t++)n<this.injectionOffsets[t]+this.injectionOptions[t].content.length?n=this.injectionOffsets[t]:n-=this.injectionOptions[t].content.length;return n}translateToOutputPosition(t,e=2){let n=t;if(null!==this.injectionOffsets)for(let i=0;i<this.injectionOffsets.length&&!(t<this.injectionOffsets[i])&&(1===e||t!==this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,e)}offsetInInputWithInjectionsToOutputPosition(t,e=2){let n=0,i=this.breakOffsets.length-1,s=0,r=0;for(;n<=i;){s=n+(i-n)/2|0;const o=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,0===e)if(t<=r)i=s-1;else{if(!(t>o))break;n=s+1}else if(t<r)i=s-1;else{if(!(t>=o))break;n=s+1}}let o=t-r;return s>0&&(o+=this.wrappedTextIndentLength),new h(s,o)}normalizeOutputPosition(t,e,n){if(null!==this.injectionOffsets){const i=this.outputPositionToOffsetInInputWithInjections(t,e),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(0===n){if(t>0&&e===this.getMinOutputOffset(t))return new h(t-1,this.getMaxOutputOffset(t-1))}else if(1===n){if(t<this.getOutputLineCount()-1&&e===this.getMaxOutputOffset(t))return new h(t+1,this.getMinOutputOffset(t+1))}return new h(t,e)}outputPositionToOffsetInInputWithInjections(t,e){t>0&&(e=Math.max(0,e-this.wrappedTextIndentLength));return(t>0?this.breakOffsets[t-1]:0)+e}normalizeOffsetInInputWithInjectionsAroundInjections(t,e){const n=this.getInjectedTextAtOffset(t);if(!n)return t;if(2===e){if(t===n.offsetInInputWithInjections+n.length&&a(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let t=n.offsetInInputWithInjections;if(l(this.injectionOptions[n.injectedTextIndex].cursorStops))return t;let e=n.injectedTextIndex-1;for(;e>=0&&this.injectionOffsets[e]===this.injectionOffsets[n.injectedTextIndex]&&!a(this.injectionOptions[e].cursorStops)&&(t-=this.injectionOptions[e].content.length,!l(this.injectionOptions[e].cursorStops));)e--;return t}}if(1===e||4===e){let t=n.offsetInInputWithInjections+n.length,e=n.injectedTextIndex;for(;e+1<this.injectionOffsets.length&&this.injectionOffsets[e+1]===this.injectionOffsets[e];)t+=this.injectionOptions[e+1].content.length,e++;return t}if(0===e||3===e){let t=n.offsetInInputWithInjections,e=n.injectedTextIndex;for(;e-1>=0&&this.injectionOffsets[e-1]===this.injectionOffsets[e];)t-=this.injectionOptions[e-1].content.length,e--;return t}(0,i.xb)(e)}getInjectedText(t,e){const n=this.outputPositionToOffsetInInputWithInjections(t,e),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(t){const e=this.injectionOffsets,n=this.injectionOptions;if(null!==e){let i=0;for(let s=0;s<e.length;s++){const r=n[s].content.length,o=e[s]+i,a=e[s]+i+r;if(o>t)break;if(t<=a)return{injectedTextIndex:s,offsetInInputWithInjections:o,length:r};i+=r}}}}function a(t){return null==t||(t===r.VW.Right||t===r.VW.Both)}function l(t){return null==t||(t===r.VW.Left||t===r.VW.Both)}class h{constructor(t,e){this.outputLineIndex=t,this.outputOffset=e}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(t){return new s.y(t+this.outputLineIndex,this.outputOffset+1)}}}}]);
