!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="fb01fb6b-5d4c-4918-a1be-f3cd4c713988",e._sentryDebugIdIdentifier="sentry-dbid-fb01fb6b-5d4c-4918-a1be-f3cd4c713988")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[7599],{39239:function(e,t,i){i.d(t,{X:function(){return h}});var s=i(14333),n=i(67954),o=i(67003),r=i(2106),l=i(10998);class d{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=d.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map((e=>[e.templateId,e])));this.renderers=[];for(const t of e){const e=s.get(t.templateId);if(!e)throw new Error(`Table cell renderer for template id ${t.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){const t=(0,s.BC)(e,(0,s.$)(".monaco-table-tr")),i=[],n=[];for(let e=0;e<this.columns.length;e++){const o=this.renderers[e],r=(0,s.BC)(t,(0,s.$)(".monaco-table-td",{"data-col-index":e}));r.style.width=`${this.getColumnSize(e)}px`,i.push(r),n.push(o.renderTemplate(r))}const o={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(o),o}renderElement(e,t,i,s){for(let n=0;n<this.columns.length;n++){const o=this.columns[n].project(e);this.renderers[n].renderElement(o,t,i.cellTemplateData[n],s)}}disposeElement(e,t,i,s){for(let n=0;n<this.columns.length;n++){const o=this.renderers[n];if(o.disposeElement){const r=this.columns[n].project(e);o.disposeElement(r,t,i.cellTemplateData[n],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}(0,s.w_)(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}d.TemplateId="row";class a{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new r.vl,this.onDidLayout=this._onDidLayout.event,this.element=(0,s.$)(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:r.Jh.None}layout(e){this._onDidLayout.fire([this.index,e])}}class h{constructor(e,t,i,c,p,u){this.virtualDelegate=i,this.domId="table_id_"+ ++h.InstanceCount,this.disposables=new l.Cm,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,s.BC)(t,(0,s.$)(`.monaco-table.${this.domId}`));const g=c.map(((e,t)=>new a(e,t))),m={size:g.reduce(((e,t)=>e+t.column.weight),0),views:g.map((e=>({size:e.column.weight,view:e})))};this.splitview=this.disposables.add(new o.U(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:m})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const f=new d(c,p,(e=>this.splitview.getViewSize(e)));var v;this.list=this.disposables.add(new n.B8(e,this.domNode,(v=i,{getHeight(e){return v.getHeight(e)},getTemplateId(){return d.TemplateId}}),[f],u)),r.Jh.any(...g.map((e=>e.onDidLayout)))((([e,t])=>f.layoutColumn(e,t)),null,this.disposables),this.splitview.onDidSashReset((e=>{const t=c.reduce(((e,t)=>e+t.weight),0),i=c[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,i)}),null,this.disposables),this.styleElement=(0,s.li)(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=t.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}h.InstanceCount=0},50585:function(e,t,i){i.d(t,{l:function(){return d}});var s=i(45222),n=i(26048),o=i(94901),r=i(2106);const l={inputActiveOptionBorder:o.Q1.fromHex("#007ACC00"),inputActiveOptionForeground:o.Q1.fromHex("#FFFFFF"),inputActiveOptionBackground:o.Q1.fromHex("#0E639C50")};class d extends s.x{constructor(e){super(),this._onChange=this._register(new r.vl),this.onChange=this._onChange.event,this._onKeyDown=this._register(new r.vl),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},l),e),this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...n.j3.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())})),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();this._onKeyDown.fire(e)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},13043:function(e,t,i){i.d(t,{DO:function(){return M},vD:function(){return n},w0:function(){return E}});var s,n,o=i(14333),r=(i(34061),i(87594)),l=(i(77439),i(6595),i(83022)),d=i(67954),a=i(50585),h=i(31272),c=i(97757),p=(i(27969),i(13338)),u=i(65958),g=i(26048),m=i(88436),f=i(2106),v=i(97669),b=i(10998),C=i(62992),w=i(79359),y=i(3765);class N extends l.ur{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function D(e){return e instanceof l.ur?new N(e):e}class S{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=b.jG.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){var i,s;null===(s=(i=this.dnd).onDragStart)||void 0===s||s.call(i,D(e),t)}onDragOver(e,t,i,s,n=!0){const o=this.dnd.onDragOver(D(e),t&&t.element,i,s),r=this.autoExpandNode!==t;if(r&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return o;if(r&&"boolean"!=typeof o&&o.autoExpand&&(this.autoExpandDisposable=(0,u.EQ)((()=>{const e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0}),500)),"boolean"==typeof o||!o.accept||void 0===o.bubble||o.feedback){if(!n){return{accept:"boolean"==typeof o?o:o.accept,effect:"boolean"==typeof o?void 0:o.effect,feedback:[i]}}return o}if(1===o.bubble){const i=this.modelProvider(),n=i.getNodeLocation(t),o=i.getParentNodeLocation(n),r=i.getNode(o),l=o&&i.getListIndex(o);return this.onDragOver(e,r,l,s,!1)}const l=this.modelProvider(),d=l.getNodeLocation(t),a=l.getListIndex(d),h=l.getListRenderCount(d);return Object.assign(Object.assign({},o),{feedback:(0,p.y1)(a,a+h)})}drop(e,t,i,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(D(e),t&&t.element,i,s)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}}class E{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;null===(s=(i=this.delegate).setDynamicHeight)||void 0===s||s.call(i,e.element,t)}}!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(s||(s={}));class P{constructor(e,t=[]){this._elements=t,this.disposables=new b.Cm,this.onDidChange=f.Jh.forEach(e,(e=>this._elements=e),this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}}class _{constructor(e,t,i,s,n={}){var o;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=_.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new m.d,this.activeIndentNodes=new Set,this.indentGuidesDisposable=b.jG.None,this.disposables=new b.Cm,this.templateId=e.templateId,this.updateOptions(n),f.Jh.map(i,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),null===(o=e.onDidChangeTwistieState)||void 0===o||o.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(void 0!==e.indent&&(this.indent=(0,C.qE)(e.indent,0,40)),void 0!==e.renderIndentGuides){const t=e.renderIndentGuides!==s.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const e=new b.Cm;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}void 0!==e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=(0,o.BC)(e,(0,o.$)(".monaco-tl-row")),i=(0,o.BC)(t,(0,o.$)(".monaco-tl-indent")),s=(0,o.BC)(t,(0,o.$)(".monaco-tl-twistie")),n=(0,o.BC)(t,(0,o.$)(".monaco-tl-contents")),r=this.renderer.renderTemplate(n);return{container:e,indent:i,twistie:s,indentGuidesDisposable:b.jG.None,templateData:r}}renderElement(e,t,i,s){"number"==typeof s&&(this.renderedNodes.set(e,{templateData:i,height:s}),this.renderedElements.set(e.element,e));const n=_.DefaultIndent+(e.depth-1)*this.indent;i.twistie.style.paddingLeft=`${n}px`,i.indent.style.width=n+this.indent-16+"px",this.renderTwistie(e,i),"number"==typeof s&&this.renderIndentGuides(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var n,o;i.indentGuidesDisposable.dispose(),null===(o=(n=this.renderer).disposeElement)||void 0===o||o.call(n,e,t,i.templateData,s),"number"==typeof s&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...g.W6.treeItemExpanded.classNamesArray);let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...g.W6.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if((0,o.w_)(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new b.Cm,s=this.modelProvider();let n=e;for(;;){const e=s.getNodeLocation(n),r=s.getParentNodeLocation(e);if(!r)break;const l=s.getNode(r),d=(0,o.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(l)&&d.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(d):t.indent.insertBefore(d,t.indent.firstElementChild),this.renderedIndentGuides.add(l,d),i.add((0,b.s)((()=>this.renderedIndentGuides.delete(l,d)))),n=l}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach((e=>{const s=i.getNodeLocation(e);try{const n=i.getParentNodeLocation(s);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):n&&t.add(i.getNode(n))}catch(e){}})),this.activeIndentNodes.forEach((e=>{t.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),t.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,b.AS)(this.disposables)}}_.DefaultIndent=8;class L{constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new b.Cm,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,t){let i=1;if(this._filter){const s=this._filter.filter(e,t);if(i="boolean"==typeof s?s?1:0:(0,h.iZ)(s)?(0,h.Mn)(s.visibility):s,0===i)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:v.ne.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(s)?s:[s];for(const e of o){const t=e&&e.toString();if(void 0===t)return{data:v.ne.Default,visibility:i};const s=(0,v.dt)(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(s)return this._matchCount++,1===o.length?{data:s,visibility:i}:{data:{label:t,score:s},visibility:i}}return this.tree.findMode===n.Filter?2:{data:v.ne.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,b.AS)(this.disposables)}}a.l;!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(n||(n={}));b.jG;class I{constructor(e,t,i,s,o){var r;this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=o,this._pattern="",this.width=0,this._onDidChangeMode=new f.vl,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new f.vl,this._onDidChangeOpenState=new f.vl,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new b.Cm,this.disposables=new b.Cm,this._mode=null!==(r=e.options.defaultFindMode)&&void 0!==r?r:n.Highlight,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}onDidSpliceModel(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}render(){var e,t;const i=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&i?null===(e=this.widget)||void 0===e||e.showMessage({type:2,content:(0,y.kg)("not found","No elements found.")}):null===(t=this.widget)||void 0===t||t.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===n.Filter||(this.filter.totalCount>0&&this.filter.matchCount<=1||!v.ne.isDefault(e.filterData))}style(e){var t;this.styles=e,null===(t=this.widget)||void 0===t||t.style(e)}layout(e){var t;this.width=e,null===(t=this.widget)||void 0===t||t.layout(e)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function T(e){let t=c.Lx.Unknown;return(0,o.XD)(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=c.Lx.Twistie:(0,o.XD)(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=c.Lx.Element:(0,o.XD)(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=c.Lx.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function x(e,t){t(e),e.children.forEach((e=>x(e,t)))}class O{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new f.vl,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!(null==t?void 0:t.__forceEvent)&&(0,p.aI)(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const e=this.createNodeSet(),i=t=>e.delete(t);return t.forEach((e=>x(e,i))),void this.set([...e.values()])}const i=new Set,s=e=>i.add(this.identityProvider.getId(e.element).toString());t.forEach((e=>x(e,s)));const n=new Map,o=e=>n.set(this.identityProvider.getId(e.element).toString(),e);e.forEach((e=>x(e,o)));const r=[];for(const e of this.nodes){const t=this.identityProvider.getId(e.element).toString();if(i.has(t)){const e=n.get(t);e&&r.push(e)}else r.push(e)}if(this.nodes.length>0&&0===r.length){const e=this.getFirstViewElementWithTrait();e&&r.push(e)}this._set(r,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class k extends d.MH{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if((0,d.Bm)(e.browserEvent.target)||(0,d.B6)(e.browserEvent.target)||(0,d.bm)(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let n=!1;if(n="function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick,n&&!s&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e);if(t.collapsible){const i=this.tree.model,o=i.getNodeLocation(t),r=e.browserEvent.altKey;if(this.tree.setFocus([o]),i.setCollapsed(o,void 0,r),n&&s)return}super.onViewPointer(e)}onDoubleClick(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&super.onDoubleClick(e)}}class A extends d.B8{constructor(e,t,i,s,n,o,r,l){super(e,t,i,s,l),this.focusTrait=n,this.selectionTrait=o,this.anchorTrait=r}createMouseController(e){return new k(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),0===i.length)return;const s=[],n=[];let o;i.forEach(((t,i)=>{this.focusTrait.has(t)&&s.push(e+i),this.selectionTrait.has(t)&&n.push(e+i),this.anchorTrait.has(t)&&(o=e+i)})),s.length>0&&super.setFocus((0,p.dM)([...super.getFocus(),...s])),n.length>0&&super.setSelection((0,p.dM)([...super.getSelection(),...n])),"number"==typeof o&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map((e=>this.element(e))),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map((e=>this.element(e))),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class M{constructor(e,t,i,n,l={}){var a;this._user=e,this._options=l,this.eventBufferer=new f.at,this.onDidChangeFindOpenState=f.Jh.None,this.disposables=new b.Cm,this._onWillRefilter=new f.vl,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new f.vl;const h=new E(i),c=new f.Wj,p=new f.Wj,u=this.disposables.add(new P(p.event));this.renderers=n.map((e=>new _(e,(()=>this.model),c.event,u,l)));for(const e of this.renderers)this.disposables.add(e);let g;var m,v;l.keyboardNavigationLabelProvider&&(g=new L(this,l.keyboardNavigationLabelProvider,l.filter),l=Object.assign(Object.assign({},l),{filter:g}),this.disposables.add(g)),this.focus=new O((()=>this.view.getFocusedElements()[0]),l.identityProvider),this.selection=new O((()=>this.view.getSelectedElements()[0]),l.identityProvider),this.anchor=new O((()=>this.view.getAnchorElement()),l.identityProvider),this.view=new A(e,t,h,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},(m=()=>this.model,(v=l)&&Object.assign(Object.assign({},v),{identityProvider:v.identityProvider&&{getId(e){return v.identityProvider.getId(e.element)}},dnd:v.dnd&&new S(m,v.dnd),multipleSelectionController:v.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return v.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return v.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:v.accessibilityProvider&&Object.assign(Object.assign({},v.accessibilityProvider),{getSetSize(e){const t=m(),i=t.getNodeLocation(e),s=t.getParentNodeLocation(i);return t.getNode(s).visibleChildrenCount},getPosInSet(e){return e.visibleChildIndex+1},isChecked:v.accessibilityProvider&&v.accessibilityProvider.isChecked?e=>v.accessibilityProvider.isChecked(e.element):void 0,getRole:v.accessibilityProvider&&v.accessibilityProvider.getRole?e=>v.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel(e){return v.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return v.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:v.accessibilityProvider&&v.accessibilityProvider.getWidgetRole?()=>v.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:v.accessibilityProvider&&v.accessibilityProvider.getAriaLevel?e=>v.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:v.accessibilityProvider.getActiveDescendantId&&(e=>v.accessibilityProvider.getActiveDescendantId(e.element))}),keyboardNavigationLabelProvider:v.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},v.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return v.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}})}))),{tree:this})),this.model=this.createModel(e,this.view,l),c.input=this.model.onDidChangeCollapseState;const C=f.Jh.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}),this.disposables);if(C((()=>null),null,this.disposables),p.input=f.Jh.chain(f.Jh.any(C,this.focus.onDidChange,this.selection.onDidChange)).debounce((()=>null),0).map((()=>{const e=new Set;for(const t of this.focus.getNodes())e.add(t);for(const t of this.selection.getNodes())e.add(t);return[...e.values()]})).event,!1!==l.keyboardSupport){const e=f.Jh.chain(this.view.onKeyDown).filter((e=>!(0,d.B6)(e.target))).map((e=>new r.Z(e)));e.filter((e=>15===e.keyCode)).on(this.onLeftArrow,this,this.disposables),e.filter((e=>17===e.keyCode)).on(this.onRightArrow,this,this.disposables),e.filter((e=>10===e.keyCode)).on(this.onSpace,this,this.disposables)}(null===(a=l.findWidgetEnabled)||void 0===a||a)&&l.keyboardNavigationLabelProvider&&l.contextViewProvider?(this.findController=new I(this,this.model,this.view,g,l.contextViewProvider),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=f.Jh.None,this.styleElement=(0,o.li)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===s.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return f.Jh.filter(f.Jh.map(this.view.onMouseDblClick,T),(e=>e.target!==c.Lx.Filter))}get onPointer(){return f.Jh.map(this.view.onPointer,T)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return f.Jh.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.mode)&&void 0!==t?t:n.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===s.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),(0,w.Et)(t)&&(null===(i=this.findController)||void 0===i||i.layout(t))}style(e){var t;const i=`.${this.view.domId}`,s=[];e.treeIndentGuidesStroke&&(s.push(`.monaco-list${i}:hover .monaco-tl-indent > .indent-guide, .monaco-list${i}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),s.push(`.monaco-list${i} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=s.join("\n"),null===(t=this.findController)||void 0===t||t.style(e),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const i=e.map((e=>this.model.getNode(e)));this.selection.set(i,t);const s=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const i=e.map((e=>this.model.getNode(e)));this.focus.set(i,t);const s=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(s,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);-1!==i&&this.view.reveal(i,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const e=this.model.getParentNodeLocation(s);if(!e)return;const t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],s=this.model.getNodeLocation(i),n=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,n)}dispose(){(0,b.AS)(this.disposables),this.view.dispose()}}},23265:function(e,t,i){i.d(t,{d:function(){return T},t:function(){return _}});var s=i(83022),n=i(13043),o=i(31272),r=i(79421),l=i(97757),d=i(65958),a=i(26048),h=i(94327),c=i(2106),p=i(17954),u=i(10998),g=i(79359),m=function(e,t,i,s){return new(i||(i=Promise))((function(n,o){function r(e){try{d(s.next(e))}catch(e){o(e)}}function l(e){try{d(s.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((s=s.apply(e,t||[])).next())}))};function f(e){return Object.assign(Object.assign({},e),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function v(e,t){return!!t.parent&&(t.parent===e||v(e,t.parent))}class b{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new b(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class C{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...a.W6.treeItemLoading.classNamesArray),!0):(t.classList.remove(...a.W6.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,i,s){var n,o;null===(o=(n=this.renderer).disposeElement)||void 0===o||o.call(n,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function w(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function y(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}class N extends s.ur{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function D(e){return e instanceof s.ur?new N(e):e}class S{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){var i,s;null===(s=(i=this.dnd).onDragStart)||void 0===s||s.call(i,D(e),t)}onDragOver(e,t,i,s,n=!0){return this.dnd.onDragOver(D(e),t&&t.element,i,s)}drop(e,t,i,s){this.dnd.drop(D(e),t&&t.element,i,s)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}}function E(e){return e&&Object.assign(Object.assign({},e),{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new S(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>{var i;return!!(null===(i=e.accessibilityProvider)||void 0===i?void 0:i.isChecked(t.element))}:void 0,getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),filter:e.filter&&{filter(t,i){return e.filter.filter(t.element,i)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"!=typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),additionalScrollHeight:e.additionalScrollHeight})}function P(e,t){t(e),e.children.forEach((e=>P(e,t)))}class _{constructor(e,t,i,s,n,o={}){this.user=e,this.dataSource=n,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new c.vl,this._onDidChangeNodeSlowState=new c.vl,this.nodeMapper=new l.y2((e=>new b(e))),this.disposables=new u.Cm,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=void 0!==o.autoExpandSingleChildren&&o.autoExpandSingleChildren,this.sorter=o.sorter,this.collapseByDefault=o.collapseByDefault,this.tree=this.createTree(e,t,i,s,o),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=f({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return c.Jh.map(this.tree.onDidChangeFocus,w)}get onDidChangeSelection(){return c.Jh.map(this.tree.onDidChangeSelection,w)}get onMouseDblClick(){return c.Jh.map(this.tree.onMouseDblClick,y)}get onPointer(){return c.Jh.map(this.tree.onPointer,y)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,i,s,o){const l=new n.w0(i),d=s.map((e=>new C(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),a=E(o)||{};return new r.u(e,t,l,d,a)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return m(this,void 0,void 0,(function*(){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}))}_updateChildren(e=this.root.element,t=!0,i=!1,s,n){return m(this,void 0,void 0,(function*(){if(void 0===this.root.element)throw new l.jh(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield c.Jh.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(yield this.refreshAndRenderNode(o,t,s,n),i)try{this.tree.rerender(o)}catch(e){}}))}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return m(this,void 0,void 0,(function*(){if(void 0===this.root.element)throw new l.jh(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield c.Jh.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i))return!1;if(i.refreshPromise&&(yield this.root.refreshPromise,yield c.Jh.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield c.Jh.toPromise(this._onDidRender.event)),s}))}setSelection(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map((e=>e.element))}setFocus(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map((e=>e.element))}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new l.jh(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,s){return m(this,void 0,void 0,(function*(){yield this.refreshNode(e,t,i),this.render(e,i,s)}))}refreshNode(e,t,i){return m(this,void 0,void 0,(function*(){let s;if(this.subTreeRefreshPromises.forEach(((n,o)=>{!s&&function(e,t){return e===t||v(e,t)||v(t,e)}(o,e)&&(s=n.then((()=>this.refreshNode(e,t,i))))})),s)return s;if(e!==this.root){if(this.tree.getNode(e).collapsed)return e.hasChildren=!!this.dataSource.hasChildren(e.element),void(e.stale=!0)}return this.doRefreshSubTree(e,t,i)}))}doRefreshSubTree(e,t,i){return m(this,void 0,void 0,(function*(){let s;e.refreshPromise=new Promise((e=>s=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const s=yield this.doRefreshNode(e,t,i);e.stale=!1,yield d.HC.settled(s.map((e=>this.doRefreshSubTree(e,t,i))))}finally{s()}}))}doRefreshNode(e,t,i){return m(this,void 0,void 0,(function*(){let s;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const t=this.doGetChildren(e);if((0,g.xZ)(t))s=Promise.resolve(t);else{const i=(0,d.wR)(800);i.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),s=t.finally((()=>i.cancel()))}}else s=Promise.resolve(p.f.empty());try{const n=yield s;return this.setChildren(e,n,t,i)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),(0,h.MB)(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}))}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return(0,g.xZ)(i)?this.processChildren(i):(t=(0,d.SS)((()=>m(this,void 0,void 0,(function*(){return this.processChildren(yield i)})))),this.refreshPromises.set(e,t),t.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState({node:e,deep:t}){null!==e.element&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(h.dz))}setChildren(e,t,i,s){const n=[...t];if(0===e.children.length&&0===n.length)return[];const o=new Map,r=new Map;for(const t of e.children)if(o.set(t.element,t),this.identityProvider){const e=this.tree.isCollapsed(t);r.set(t.id,{node:t,collapsed:e})}const l=[],d=n.map((t=>{const n=!!this.dataSource.hasChildren(t);if(!this.identityProvider){const i=f({element:t,parent:e,hasChildren:n});return n&&this.collapseByDefault&&!this.collapseByDefault(t)&&(i.collapsedByDefault=!1,l.push(i)),i}const d=this.identityProvider.getId(t).toString(),a=r.get(d);if(a){const e=a.node;return o.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=n,i?a.collapsed?(e.children.forEach((e=>P(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):l.push(e):n&&this.collapseByDefault&&!this.collapseByDefault(t)&&(e.collapsedByDefault=!1,l.push(e)),e}const h=f({element:t,parent:e,id:d,hasChildren:n});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(h),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(h),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1?l.push(h):n&&this.collapseByDefault&&!this.collapseByDefault(t)&&(h.collapsedByDefault=!1,l.push(h)),h}));for(const e of o.values())P(e,(e=>this.nodes.delete(e.element)));for(const e of d)this.nodes.set(e.element,e);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&1===d.length&&0===l.length&&(d[0].collapsedByDefault=!1,l.push(d[0])),l}render(e,t,i){const s=e.children.map((e=>this.asTreeElement(e,t))),n=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId(e){return i.diffIdentityProvider.getId(e.element)}}});this.tree.setChildren(e===this.root?null:e,s,n),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return i=!(t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1)&&e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?p.f.map(e.children,(e=>this.asTreeElement(e,t))):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class L{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new L(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class I{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...a.W6.treeItemLoading.classNamesArray),!0):(t.classList.remove(...a.W6.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,i,s){var n,o;null===(o=(n=this.renderer).disposeElement)||void 0===o||o.call(n,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var n,o;null===(o=(n=this.renderer).disposeCompressedElements)||void 0===o||o.call(n,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,u.AS)(this.disposables)}}class T extends _{constructor(e,t,i,s,n,o,r={}){super(e,t,i,n,o,r),this.compressionDelegate=s,this.compressibleNodeMapper=new l.y2((e=>new L(e))),this.filter=r.filter}createTree(e,t,i,s,o){const l=new n.w0(i),d=s.map((e=>new I(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),a=function(e){const t=e&&E(e);return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},t.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((e=>e.element)))}})})}(o)||{};return new r._(e,t,l,d,a)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const i=e=>this.identityProvider.getId(e).toString(),s=e=>{const t=new Set;for(const s of e){const e=this.tree.getCompressedTreeNode(s===this.root?null:s);if(e.element)for(const s of e.element.elements)t.add(i(s.element))}return t},n=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t);const r=this.getSelection();let l=!1;const d=this.getFocus();let a=!1;const h=e=>{const t=e.element;if(t)for(let e=0;e<t.elements.length;e++){const s=i(t.elements[e].element),h=t.elements[t.elements.length-1].element;n.has(s)&&-1===r.indexOf(h)&&(r.push(h),l=!0),o.has(s)&&-1===d.indexOf(h)&&(d.push(h),a=!0)}e.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(r),a&&this.setFocus(d)}processChildren(e){return this.filter&&(e=p.f.filter(e,(e=>{const t=this.filter.filter(e,1),i="boolean"==typeof(s=t)?s?1:0:(0,o.iZ)(s)?(0,o.Mn)(s.visibility):(0,o.Mn)(s);var s;if(2===i)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===i}))),super.processChildren(e)}}},93421:function(e,t,i){i.d(t,{f:function(){return o}});var s=i(13043),n=i(93637);class o extends s.DO{constructor(e,t,i,s,n,o={}){super(e,t,i,s,o),this.user=e,this.dataSource=n,this.identityProvider=o.identityProvider}createModel(e,t,i){return new n.v(e,t,i)}}},31272:function(e,t,i){i.d(t,{G6:function(){return p},Mn:function(){return h},iZ:function(){return a}});var s=i(97757),n=i(13338),o=i(65958),r=i(2111),l=i(2106),d=i(17954);function a(e){return"object"==typeof e&&"visibility"in e&&"data"in e}function h(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function c(e){return"boolean"==typeof e.collapsible}class p{constructor(e,t,i,s={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new l.at,this._onDidChangeCollapseState=new l.vl,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new l.vl,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new l.vl,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new o.ve(o.hW),this.collapseByDefault=void 0!==s.collapseByDefault&&s.collapseByDefault,this.filter=s.filter,this.autoExpandSingleChildren=void 0!==s.autoExpandSingleChildren&&s.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=d.f.empty(),n={}){if(0===e.length)throw new s.jh(this.user,"Invalid tree location");n.diffIdentityProvider?this.spliceSmart(n.diffIdentityProvider,e,t,i,n):this.spliceSimple(e,t,i,n)}spliceSmart(e,t,i,s,n,o){var l;void 0===s&&(s=d.f.empty()),void 0===o&&(o=null!==(l=n.diffDepth)&&void 0!==l?l:0);const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,s,n);const h=[...s],c=t[t.length-1],p=new r.uP({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...h,...a.children.slice(c+i)].map((t=>e.getId(t.element).toString()))}).ComputeDiff(!1);if(p.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,h,n);const u=t.slice(0,-1),g=(t,i,s)=>{if(o>0)for(let r=0;r<s;r++)t--,i--,this.spliceSmart(e,[...u,t,0],Number.MAX_SAFE_INTEGER,h[i].children,n,o-1)};let m=Math.min(a.children.length,c+i),f=h.length;for(const e of p.changes.sort(((e,t)=>t.originalStart-e.originalStart)))g(m,f,m-(e.originalStart+e.originalLength)),m=e.originalStart,f=e.modifiedStart-c,this.spliceSimple([...u,m],e.originalLength,d.f.slice(h,f,f+e.modifiedLength),n);g(m,f,m)}spliceSimple(e,t,i=d.f.empty(),{onDidCreateNode:s,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:l,listIndex:a,revealed:h,visible:c}=this.getParentNodeWithListIndex(e),p=[],u=d.f.map(i,(e=>this.createTreeNode(e,l,l.visible?1:0,h,p,s))),g=e[e.length-1],m=l.children.length>0;let f=0;for(let e=g;e>=0&&e<l.children.length;e--){const t=l.children[e];if(t.visible){f=t.visibleChildIndex;break}}const v=[];let b=0,C=0;for(const e of u)v.push(e),C+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=f+b++);const w=(0,n.V4)(l.children,g,t,v);r?l.lastDiffIds?(0,n.V4)(l.lastDiffIds,g,t,v.map((e=>r.getId(e.element).toString()))):l.lastDiffIds=l.children.map((e=>r.getId(e.element).toString())):l.lastDiffIds=void 0;let y=0;for(const e of w)e.visible&&y++;if(0!==y)for(let e=g+v.length;e<l.children.length;e++){const t=l.children[e];t.visible&&(t.visibleChildIndex-=y)}if(l.visibleChildrenCount+=b-y,h&&c){const e=w.reduce(((e,t)=>e+(t.visible?t.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(l,C-e),this.list.splice(a,e,p)}if(w.length>0&&o){const e=t=>{o(t),t.children.forEach(e)};w.forEach(e)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:w});const N=l.children.length>0;m!==N&&this.setCollapsible(e.slice(0,-1),N);let D=l;for(;D;){if(2===D.visibility){this.refilterDelayer.trigger((()=>this.refilter()));break}D=D.parent}}rerender(e){if(0===e.length)throw new s.jh(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:n}=this.getTreeNodeWithListIndex(e);t.visible&&n&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:s}=this.getTreeNodeWithListIndex(e);return i&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,s)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const s=this.getTreeNode(e);void 0===t&&(t=!s.collapsed);const n={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,n)))}_setCollapseState(e,t){const{node:i,listIndex:s,revealed:n}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,s,n,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!c(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let s=-1;for(let e=0;e<i.children.length;e++){if(i.children[e].visible){if(s>-1){s=-1;break}s=e}}s>-1&&this._setCollapseState([...e,s],t)}return o}_setListNodeCollapseState(e,t,i,s){const n=this._setNodeCollapseState(e,s,!1);if(!i||!e.visible||!n)return n;const o=e.renderNodeCount,r=this.updateNodeAfterCollapseChange(e),l=o-(-1===t?0:1);return this.list.splice(t+1,l,r.slice(1)),n}_setNodeCollapseState(e,t,i){let s;if(e===this.root?s=!1:(c(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!c(t)&&t.recursive)for(const i of e.children)s=this._setNodeCollapseState(i,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents((()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,s,n,o){const r={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(r,i);r.visibility=l,s&&n.push(r);const a=e.children||d.f.empty(),h=s&&0!==l&&!r.collapsed,c=d.f.map(a,(e=>this.createTreeNode(e,r,l,h,n,o)));let p=0,u=1;for(const e of c)r.children.push(e),u+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=p++);return r.collapsible=r.collapsible||r.children.length>0,r.visibleChildrenCount=p,r.visible=2===l?p>0:1===l,r.visible?r.collapsed||(r.renderNodeCount=u):(r.renderNodeCount=0,s&&n.pop()),null==o||o(r),r}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,s=!0){let n;if(e!==this.root){if(n=this._filterNode(e,t),0===n)return e.visible=!1,e.renderNodeCount=0,!1;s&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let r=!1;if(e.collapsed&&0===n)e.visibleChildrenCount=0;else{let t=0;for(const o of e.children)r=this._updateNodeAfterFilterChange(o,n,i,s&&!e.collapsed)||r,o.visible&&(o.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===n?r:1===n,e.visibility=n),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,s&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return"boolean"==typeof i?(e.filterData=void 0,i?1:0):a(i)?(e.filterData=i.data,h(i.visibility)):(e.filterData=void 0,h(i))}hasTreeNode(e,t=this.root){if(!e||0===e.length)return!0;const[i,...s]=e;return!(i<0||i>t.children.length)&&this.hasTreeNode(s,t.children[i])}getTreeNode(e,t=this.root){if(!e||0===e.length)return t;const[i,...n]=e;if(i<0||i>t.children.length)throw new s.jh(this.user,"Invalid tree location");return this.getTreeNode(n,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:n,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new s.jh(this.user,"Invalid tree location");const l=t.children[r];return{node:l,listIndex:i,revealed:n,visible:o&&l.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,n=!0,o=!0){const[r,...l]=e;if(r<0||r>t.children.length)throw new s.jh(this.user,"Invalid tree location");for(let e=0;e<r;e++)i+=t.children[e].renderNodeCount;return n=n&&!t.collapsed,o=o&&t.visible,0===l.length?{parentNode:t,listIndex:i,revealed:n,visible:o}:this.getParentNodeWithListIndex(l,t.children[r],i+1,n,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:(0,n.bS)(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}}},79421:function(e,t,i){i.d(t,{_:function(){return y},u:function(){return C}});var s=i(13043),n=i(93637),o=i(97757),r=i(2106),l=i(17954);function d(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:l.f.map(l.f.from(e.children),d),collapsible:e.collapsible,collapsed:e.collapsed}}function a(e){const t=[e.element],i=e.incompressible||!1;let s,n;for(;[n,s]=l.f.consume(l.f.from(e.children),2),1===n.length&&!n[0].incompressible;)e=n[0],t.push(e.element);return{element:{elements:t,incompressible:i},children:l.f.map(l.f.concat(n,s),a),collapsible:e.collapsible,collapsed:e.collapsed}}function h(e,t=0){let i;return i=t<e.element.elements.length-1?[h(e,t+1)]:l.f.map(l.f.from(e.children),(e=>h(e,0))),0===t&&e.element.incompressible?{element:e.element.elements[t],children:i,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:i,collapsible:e.collapsible,collapsed:e.collapsed}}function c(e){return h(e,0)}function p(e,t,i){return e.element===t?Object.assign(Object.assign({},e),{children:i}):Object.assign(Object.assign({},e),{children:l.f.map(l.f.from(e.children),(e=>p(e,t,i)))})}class u{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new n.v(e,t,i),this.enabled=void 0===i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=l.f.empty(),i){const s=i.diffIdentityProvider&&(n=i.diffIdentityProvider,{getId(e){return e.elements.map((e=>n.getId(e).toString())).join("\0")}});var n;if(null===e){const e=l.f.map(t,this.enabled?a:d);return void this._setChildren(null,e,{diffIdentityProvider:s,diffDepth:1/0})}const o=this.nodes.get(e);if(!o)throw new Error("Unknown compressed tree node");const r=this.model.getNode(o),h=this.model.getParentNodeLocation(o),u=this.model.getNode(h),g=p(c(r),e,t),m=(this.enabled?a:d)(g),f=u.children.map((e=>e===r?m:e));this._setChildren(u.element,f,{diffIdentityProvider:s,diffDepth:r.depth-u.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const t=this.model.getNode().children,i=l.f.map(t,c),s=l.f.map(i,e?a:d);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set;this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:e=>{for(const t of e.element.elements)s.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(const t of e.element.elements)s.has(t)||this.nodes.delete(t)}}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(void 0===e)return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;const t=this.nodes.get(e);if(!t)throw new o.jh(this.user,`Tree element not found: ${e}`);return t}}const g=e=>e[e.length-1];class m{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new m(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class f{constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||g;const s=e=>this.elementMapper(e.elements);this.nodeMapper=new o.y2((e=>new m(s,e))),this.model=new u(e,function(e,t){return{splice(i,s,n){t.splice(i,s,n.map((t=>e.map(t))))},updateElementHeight(e,i){t.updateElementHeight(e,i)}}}(this.nodeMapper,t),function(e,t){return Object.assign(Object.assign({},t),{identityProvider:t.identityProvider&&{getId(i){return t.identityProvider.getId(e(i))}},sorter:t.sorter&&{compare(e,i){return t.sorter.compare(e.elements[0],i.elements[0])}},filter:t.filter&&{filter(i,s){return t.filter.filter(e(i),s)}}})}(s,i))}get onDidSplice(){return r.Jh.map(this.model.onDidSplice,(({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map((e=>this.nodeMapper.map(e))),deletedNodes:t.map((e=>this.nodeMapper.map(e)))})))}get onDidChangeCollapseState(){return r.Jh.map(this.model.onDidChangeCollapseState,(({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t})))}get onDidChangeRenderNodeCount(){return r.Jh.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}setChildren(e,t=l.f.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return null==t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var v=i(88846),b=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};class C extends s.DO{constructor(e,t,i,s,n={}){super(e,t,i,s,n),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=l.f.empty(),i){this.model.setChildren(e,t,i)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new n.v(e,t,i)}}class w{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){const n=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);1===n.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,s)):(i.compressedTreeNode=n,this.renderer.renderCompressedElements(n,t,i.data,s))}disposeElement(e,t,i,s){var n,o,r,l;i.compressedTreeNode?null===(o=(n=this.renderer).disposeCompressedElements)||void 0===o||o.call(n,i.compressedTreeNode,t,i.data,s):null===(l=(r=this.renderer).disposeElement)||void 0===l||l.call(r,e,t,i.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}b([v.B],w.prototype,"compressedTreeNodeProvider",null);class y extends C{constructor(e,t,i,s,n={}){const o=()=>this;super(e,t,i,s.map((e=>new w(o,e))),function(e,t){return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let s;try{s=e().getCompressedTreeNode(i)}catch(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===s.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(s.element.elements)}}})}(o,n))}setChildren(e,t=l.f.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new f(e,t,i)}updateOptions(e={}){super.updateOptions(e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}},93637:function(e,t,i){i.d(t,{v:function(){return r}});var s=i(31272),n=i(97757),o=i(17954);class r{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new s.G6(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(e,t){return i.sorter.compare(e.element,t.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=o.f.empty(),i={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),i)}_setChildren(e,t=o.f.empty(),i){const s=new Set,n=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:e=>{var t;if(null===e.element)return;const o=e;if(s.add(o.element),this.nodes.set(o.element,o),this.identityProvider){const e=this.identityProvider.getId(o.element).toString();n.add(e),this.nodesByIdentity.set(e,o)}null===(t=i.onDidCreateNode)||void 0===t||t.call(i,o)},onDidDeleteNode:e=>{var t;if(null===e.element)return;const o=e;if(s.has(o.element)||this.nodes.delete(o.element),this.identityProvider){const e=this.identityProvider.getId(o.element).toString();n.has(e)||this.nodesByIdentity.delete(e)}null===(t=i.onDidDeleteNode)||void 0===t||t.call(i,o)}}))}preserveCollapseState(e=o.f.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),o.f.map(e,(e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){const i=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(i)}if(!t)return Object.assign(Object.assign({},e),{children:this.preserveCollapseState(e.children)});const i="boolean"==typeof e.collapsible?e.collapsible:t.collapsible,s=void 0!==e.collapsed?e.collapsed:t.collapsed;return Object.assign(Object.assign({},e),{collapsible:i,collapsed:s,children:this.preserveCollapseState(e.children)})}))}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(null===e)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new n.jh(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new n.jh(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new n.jh(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(i);return this.model.getNode(s).element}getElementLocation(e){if(null===e)return[];const t=this.nodes.get(e);if(!t)throw new n.jh(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}},97757:function(e,t,i){var s;i.d(t,{Lx:function(){return s},jh:function(){return n},y2:function(){return o}}),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(s||(s={}));class n extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class o{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}},45222:function(e,t,i){i.d(t,{x:function(){return d}});var s=i(14333),n=i(87594),o=i(9715),r=i(30474),l=i(10998);class d extends l.jG{onclick(e,t){this._register(s.ko(e,s.Bx.CLICK,(e=>t(new o.P(e)))))}onmousedown(e,t){this._register(s.ko(e,s.Bx.MOUSE_DOWN,(e=>t(new o.P(e)))))}onmouseover(e,t){this._register(s.ko(e,s.Bx.MOUSE_OVER,(e=>t(new o.P(e)))))}onmouseleave(e,t){this._register(s.ko(e,s.Bx.MOUSE_LEAVE,(e=>t(new o.P(e)))))}onkeydown(e,t){this._register(s.ko(e,s.Bx.KEY_DOWN,(e=>t(new n.Z(e)))))}onkeyup(e,t){this._register(s.ko(e,s.Bx.KEY_UP,(e=>t(new n.Z(e)))))}oninput(e,t){this._register(s.ko(e,s.Bx.INPUT,t))}onblur(e,t){this._register(s.ko(e,s.Bx.BLUR,t))}onfocus(e,t){this._register(s.ko(e,s.Bx.FOCUS,t))}ignoreGesture(e){r.q.ignoreTarget(e)}}}}]);
