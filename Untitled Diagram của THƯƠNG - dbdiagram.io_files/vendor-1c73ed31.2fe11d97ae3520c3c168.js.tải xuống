!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2d4e67ab-b88d-4001-be1e-a75ad64114b7",e._sentryDebugIdIdentifier="sentry-dbid-2d4e67ab-b88d-4001-be1e-a75ad64114b7")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[8655],{54968:function(e,t,i){i.d(t,{T:function(){return f}});var o,n=i(27067),s=i(54435),r=i(77922),a=i(94327),d=i(1458),l=i(2106),c=i(10998),u=i(48218),h=i(54957),g=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,o){t(i,o,e)}},m=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function a(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let f=class e{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new l.vl,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const o=new c.Cm;return{element:o.add((0,n.G)(e,Object.assign(Object.assign({},this._getRenderOptions(e,o)),t),i)).element,dispose:()=>o.dispose()}}_getRenderOptions(t,i){return{codeBlockRenderer:(t,i)=>m(this,void 0,void 0,(function*(){var o,n,s;let r;t?r=this._languageService.getLanguageIdByLanguageName(t):this._options.editor&&(r=null===(o=this._options.editor.getModel())||void 0===o?void 0:o.getLanguageId()),r||(r=h.vH);const a=yield(0,d.Yj)(this._languageService,i,r),l=document.createElement("span");if(l.innerHTML=null!==(s=null===(n=e._ttpTokenizer)||void 0===n?void 0:n.createHTML(a))&&void 0!==s?s:a,this._options.editor){const e=this._options.editor.getOption(46);(0,u.M)(l,e)}else this._options.codeBlockFontFamily&&(l.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(l.style.fontSize=this._options.codeBlockFontSize),l})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:e=>this._openerService.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:t.isTrusted}).catch(a.dz),disposables:i}}}};f._ttpTokenizer=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("tokenizeToString",{createHTML(e){return e}}),f=g([p(1,r.L),p(2,s.Cr)],f)},77064:function(e,t,i){i.d(t,{k:function(){return h}});var o=i(59407),n=i(65958),s=i(10998),r=i(50946),a=i(28061),d=i(3765),l=i(96655),c=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){return function(i,o){t(i,o,e)}};let h=class e{constructor(t,i){this._messageWidget=new s.HE,this._messageListeners=new s.Cm,this._editor=t,this._visible=e.MESSAGE_VISIBLE.bindTo(i)}static get(t){return t.getContribution(e.ID)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,o.xE)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new p(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(new n.pc((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new a.Q(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(p.fadeOut(this._messageWidget.value))}};h.ID="editor.contrib.messageController",h.MESSAGE_VISIBLE=new l.N1("messageVisible",!1,d.kg("messageVisible","Whether the editor is currently showing an inline message")),h=c([u(1,l.fN)],h);const g=r.DX.bindToContribution(h.get);(0,r.E_)(new g({id:"leaveEditorMessage",precondition:h.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class p{constructor(e,{lineNumber:t,column:i},o){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const n=document.createElement("div");n.classList.add("anchor","top"),this._domNode.appendChild(n);const s=document.createElement("div");s.classList.add("message"),s.textContent=o,this._domNode.appendChild(s);const r=document.createElement("div");r.classList.add("anchor","below"),this._domNode.appendChild(r),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,r.HW)(h.ID,h)},74984:function(e,t,i){i.r(t),i.d(t,{AddSelectionToNextFindMatchAction:function(){return T},AddSelectionToPreviousFindMatchAction:function(){return P},CompatChangeAll:function(){return H},FocusNextCursor:function(){return G},FocusPreviousCursor:function(){return Q},InsertCursorAbove:function(){return w},InsertCursorBelow:function(){return M},MoveSelectionToNextFindMatchAction:function(){return O},MoveSelectionToPreviousFindMatchAction:function(){return D},MultiCursorSelectionController:function(){return F},MultiCursorSelectionControllerAction:function(){return N},MultiCursorSession:function(){return L},MultiCursorSessionResult:function(){return I},SelectHighlightsAction:function(){return A},SelectionHighlighter:function(){return W}});var o=i(59407),n=i(65958),s=i(68387),r=i(10998),a=i(50946),d=i(27064),l=i(28061),c=i(93702),u=i(38122),h=i(66055),g=i(20491),p=i(14831),m=i(3765),f=i(58067),_=i(96655),v=i(4874),b=i(89044),C=i(52230),k=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,o){t(i,o,e)}};function S(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),t=1===i.length?m.kg("cursorAdded","Cursor added: {0}",e):m.kg("cursorsAdded","Cursors added: {0}",e);(0,o.h5)(t)}}class w extends a.ks{constructor(){super({id:"editor.action.insertCursorAbove",label:m.kg("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:f.D8.MenubarSelectionMenu,group:"3_multi",title:m.kg({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let o=!0;i&&!1===i.logicalLine&&(o=!1);const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=n.getCursorStates();n.setCursorStates(i.source,3,d.c.addCursorUp(n,s,o)),n.revealTopMostCursor(i.source),S(s,n.getCursorStates())}}class M extends a.ks{constructor(){super({id:"editor.action.insertCursorBelow",label:m.kg("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:f.D8.MenubarSelectionMenu,group:"3_multi",title:m.kg({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let o=!0;i&&!1===i.logicalLine&&(o=!1);const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const s=n.getCursorStates();n.setCursorStates(i.source,3,d.c.addCursorDown(n,s,o)),n.revealBottomMostCursor(i.source),S(s,n.getCursorStates())}}class R extends a.ks{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:m.kg("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:f.D8.MenubarSelectionMenu,group:"3_multi",title:m.kg({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let o=e.startLineNumber;o<e.endLineNumber;o++){const e=t.getLineMaxColumn(o);i.push(new c.L(o,e,o,e))}e.endColumn>1&&i.push(new c.L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),o=t.getSelections(),n=t._getViewModel(),s=n.getCursorStates(),r=[];o.forEach((e=>this.getCursorsForSelection(e,i,r))),r.length>0&&t.setSelections(r),S(s,n.getCursorStates())}}class x extends a.ks{constructor(){super({id:"editor.action.addCursorsToBottom",label:m.kg("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),o=t.getModel().getLineCount(),n=[];for(let e=i[0].startLineNumber;e<=o;e++)n.push(new c.L(e,i[0].startColumn,e,i[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();n.length>0&&t.setSelections(n),S(r,s.getCursorStates())}}class E extends a.ks{constructor(){super({id:"editor.action.addCursorsToTop",label:m.kg("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),o=[];for(let e=i[0].startLineNumber;e>=1;e--)o.push(new c.L(e,i[0].startColumn,e,i[0].endColumn));const n=t._getViewModel(),s=n.getCursorStates();o.length>0&&t.setSelections(o),S(s,n.getCursorStates())}}class I{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class L{constructor(e,t,i,o,n,s,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=o,this.wholeWord=n,this.matchCase=s,this.currentMatch=r}static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new L(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let o,n,s=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(s=!0,o=!0,n=!0):(o=i.wholeWord,n=i.matchCase);const a=e.getSelection();let d,l=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;d=t.word,l=new c.L(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else d=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new L(e,t,s,d,o,n,l)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new I(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new I(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return i?new c.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new I(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new I(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return i?new c.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824)}}class F extends r.jG{constructor(e){super(),this._sessionDispose=this._register(new r.Cm),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(F.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=L.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new c.L(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!V(this._editor.getModel(),t,i)){const e=this._editor.getModel(),i=[];for(let o=0,n=t.length;o<n;o++)i[o]=this._expandEmptyToWord(e,t[o]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const e=this._editor.getModel();t=i.searchScope?e.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(119):null,!1,1073741824):e.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(119):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const e=this._editor.getSelection();for(let i=0,o=t.length;i<o;i++){const o=t[i];if(o.range.intersectRanges(e)){t[i]=t[0],t[0]=o;break}}this._setSelections(t.map((e=>new c.L(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}F.ID="editor.contrib.multiCursorController";class N extends a.ks{run(e,t){const i=F.get(t);if(!i)return;const o=p.CommonFindController.get(t);if(!o)return;const n=t._getViewModel();if(n){const e=n.getCursorStates();this._run(i,o),S(e,n.getCursorStates())}}}class T extends N{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:m.kg("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:2082,weight:100},menuOpts:{menuId:f.D8.MenubarSelectionMenu,group:"3_multi",title:m.kg({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class P extends N{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:m.kg("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:f.D8.MenubarSelectionMenu,group:"3_multi",title:m.kg({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class O extends N{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:m.kg("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:(0,s.m5)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class D extends N{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:m.kg("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class A extends N{constructor(){super({id:"editor.action.selectHighlights",label:m.kg("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:3114,weight:100},menuOpts:{menuId:f.D8.MenubarSelectionMenu,group:"3_multi",title:m.kg({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class H extends N{constructor(){super({id:"editor.action.changeAll",label:m.kg("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:_.M$.and(u.R.writable,u.R.editorTextFocus),kbOpts:{kbExpr:u.R.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class B{constructor(e,t,i,o,n){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=o,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,n&&this._model===n._model&&this._searchText===n._searchText&&this._matchCase===n._matchCase&&this._wordSeparators===n._wordSeparators&&this._modelVersionId===n._modelVersionId&&(this._cachedFindMatches=n._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(l.Q.compareRangesUsingStarts)),this._cachedFindMatches}}let W=class e extends r.jG{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(99),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new n.uC((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(99)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const i=p.CommonFindController.get(e);i&&this._register(i.getState().onFindReplaceStateChange((e=>{this._update()})))}_update(){this._setState(e._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t)return null;if(!i.hasModel())return null;const o=i.getSelection();if(o.startLineNumber!==o.endLineNumber)return null;const n=F.get(i);if(!n)return null;const s=p.CommonFindController.get(i);if(!s)return null;let r=n.getSession(s);if(!r){const e=i.getSelections();if(e.length>1){const t=s.getState().matchCase;if(!V(i.getModel(),e,t))return null}r=L.create(i,s)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const a=s.getState(),d=a.matchCase;if(a.isRevealed){let e=a.searchString;d||(e=e.toLowerCase());let t=r.searchText;if(d||(t=t.toLowerCase()),e===t&&r.matchCase===a.matchCase&&r.wholeWord===a.wholeWord&&!a.isRegex)return null}return new B(i.getModel(),r.searchText,r.matchCase,r.wholeWord?i.getOption(119):null,e)}_setState(t){if(this.state=t,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const i=this.editor.getModel();if(i.isTooLargeForTokenization())return;const o=this.state.findMatches(),n=this.editor.getSelections();n.sort(l.Q.compareRangesUsingStarts);const s=[];for(let e=0,t=0,i=o.length,r=n.length;e<i;){const i=o[e];if(t>=r)s.push(i),e++;else{const o=l.Q.compareRangesUsingStarts(i,n[t]);o<0?(!n[t].isEmpty()&&l.Q.areIntersecting(i,n[t])||s.push(i),e++):(o>0||e++,t++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(i)&&this.editor.getOption(74),a=s.map((t=>({range:t,options:r?e._SELECTION_HIGHLIGHT:e._SELECTION_HIGHLIGHT_OVERVIEW})));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};function V(e,t,i){const o=j(e,t[0],!i);for(let n=1,s=t.length;n<s;n++){const s=t[n];if(s.isEmpty())return!1;if(o!==j(e,s,!i))return!1}return!0}function j(e,t,i){const o=e.getValueInRange(t);return i?o.toLowerCase():o}W.ID="editor.contrib.selectionHighlighter",W._SELECTION_HIGHLIGHT_OVERVIEW=g.kI.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:(0,b.Yf)(v.Xp1),position:h.R3.Inline},overviewRuler:{color:(0,b.Yf)(v.z5H),position:h.A5.Center}}),W._SELECTION_HIGHLIGHT=g.kI.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),W=k([y(1,C.u)],W);class G extends a.ks{constructor(){super({id:"editor.action.focusNextCursor",label:m.kg("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:m.kg("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const n=Array.from(o.getCursorStates()),s=n.shift();s&&(n.push(s),o.setCursorStates(i.source,3,n),o.revealPrimaryCursor(i.source,!0),S(n,o.getCursorStates()))}}class Q extends a.ks{constructor(){super({id:"editor.action.focusPreviousCursor",label:m.kg("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:m.kg("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const n=Array.from(o.getCursorStates()),s=n.pop();s&&(n.unshift(s),o.setCursorStates(i.source,3,n),o.revealPrimaryCursor(i.source,!0),S(n,o.getCursorStates()))}}(0,a.HW)(F.ID,F),(0,a.HW)(W.ID,W),(0,a.Fl)(w),(0,a.Fl)(M),(0,a.Fl)(R),(0,a.Fl)(T),(0,a.Fl)(P),(0,a.Fl)(O),(0,a.Fl)(D),(0,a.Fl)(A),(0,a.Fl)(H),(0,a.Fl)(x),(0,a.Fl)(E),(0,a.Fl)(G),(0,a.Fl)(Q)},61568:function(e,t,i){i.d(t,{RL:function(){return M},_X:function(){return I},e3:function(){return L},j6:function(){return x},n6:function(){return N},x2:function(){return S},z0:function(){return E},zl:function(){return F},zn:function(){return y}});var o=i(14333),n=i(77439),s=i(27969),r=i(26048),a=i(94901),d=i(2106),l=i(71386),c=i(50946),u=i(87301),h=i(30254),g=i(18208),p=i(3765),m=i(47482),f=i(96655),_=i(66726),v=i(82399),b=i(4874),C=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},k=function(e,t){return function(i,o){t(i,o,e)}};const y=(0,v.u1)("IPeekViewService");var S;(0,_.v)(y,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,t){const i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((()=>{const i=this._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),this._widgets.delete(e))}))})}}),function(e){e.inPeekEditor=new f.N1("inReferenceSearchEditor",!0,p.kg("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),e.notInPeekEditor=e.inPeekEditor.toNegated()}(S||(S={}));let w=class{constructor(e,t){e instanceof h.t&&S.inPeekEditor.bindTo(t)}dispose(){}};function M(e){const t=e.get(u.T).getFocusedCodeEditor();return t instanceof h.t?t.getParentEditor():t}w.ID="editor.contrib.referenceController",w=C([k(1,f.fN)],w),(0,c.HW)(w.ID,w);const R={headerBackgroundColor:a.Q1.white,primaryHeadingColor:a.Q1.fromHex("#333333"),secondaryHeadingColor:a.Q1.fromHex("#6c6c6cb3")};let x=class extends g.Pg{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new d.vl,this.onDidClose=this._onDidClose.event,l.co(this.options,R,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=o.$(".head"),this._bodyElement=o.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){const i=o.$(".peekview-title");this.options.supportOnTitleClick&&(i.classList.add("clickable"),o.b2(i,"click",(e=>this._onTitleClick(e)))),o.BC(this._headElement,i),this._fillTitleIcon(i),this._primaryHeading=o.$("span.filename"),this._secondaryHeading=o.$("span.dirname"),this._metaHeading=o.$("span.meta"),o.BC(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);const a=o.$(".peekview-actions");o.BC(this._headElement,a);const d=this._getActionBarOptions();this._actionbarWidget=new n.E(a,d),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new s.rc("peekview.close",p.kg("label.close","Close"),r.W6.close.classNames,!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:m.rN.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:o.w_(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,o.WU(this._metaHeading)):o.jD(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0)return void this.dispose();const i=Math.ceil(1.2*this.editor.getOption(61)),o=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(o,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};x=C([k(2,v._Y)],x);const E=(0,b.x1A)("peekViewTitle.background",{dark:(0,b.JO0)(b.pOz,.1),light:(0,b.JO0)(b.pOz,.1),hcDark:null,hcLight:null},p.kg("peekViewTitleBackground","Background color of the peek view title area.")),I=(0,b.x1A)("peekViewTitleLabel.foreground",{dark:a.Q1.white,light:a.Q1.black,hcDark:a.Q1.white,hcLight:b.By2},p.kg("peekViewTitleForeground","Color of the peek view title.")),L=(0,b.x1A)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},p.kg("peekViewTitleInfoForeground","Color of the peek view title info.")),F=(0,b.x1A)("peekView.border",{dark:b.pOz,light:b.pOz,hcDark:b.b1q,hcLight:b.b1q},p.kg("peekViewBorder","Color of the peek view borders and arrow.")),N=(0,b.x1A)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:a.Q1.black,hcLight:a.Q1.white},p.kg("peekViewResultsBackground","Background color of the peek view result list.")),T=((0,b.x1A)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:a.Q1.white,hcLight:b.By2},p.kg("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),(0,b.x1A)("peekViewResult.fileForeground",{dark:a.Q1.white,light:"#1E1E1E",hcDark:a.Q1.white,hcLight:b.By2},p.kg("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),(0,b.x1A)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},p.kg("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),(0,b.x1A)("peekViewResult.selectionForeground",{dark:a.Q1.white,light:"#6C6C6C",hcDark:a.Q1.white,hcLight:b.By2},p.kg("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),(0,b.x1A)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:a.Q1.black,hcLight:a.Q1.white},p.kg("peekViewEditorBackground","Background color of the peek view editor.")));(0,b.x1A)("peekViewEditorGutter.background",{dark:T,light:T,hcDark:T,hcLight:T},p.kg("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),(0,b.x1A)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},p.kg("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),(0,b.x1A)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},p.kg("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),(0,b.x1A)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:b.buw,hcLight:b.buw},p.kg("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},84434:function(e,t,i){i.d(t,{C:function(){return s}});var o=i(24594),n=i(94032);class s extends n.l{constructor(e,t,i,o,n,s){super(e,t,i,o,n,s)}getCodeEditorCommandPicks(){const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions())t.push({commandId:i.id,commandAlias:i.alias,label:(0,o.pS)(i.label)||i.id});return t}}},86653:function(e,t,i){i.d(t,{o:function(){return c}});var o=i(48289),n=i(10998),s=i(79359),r=i(66638),a=i(66055),d=i(48295),l=i(89044);class c{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;const o=new n.Cm;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const s=o.add(new n.HE);return s.value=this.doProvide(e,t),o.add(this.onDidActiveTextEditorControlChange((()=>{s.value=void 0,s.value=this.doProvide(e,t)}))),o}doProvide(e,t){const i=new n.Cm,a=this.activeTextEditorControl;if(a&&this.canProvideWithTextEditor(a)){const d={editor:a},l=(0,r.jA)(a);if(l){let e=(0,s.UH)(a.saveViewState());i.add(l.onDidChangeCursorPosition((()=>{e=(0,s.UH)(a.saveViewState())}))),d.restoreViewState=()=>{e&&a===this.activeTextEditorControl&&a.restoreViewState(e)},i.add((0,o.O)(t.onCancellationRequested)((()=>{var e;return null===(e=d.restoreViewState)||void 0===e?void 0:e.call(d)})))}i.add((0,n.s)((()=>this.clearDecorations(a)))),i.add(this.provideWithTextEditor(d,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus()}getModel(e){var t;return(0,r.Np)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations((e=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,l.Yf)(d.vp),position:a.A5.Full}}}],[n,s]=e.deltaDecorations(i,o);this.rangeHighlightDecorationId={rangeHighlightId:n,overviewRulerDecorationId:s}}))}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}},78395:function(e,t,i){i.d(t,{o:function(){return a}});var o=i(10998),n=i(66638),s=i(86653),r=i(3765);class a extends s.o{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=(0,r.kg)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,o.jG.None}provideWithTextEditor(e,t,i){const s=e.editor,r=new o.Cm;r.add(t.onDidAccept((i=>{const[o]=t.selectedItems;if(o){if(!this.isValidLineNumber(s,o.lineNumber))return;this.gotoLocation(e,{range:this.toRange(o.lineNumber,o.column),keyMods:t.keyMods,preserveFocus:i.inBackground}),i.inBackground||t.hide()}})));const d=()=>{const e=this.parsePosition(s,t.value.trim().substr(a.PREFIX.length)),i=this.getPickLabel(s,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,!this.isValidLineNumber(s,e.lineNumber))return void this.clearDecorations(s);const o=this.toRange(e.lineNumber,e.column);s.revealRangeInCenter(o,0),this.addDecorations(s,o)};d(),r.add(t.onDidChangeValue((()=>d())));const l=(0,n.jA)(s);if(l){2===l.getOptions().get(62).renderType&&(l.updateOptions({lineNumbers:"on"}),r.add((0,o.s)((()=>l.updateOptions({lineNumbers:"relative"})))))}return r}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))),o=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:o+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,r.kg)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,r.kg)("gotoLineLabel","Go to line {0}.",t);const o=e.getPosition()||{lineNumber:1,column:1},n=this.lineCount(e);return n>1?(0,r.kg)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",o.lineNumber,o.column,n):(0,r.kg)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",o.lineNumber,o.column)}isValidLineNumber(e,t){return!(!t||"number"!=typeof t)&&(t>0&&t<=this.lineCount(e))}isValidColumn(e,t,i){if(!i||"number"!=typeof i)return!1;const o=this.getModel(e);if(!o)return!1;const n={lineNumber:t,column:i};return o.validatePosition(n).equals(n)}lineCount(e){var t,i;return null!==(i=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==i?i:0}}a.PREFIX=":"},6021:function(e,t,i){i.d(t,{O:function(){return b}});var o=i(65958),n=i(78903),s=i(26048),r=i(73410),a=i(10998),d=i(16844),l=i(28061),c=i(47317),u=i(14583),h=i(86653),g=i(3765),p=i(52230),m=i(13338),f=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,o){t(i,o,e)}},v=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function a(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((o=o.apply(e,t||[])).next())}))};let b=class e extends h.o{constructor(e,t,i=Object.create(null)){super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,g.kg)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),a.jG.None}provideWithTextEditor(e,t,i){const o=e.editor,n=this.getModel(o);return n?this._languageFeaturesService.documentSymbolProvider.has(n)?this.doProvideWithEditorSymbols(e,n,t,i):this.doProvideWithoutEditorSymbols(e,n,t,i):a.jG.None}doProvideWithoutEditorSymbols(e,t,i,o){const n=new a.Cm;return this.provideLabelPick(i,(0,g.kg)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(()=>{v(this,void 0,void 0,(function*(){(yield this.waitForLanguageSymbolRegistry(t,n))&&!o.isCancellationRequested&&n.add(this.doProvideWithEditorSymbols(e,t,i,o))}))})(),n}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}waitForLanguageSymbolRegistry(e,t){return v(this,void 0,void 0,(function*(){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new o.Zv,n=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(n.dispose(),i.complete(!0))})));return t.add((0,a.s)((()=>i.complete(!1)))),i.p}))}doProvideWithEditorSymbols(t,i,o,s){var d;const c=t.editor,u=new a.Cm;u.add(o.onDidAccept((e=>{const[i]=o.selectedItems;i&&i.range&&(this.gotoLocation(t,{range:i.range.selection,keyMods:o.keyMods,preserveFocus:e.inBackground}),e.inBackground||o.hide())}))),u.add(o.onDidTriggerItemButton((({item:e})=>{e&&e.range&&(this.gotoLocation(t,{range:e.range.selection,keyMods:o.keyMods,forceSideBySide:!0}),o.hide())})));const h=this.getDocumentSymbols(i,s);let p;const f=t=>v(this,void 0,void 0,(function*(){null==p||p.dispose(!0),o.busy=!1,p=new n.Q(s),o.busy=!0;try{const i=(0,r.Ib)(o.value.substr(e.PREFIX.length).trim()),n=yield this.doGetSymbolPicks(h,i,void 0,p.token);if(s.isCancellationRequested)return;if(n.length>0){if(o.items=n,t&&0===i.original.length){const e=(0,m.Uk)(n,(e=>Boolean("separator"!==e.type&&e.range&&l.Q.containsPosition(e.range.decoration,t))));e&&(o.activeItems=[e])}}else i.original.length>0?this.provideLabelPick(o,(0,g.kg)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(o,(0,g.kg)("noSymbolResults","No editor symbols"))}finally{s.isCancellationRequested||(o.busy=!1)}}));u.add(o.onDidChangeValue((()=>f(void 0)))),f(null===(d=c.getSelection())||void 0===d?void 0:d.getPosition());let _=2;return u.add(o.onDidChangeActive((()=>{const[e]=o.activeItems;if(e&&e.range){if(_-- >0)return;c.revealRangeInCenter(e.range.selection,0),this.addDecorations(c,e.range.decoration)}}))),u}doGetSymbolPicks(t,i,o,n){return v(this,void 0,void 0,(function*(){const a=yield t;if(n.isCancellationRequested)return[];const u=0===i.original.indexOf(e.SCOPE_PREFIX),h=u?1:0;let p,m;i.values&&i.values.length>1?(p=(0,r.AH)(i.values[0]),m=(0,r.AH)(i.values.slice(1))):p=i;const f=[];for(let b=0;b<a.length;b++){const y=a[b],S=(0,d.Bq)(y.name),w=`$(${c.gP.toIcon(y.kind).id}) ${S}`,M=w.length-S.length;let R,x,E,I,L=y.containerName;if((null==o?void 0:o.extraContainerLabel)&&(L=L?`${o.extraContainerLabel} • ${L}`:o.extraContainerLabel),i.original.length>h){let N=!1;if(p!==i&&([R,x]=(0,r.nw)(w,Object.assign(Object.assign({},i),{values:void 0}),h,M),"number"==typeof R&&(N=!0)),"number"!=typeof R&&([R,x]=(0,r.nw)(w,p,h,M),"number"!=typeof R))continue;if(!N&&m){if(L&&m.original.length>0&&([E,I]=(0,r.nw)(L,m)),"number"!=typeof E)continue;"number"==typeof R&&(R+=E)}}const F=y.tags&&y.tags.indexOf(1)>=0;f.push({index:b,kind:y.kind,score:R,label:w,ariaLabel:S,description:L,highlights:F?void 0:{label:x,description:I},range:{selection:l.Q.collapseToStart(y.selectionRange),decoration:y.range},strikethrough:F,buttons:(()=>{var e,t;const i=(null===(e=this.options)||void 0===e?void 0:e.openSideBySideDirection)?null===(t=this.options)||void 0===t?void 0:t.openSideBySideDirection():void 0;if(i)return[{iconClass:"right"===i?s.W6.splitHorizontal.classNames:s.W6.splitVertical.classNames,tooltip:"right"===i?(0,g.kg)("openToSide","Open to the Side"):(0,g.kg)("openToBottom","Open to the Bottom")}]})()})}const _=f.sort(((e,t)=>u?this.compareByKindAndScore(e,t):this.compareByScore(e,t)));let v=[];if(u){let T,P,O=0;function D(){P&&"number"==typeof T&&O>0&&(P.label=(0,d.GP)(k[T]||C,O))}for(const A of _)T!==A.kind?(D(),T=A.kind,O=1,P={type:"separator"},v.push(P)):O++,v.push(A);D()}else _.length>0&&(v=[{label:(0,g.kg)("symbols","symbols ({0})",f.length),type:"separator"},..._]);return v}))}compareByScore(e,t){if("number"!=typeof e.score&&"number"==typeof t.score)return 1;if("number"==typeof e.score&&"number"!=typeof t.score)return-1;if("number"==typeof e.score&&"number"==typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=k[e.kind]||C,o=k[t.kind]||C,n=i.localeCompare(o);return 0===n?this.compareByScore(e,t):n}getDocumentSymbols(e,t){return v(this,void 0,void 0,(function*(){const i=yield this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}))}};b.PREFIX="@",b.SCOPE_PREFIX=":",b.PREFIX_BY_CATEGORY=`${b.PREFIX}${b.SCOPE_PREFIX}`,b=f([_(0,p.u),_(1,u.gW)],b);const C=(0,g.kg)("property","properties ({0})"),k={5:(0,g.kg)("method","methods ({0})"),11:(0,g.kg)("function","functions ({0})"),8:(0,g.kg)("_constructor","constructors ({0})"),12:(0,g.kg)("variable","variables ({0})"),4:(0,g.kg)("class","classes ({0})"),22:(0,g.kg)("struct","structs ({0})"),23:(0,g.kg)("event","events ({0})"),24:(0,g.kg)("operator","operators ({0})"),10:(0,g.kg)("interface","interfaces ({0})"),2:(0,g.kg)("namespace","namespaces ({0})"),3:(0,g.kg)("package","packages ({0})"),25:(0,g.kg)("typeParameter","type parameters ({0})"),1:(0,g.kg)("modules","modules ({0})"),6:(0,g.kg)("property","properties ({0})"),9:(0,g.kg)("enum","enumerations ({0})"),21:(0,g.kg)("enumMember","enumeration members ({0})"),14:(0,g.kg)("string","strings ({0})"),0:(0,g.kg)("file","files ({0})"),17:(0,g.kg)("array","arrays ({0})"),15:(0,g.kg)("number","numbers ({0})"),16:(0,g.kg)("boolean","booleans ({0})"),18:(0,g.kg)("object","objects ({0})"),19:(0,g.kg)("key","keys ({0})"),7:(0,g.kg)("field","fields ({0})"),13:(0,g.kg)("constant","constants ({0})")}},36651:function(e,t,i){i.r(t),i.d(t,{ReadOnlyMessageController:function(){return a}});var o=i(10998),n=i(50946),s=i(77064),r=i(3765);class a extends o.jG{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit())))}_onDidAttemptReadOnlyEdit(){const e=s.k.get(this.editor);e&&this.editor.hasModel()&&(this.editor.isSimpleWidget?e.showMessage(r.kg("editor.simple.readonly","Cannot edit in read-only input"),this.editor.getPosition()):e.showMessage(r.kg("editor.readonly","Cannot edit in read-only editor"),this.editor.getPosition()))}}a.ID="editor.contrib.readOnlyMessageController",(0,n.HW)(a.ID,a)},16017:function(e,t,i){i.r(t),i.d(t,{RenameAction:function(){return V},rename:function(){return B}});var o=i(59407),n=i(65958),s=i(78903),r=i(94327),a=i(10998),d=i(79359),l=i(37264),c=i(62105),u=i(50946),h=i(98769),g=i(87301),p=i(15365),m=i(28061),f=i(38122),_=i(41504),v=i(77064),b=i(3765),C=i(27142),k=i(96655),y=i(82399),S=i(46441),w=i(29879),M=i(44023),R=i(67167),x=i(56071),E=i(4874),I=i(89044),L=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},F=function(e,t){return function(i,o){t(i,o,e)}};const N=new k.N1("renameInputVisible",!1,(0,b.kg)("renameInputVisible","Whether the rename input widget is visible"));let T=class{constructor(e,t,i,o,n){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=o,this._disposables=new a.Cm,this.allowEditorOverflow=!0,this._visibleContextKey=N.bindTo(n),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(46)&&this._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,b.kg)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var e,t;const[i,o]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=(0,b.kg)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(o))||void 0===t?void 0:t.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,i,o,n;if(!this._input||!this._domNode)return;const s=e.getColor(E.f9l);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(E.CgL))&&void 0!==t?t:""),this._domNode.style.boxShadow=s?` 0 0 8px 2px ${s}`:"",this._domNode.style.color=String(null!==(i=e.getColor(E.cws))&&void 0!==i?i:""),this._input.style.backgroundColor=String(null!==(o=e.getColor(E.L4c))&&void 0!==o?o:"");const r=e.getColor(E.Zgs);this._input.style.borderWidth=r?"1px":"0px",this._input.style.borderStyle=r?"solid":"none",this._input.style.borderColor=null!==(n=null==r?void 0:r.toString())&&void 0!==n?n:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(46);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=.8*e.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}cancelInput(e){var t;null===(t=this._currentCancelInput)||void 0===t||t.call(this,e)}getInput(e,t,i,o,n,s){this._domNode.classList.toggle("preview",n),this._position=new p.y(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",o.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);const r=new a.Cm;return new Promise((e=>{this._currentCancelInput=t=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e(t),!0),this._currentAcceptInput=i=>{0!==this._input.value.trim().length&&this._input.value!==t?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e({newName:this._input.value,wantsPreview:n&&i})):this.cancelInput(!0)},r.add(s.onCancellationRequested((()=>this.cancelInput(!0)))),r.add(this._editor.onDidBlurEditorWidget((()=>this.cancelInput(!1)))),this._show()})).finally((()=>{r.dispose(),this._hide()}))}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))}),100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};T=L([F(2,I.Gy),F(3,x.b),F(4,k.fN)],T);var P=i(52230),O=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},D=function(e,t){return function(i,o){t(i,o,e)}},A=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{d(o.next(e))}catch(e){s(e)}}function a(e){try{d(o.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((o=o.apply(e,t||[])).next())}))};class H{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return A(this,void 0,void 0,(function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const o=yield i.resolveRenameLocation(this.model,this.position,e);if(o){if(!o.rejectReason)return o;t.push(o.rejectReason)}}const i=this.model.getWordAtPosition(this.position);return i?{range:new m.Q(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:m.Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}))}provideRenameEdits(e,t){return A(this,void 0,void 0,(function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}))}_provideRenameEdits(e,t,i,o){return A(this,void 0,void 0,(function*(){const n=this._providers[t];if(!n)return{edits:[],rejectReason:i.join("\n")};const s=yield n.provideRenameEdits(this.model,this.position,e,o);return s?s.rejectReason?this._provideRenameEdits(e,t+1,i.concat(s.rejectReason),o):s:this._provideRenameEdits(e,t+1,i.concat(b.kg("no result","No result.")),o)}))}}function B(e,t,i,o){return A(this,void 0,void 0,(function*(){const n=new H(t,i,e),r=yield n.resolveRenameLocation(s.X.None);return(null==r?void 0:r.rejectReason)?{edits:[],rejectReason:r.rejectReason}:n.provideRenameEdits(o,s.X.None)}))}let W=class e{constructor(e,t,i,o,r,d,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=o,this._progressService=r,this._logService=d,this._configService=l,this._languageFeaturesService=c,this._disposableStore=new a.Cm,this._cts=new s.Q,this._renameInputField=this._disposableStore.add(new n.kb((()=>this._disposableStore.add(this._instaService.createInstance(T,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"])))))}static get(t){return t.getContribution(e.ID)}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return A(this,void 0,void 0,(function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const i=this.editor.getPosition(),s=new H(this.editor.getModel(),i,this._languageFeaturesService.renameProvider);if(!s.hasProvider())return;let r;this._cts=new c.gI(this.editor,5);try{const e=s.resolveRenameLocation(this._cts.token);this._progressService.showWhile(e,250),r=yield e}catch(t){return void(null===(e=v.k.get(this.editor))||void 0===e||e.showMessage(t||b.kg("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),i))}if(!r)return;if(r.rejectReason)return void(null===(t=v.k.get(this.editor))||void 0===t||t.showMessage(r.rejectReason,i));if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new c.gI(this.editor,5,r.range);const a=this.editor.getSelection();let d=0,l=r.text.length;m.Q.isEmpty(a)||m.Q.spansMultipleLines(a)||!m.Q.containsRange(r.range,a)||(d=Math.max(0,a.startColumn-r.range.startColumn),l=Math.min(r.range.endColumn,a.endColumn)-r.range.startColumn);const u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),g=yield this._renameInputField.value.getInput(r.range,r.text,d,l,u,this._cts.token);if("boolean"==typeof g)return void(g&&this.editor.focus());this.editor.focus();const p=(0,n.PK)(s.provideRenameEdits(g.newName,this._cts.token),this._cts.token).then((e=>A(this,void 0,void 0,(function*(){e&&this.editor.hasModel()&&(e.rejectReason?this._notificationService.info(e.rejectReason):(this.editor.setSelection(m.Q.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(h.jN.convert(e),{editor:this.editor,showPreview:g.wantsPreview,label:b.kg("label","Renaming '{0}' to '{1}'",null==r?void 0:r.text,g.newName),code:"undoredo.rename",quotableLabel:b.kg("quotableLabel","Renaming {0} to {1}",null==r?void 0:r.text,g.newName),respectAutoSaveConfig:!0}).then((e=>{e.ariaSummary&&(0,o.xE)(b.kg("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",r.text,g.newName,e.ariaSummary))})).catch((e=>{this._notificationService.error(b.kg("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)}))))}))),(e=>{this._notificationService.error(b.kg("rename.failed","Rename failed to compute edits")),this._logService.error(e)}));return this._progressService.showWhile(p,250),p}))}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};W.ID="editor.contrib.renameController",W=O([D(1,y._Y),D(2,w.Ot),D(3,h.nu),D(4,M.N8),D(5,S.rr),D(6,_.U),D(7,P.u)],W);class V extends u.ks{constructor(){super({id:"editor.action.rename",label:b.kg("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:k.M$.and(f.R.writable,f.R.hasRenameProvider),kbOpts:{kbExpr:f.R.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(g.T),[o,n]=Array.isArray(t)&&t||[void 0,void 0];return l.r.isUri(o)&&p.y.isIPosition(n)?i.openCodeEditor({resource:o},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(n),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),r.dz):super.runCommand(e,t)}run(e,t){const i=W.get(t);return i?i.run():Promise.resolve()}}(0,u.HW)(W.ID,W),(0,u.Fl)(V);const j=u.DX.bindToContribution(W.get);(0,u.E_)(new j({id:"acceptRenameInput",precondition:N,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:f.R.focus,primary:3}})),(0,u.E_)(new j({id:"acceptRenameInputWithPreview",precondition:k.M$.and(N,k.M$.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:f.R.focus,primary:1027}})),(0,u.E_)(new j({id:"cancelRenameInput",precondition:N,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:f.R.focus,primary:9,secondary:[1033]}})),(0,u.ke)("_executeDocumentRenameProvider",(function(e,t,i,...o){const[n]=o;(0,d.j)("string"==typeof n);const{renameProvider:s}=e.get(P.u);return B(s,t,i,n)})),(0,u.ke)("_executePrepareRename",(function(e,t,i){return A(this,void 0,void 0,(function*(){const{renameProvider:o}=e.get(P.u),n=new H(t,i,o),r=yield n.resolveRenameLocation(s.X.None);if(null==r?void 0:r.rejectReason)throw new Error(r.rejectReason);return r}))})),R.O.as(C.Fd.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:b.kg("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})}}]);
