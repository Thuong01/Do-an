!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a00d78b9-4712-423c-8d9d-70e4503f7a4b",e._sentryDebugIdIdentifier="sentry-dbid-a00d78b9-4712-423c-8d9d-70e4503f7a4b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[9596],{91934:function(e,t,i){i.d(t,{n:function(){return a}});var n=i(85525),s=i(15365),o=i(28061),r=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))};class a{provideSelectionRanges(e,t){return r(this,void 0,void 0,(function*(){const i=[];for(const n of t){const t=[];i.push(t);const s=new Map;yield new Promise((t=>a._bracketsRightYield(t,0,e,n,s))),yield new Promise((i=>a._bracketsLeftYield(i,0,e,n,s,t)))}return i}))}static _bracketsRightYield(e,t,i,s,o){const r=new Map,c=Date.now();for(;;){if(t>=a._maxRounds){e();break}if(!s){e();break}const h=i.bracketPairs.findNextBracket(s);if(!h){e();break}if(Date.now()-c>a._maxDuration){setTimeout((()=>a._bracketsRightYield(e,t+1,i,s,o)));break}if(h.bracketInfo.isOpeningBracket){const e=h.bracketInfo.bracketText,t=r.has(e)?r.get(e):0;r.set(e,t+1)}else{const e=h.bracketInfo.getClosedBrackets()[0].bracketText;let t=r.has(e)?r.get(e):0;if(t-=1,r.set(e,Math.max(0,t)),t<0){let t=o.get(e);t||(t=new n.w,o.set(e,t)),t.push(h.range)}}s=h.range.getEndPosition()}}static _bracketsLeftYield(e,t,i,n,s,r){const c=new Map,h=Date.now();for(;;){if(t>=a._maxRounds&&0===s.size){e();break}if(!n){e();break}const l=i.bracketPairs.findPrevBracket(n);if(!l){e();break}if(Date.now()-h>a._maxDuration){setTimeout((()=>a._bracketsLeftYield(e,t+1,i,n,s,r)));break}if(l.bracketInfo.isOpeningBracket){const e=l.bracketInfo.bracketText;let t=c.has(e)?c.get(e):0;if(t-=1,c.set(e,Math.max(0,t)),t<0){const t=s.get(e);if(t){const n=t.shift();0===t.size&&s.delete(e);const c=o.Q.fromPositions(l.range.getEndPosition(),n.getStartPosition()),h=o.Q.fromPositions(l.range.getStartPosition(),n.getEndPosition());r.push({range:c}),r.push({range:h}),a._addBracketLeading(i,h,r)}}}else{const e=l.bracketInfo.getClosedBrackets()[0].bracketText,t=c.has(e)?c.get(e):0;c.set(e,t+1)}n=l.range.getStartPosition()}}static _addBracketLeading(e,t,i){if(t.startLineNumber===t.endLineNumber)return;const n=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(n);0!==r&&r!==t.startColumn&&(i.push({range:o.Q.fromPositions(new s.y(n,r),t.getEndPosition())}),i.push({range:o.Q.fromPositions(new s.y(n,1),t.getEndPosition())}));const a=n-1;if(a>0){const n=e.getLineFirstNonWhitespaceColumn(a);n===t.startColumn&&n!==e.getLineLastNonWhitespaceColumn(a)&&(i.push({range:o.Q.fromPositions(new s.y(a,n),t.getEndPosition())}),i.push({range:o.Q.fromPositions(new s.y(a,1),t.getEndPosition())}))}}}a._maxDuration=30,a._maxRounds=2},33432:function(e,t,i){i.r(t),i.d(t,{provideSelectionRanges:function(){return x}});var n=i(13338),s=i(78903),o=i(94327),r=i(50946),a=i(15365),c=i(28061),h=i(93702),l=i(38122),p=i(91934),d=i(16844);class u{provideSelectionRanges(e,t){const i=[];for(const n of t){const t=[];i.push(t),this._addInWordRanges(t,e,n),this._addWordRanges(t,e,n),this._addWhitespaceLine(t,e,n),t.push({range:e.getFullModelRange()})}return i}_addInWordRanges(e,t,i){const n=t.getWordAtPosition(i);if(!n)return;const{word:s,startColumn:o}=n,r=i.column-o;let a=r,h=r,l=0;for(;a>=0;a--){const e=s.charCodeAt(a);if(a!==r&&(95===e||45===e))break;if((0,d.Lv)(e)&&(0,d.Wv)(l))break;l=e}for(a+=1;h<s.length;h++){const e=s.charCodeAt(h);if((0,d.Wv)(e)&&(0,d.Lv)(l))break;if(95===e||45===e)break;l=e}a<h&&e.push({range:new c.Q(i.lineNumber,o+a,i.lineNumber,o+h)})}_addWordRanges(e,t,i){const n=t.getWordAtPosition(i);n&&e.push({range:new c.Q(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}_addWhitespaceLine(e,t,i){t.getLineLength(i.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(i.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(i.lineNumber)&&e.push({range:new c.Q(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}var _=i(3765),g=i(58067),f=i(59715),m=i(52230),v=i(37042),b=i(79359),S=i(37264),C=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},k=function(e,t){return function(i,n){t(i,n,e)}},N=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))};class T{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const i=new T(t,this.ranges);return i.ranges[t].equalsRange(this.ranges[this.index])?i.mov(e):i}}let E=class e{constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}static get(t){return t.getContribution(e.ID)}dispose(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}run(e){return N(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),i=this._editor.getModel();if(this._state||(yield x(this._languageFeaturesService.selectionRangeProvider,i,t.map((e=>e.getPosition())),this._editor.getOption(104),s.X.None).then((e=>{var i;if(n.EI(e)&&e.length===t.length&&this._editor.hasModel()&&n.aI(this._editor.getSelections(),t,((e,t)=>e.equalsSelection(t)))){for(let i=0;i<e.length;i++)e[i]=e[i].filter((e=>e.containsPosition(t[i].getStartPosition())&&e.containsPosition(t[i].getEndPosition()))),e[i].unshift(t[i]);this._state=e.map((e=>new T(0,e))),null===(i=this._selectionListener)||void 0===i||i.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition((()=>{var e;this._ignoreSelection||(null===(e=this._selectionListener)||void 0===e||e.dispose(),this._state=void 0)}))}}))),!this._state)return;this._state=this._state.map((t=>t.mov(e)));const o=this._state.map((e=>h.L.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())));this._ignoreSelection=!0;try{this._editor.setSelections(o)}finally{this._ignoreSelection=!1}}))}};E.ID="editor.contrib.smartSelectController",E=C([k(1,m.u)],E);class R extends r.ks{constructor(e,t){super(t),this._forward=e}run(e,t){return N(this,void 0,void 0,(function*(){const e=E.get(t);e&&(yield e.run(this._forward))}))}}f.wb.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");function x(e,t,i,s,r){return N(this,void 0,void 0,(function*(){const h=e.all(t).concat(new u);1===h.length&&h.unshift(new p.n);const l=[],d=[];for(const e of h)l.push(Promise.resolve(e.provideSelectionRanges(t,i,r)).then((e=>{if(n.EI(e)&&e.length===i.length)for(let t=0;t<i.length;t++){d[t]||(d[t]=[]);for(const n of e[t])c.Q.isIRange(n.range)&&c.Q.containsPosition(n.range,i[t])&&d[t].push(c.Q.lift(n.range))}}),o.M_));return yield Promise.all(l),d.map((e=>{if(0===e.length)return[];e.sort(((e,t)=>a.y.isBefore(e.getStartPosition(),t.getStartPosition())?1:a.y.isBefore(t.getStartPosition(),e.getStartPosition())||a.y.isBefore(e.getEndPosition(),t.getEndPosition())?-1:a.y.isBefore(t.getEndPosition(),e.getEndPosition())?1:0));const i=[];let n;for(const t of e)(!n||c.Q.containsRange(t,n)&&!c.Q.equalsRange(t,n))&&(i.push(t),n=t);if(!s.selectLeadingAndTrailingWhitespace)return i;const o=[i[0]];for(let e=1;e<i.length;e++){const n=i[e-1],s=i[e];if(s.startLineNumber!==n.startLineNumber||s.endLineNumber!==n.endLineNumber){const e=new c.Q(n.startLineNumber,t.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,t.getLineLastNonWhitespaceColumn(n.endLineNumber));e.containsRange(n)&&!e.equalsRange(n)&&s.containsRange(e)&&!s.equalsRange(e)&&o.push(e);const i=new c.Q(n.startLineNumber,1,n.endLineNumber,t.getLineMaxColumn(n.endLineNumber));i.containsRange(n)&&!i.equalsRange(e)&&s.containsRange(i)&&!s.equalsRange(i)&&o.push(i)}o.push(s)}return o}))}))}(0,r.HW)(E.ID,E),(0,r.Fl)(class extends R{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:_.kg("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:l.R.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:g.D8.MenubarSelectionMenu,group:"1_basic",title:_.kg({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}),(0,r.Fl)(class extends R{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:_.kg("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:l.R.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:g.D8.MenubarSelectionMenu,group:"1_basic",title:_.kg({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}),f.wb.registerCommand("_executeSelectionRangeProvider",(function(e,...t){return N(this,void 0,void 0,(function*(){const[i,n]=t;(0,b.j)(S.r.isUri(i));const o=e.get(m.u).selectionRangeProvider,r=yield e.get(v.b).createModelReference(i);try{return x(o,r.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0},s.X.None)}finally{r.dispose()}}))}))},50960:function(e,t,i){i.r(t),i.d(t,{SnippetController2:function(){return b},performSnippetEdit:function(){return C}});var n=i(10998),s=i(79359),o=i(50946),r=i(15365),a=i(93702),c=i(38122),h=i(52394),l=i(52230),p=i(93516),d=i(3765),u=i(96655),_=i(46441),g=i(83030),f=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,n){t(i,n,e)}};const v={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let b=class e{constructor(t,i,s,o,r){this._editor=t,this._logService=i,this._languageFeaturesService=s,this._languageConfigurationService=r,this._snippetListener=new n.Cm,this._modelVersionId=-1,this._inSnippet=e.InSnippetMode.bindTo(o),this._hasNextTabstop=e.HasNextTabstop.bindTo(o),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(o)}static get(t){return t.getContribution(e.ID)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}apply(e,t){try{this._doInsert(e,void 0===t?v:Object.assign(Object.assign({},v),t))}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_edits=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}insert(e,t){try{this._doInsert(e,void 0===t?v:Object.assign(Object.assign({},v),t))}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var i;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&"string"!=typeof e&&this.cancel(),this._session?((0,s.j)("string"==typeof e),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new g.O(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),null===(i=this._session)||void 0===i?void 0:i.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:(e,t)=>{if(!this._session||e!==this._editor.getModel()||!r.y.equals(this._editor.getPosition(),t))return;const{activeChoice:i}=this._session;if(!i||0===i.choice.options.length)return;const n=e.getValueInRange(i.range),s=Boolean(i.choice.options.find((e=>e.value===n))),o=[];for(let e=0;e<i.choice.options.length;e++){const t=i.choice.options[e];o.push({kind:13,label:t.value,insertText:t.value,sortText:"a".repeat(e+1),range:i.range,filterText:s?`${n}_${t.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,d.kg)("next","Go to next placeholder...")}})}return{suggestions:o}}};const e=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme},this._choiceCompletionItemProvider);this._snippetListener.add(e)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((e=>e.isFlush&&this.cancel()))),this._snippetListener.add(this._editor.onDidChangeModel((()=>this.cancel()))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((()=>this._updateState())))}}_updateState(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel())return void(this._currentChoice=void 0);const{activeChoice:e}=this._session;e&&this._choiceCompletionItemProvider?this._currentChoice!==e.choice&&(this._currentChoice=e.choice,queueMicrotask((()=>{(0,p.p3)(this._editor,this._choiceCompletionItemProvider)}))):this._currentChoice=void 0}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,null===(t=this._session)||void 0===t||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session&&this._session.prev(),this._updateState()}next(){this._session&&this._session.next(),this._updateState()}isInSnippet(){return Boolean(this._inSnippet.get())}};b.ID="snippetController2",b.InSnippetMode=new u.N1("inSnippetMode",!1,(0,d.kg)("inSnippetMode","Whether the editor in current in snippet mode")),b.HasNextTabstop=new u.N1("hasNextTabstop",!1,(0,d.kg)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),b.HasPrevTabstop=new u.N1("hasPrevTabstop",!1,(0,d.kg)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),b=f([m(1,_.rr),m(2,l.u),m(3,u.fN),m(4,h.JZ)],b),(0,o.HW)(b.ID,b);const S=o.DX.bindToContribution(b.get);function C(e,t,i){const n=b.get(e);return!!n&&(e.focus(),n.apply(i.map((e=>({range:a.L.liftSelection(e),template:t})))),n.isInSnippet())}(0,o.E_)(new S({id:"jumpToNextSnippetPlaceholder",precondition:u.M$.and(b.InSnippetMode,b.HasNextTabstop),handler:e=>e.next(),kbOpts:{weight:130,kbExpr:c.R.editorTextFocus,primary:2}})),(0,o.E_)(new S({id:"jumpToPrevSnippetPlaceholder",precondition:u.M$.and(b.InSnippetMode,b.HasPrevTabstop),handler:e=>e.prev(),kbOpts:{weight:130,kbExpr:c.R.editorTextFocus,primary:1026}})),(0,o.E_)(new S({id:"leaveSnippet",precondition:b.InSnippetMode,handler:e=>e.cancel(!0),kbOpts:{weight:130,kbExpr:c.R.editorTextFocus,primary:9,secondary:[1033]}})),(0,o.E_)(new S({id:"acceptSnippet",precondition:b.InSnippetMode,handler:e=>e.finish()}))},47039:function(e,t,i){i.d(t,{EY:function(){return o},GR:function(){return c},Or:function(){return a},fr:function(){return _},mQ:function(){return u}});class n{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t,i=0,s=this.value.charCodeAt(e);if(t=n._table[s],"number"==typeof t)return this.pos+=1,{type:t,pos:e,len:1};if(n.isDigitCharacter(s)){t=8;do{i+=1,s=this.value.charCodeAt(e+i)}while(n.isDigitCharacter(s));return this.pos+=i,{type:t,pos:e,len:i}}if(n.isVariableCharacter(s)){t=9;do{s=this.value.charCodeAt(e+ ++i)}while(n.isVariableCharacter(s)||n.isDigitCharacter(s));return this.pos+=i,{type:t,pos:e,len:i}}t=10;do{i+=1,s=this.value.charCodeAt(e+i)}while(!isNaN(s)&&void 0===n._table[s]&&!n.isDigitCharacter(s)&&!n.isVariableCharacter(s));return this.pos+=i,{type:t,pos:e,len:i}}}n._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};class s{constructor(){this._children=[]}appendChild(e){return e instanceof o&&this._children[this._children.length-1]instanceof o?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:i}=e,n=i.children.indexOf(e),s=i.children.slice(0);s.splice(n,1,...t),i._children=s,function e(t,i){for(const n of t)n.parent=i,e(n.children,n)}(t,i)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof u)return e;e=e.parent}}toString(){return this.children.reduce(((e,t)=>e+t.toString()),"")}len(){return 0}}class o extends s{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new o(this.value)}}class r extends s{}class a extends r{constructor(e){super(),this.index=e}static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}get isFinalTabstop(){return 0===this.index}get choice(){return 1===this._children.length&&this._children[0]instanceof c?this._children[0]:void 0}clone(){const e=new a(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}}class c extends s{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof o&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new c;return this.options.forEach(e.appendChild,e),e}}class h extends s{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let i=!1,n=e.replace(this.regexp,(function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!i&&this._children.some((e=>e instanceof l&&Boolean(e.elseValue)))&&(n=this._replace([])),n}_replace(e){let t="";for(const i of this._children)if(i instanceof l){let n=e[i.index]||"";n=i.resolve(n),t+=n}else t+=i.toString();return t}toString(){return""}clone(){const e=new h;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((e=>e.clone())),e}}class l extends s{constructor(e,t,i,n){super(),this.index=e,this.shorthandName=t,this.ifValue=i,this.elseValue=n}resolve(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"==typeof this.ifValue?this.ifValue:Boolean(e)||"string"!=typeof this.elseValue?e||"":this.elseValue}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((e=>e.charAt(0).toUpperCase()+e.substr(1))).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(((e,t)=>0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1))).join(""):e}clone(){return new l(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class p extends r{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new o(t)],!0)}clone(){const e=new p(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((e=>e.clone())),e}}function d(e,t){const i=[...e];for(;i.length>0;){const e=i.shift();if(!t(e))break;i.unshift(...e.children)}}class u extends s{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk((function(i){return i instanceof a&&(e.push(i),t=!t||t.index<i.index?i:t),!0})),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,i=!1;return this.walk((n=>n===e?(i=!0,!1):(t+=n.len(),!0))),i?t:-1}fullLen(e){let t=0;return d([e],(e=>(t+=e.len(),!0))),t}enclosingPlaceholders(e){const t=[];let{parent:i}=e;for(;i;)i instanceof a&&t.push(i),i=i.parent;return t}resolveVariables(e){return this.walk((t=>(t instanceof p&&t.resolve(e)&&(this._placeholders=void 0),!0))),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new u;return this._children=this.children.map((e=>e.clone())),e}walk(e){d(this.children,e)}}class _{constructor(){this._scanner=new n,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,i){const n=new u;return this.parseFragment(e,n),this.ensureFinalTabstop(n,null!=i&&i,null!=t&&t),n}parseFragment(e,t){const i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const n=new Map,s=[];t.walk((e=>(e instanceof a&&(e.isFinalTabstop?n.set(0,void 0):!n.has(e.index)&&e.children.length>0?n.set(e.index,e.children):s.push(e)),!0)));for(const e of s){const i=n.get(e.index);if(i){const n=new a(e.index);n.transform=e.transform;for(const e of i)n.appendChild(e.clone());t.replace(e,[n])}}return t.children.slice(i)}ensureFinalTabstop(e,t,i){if(t||i&&e.placeholders.length>0){e.placeholders.find((e=>0===e.index))||e.appendChild(new a(0))}}_accept(e,t){if(void 0===e||this._token.type===e){const e=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),e}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){const e=this._scanner.next();if(0!==e.type&&4!==e.type&&5!==e.type)return!1}this._token=this._scanner.next()}const i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new o(t)),!0)}_parseTabstopOrVariableName(e){let t;const i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new a(Number(t)):new p(t)),!0):this._backTo(i)}_parseComplexPlaceholder(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);const n=new a(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new o("${"+t+":")),n.children.forEach(e.appendChild,e),!0}else{if(!(n.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(i);{const t=new c;for(;;){if(this._parseChoiceElement(t)){if(this._accept(2))continue;if(this._accept(7)&&(n.appendChild(t),this._accept(4)))return e.appendChild(n),!0}return this._backTo(i),!1}}}}_parseChoiceElement(e){const t=this._token,i=[];for(;2!==this._token.type&&7!==this._token.type;){let e;if(e=(e=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||e:this._accept(void 0,!0),!e)return this._backTo(t),!1;i.push(e)}return 0===i.length?(this._backTo(t),!1):(e.appendChild(new o(i.join(""))),!0)}_parseComplexVariable(e){let t;const i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);const n=new p(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(i);for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new o("${"+t+":")),n.children.forEach(e.appendChild,e),!0}}_parseTransform(e){const t=new h;let i="",n="";for(;!this._accept(6);){let e;if(e=this._accept(5,!0))e=this._accept(6,!0)||e,i+=e;else{if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}}for(;!this._accept(6);){let e;if(e=this._accept(5,!0))e=this._accept(5,!0)||this._accept(6,!0)||e,t.appendChild(new o(e));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}try{t.regexp=new RegExp(i,n)}catch(e){return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let i=!1;this._accept(3)&&(i=!0);const n=this._accept(8,!0);if(!n)return this._backTo(t),!1;if(!i)return e.appendChild(new l(Number(n))),!0;if(this._accept(4))return e.appendChild(new l(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){const i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new l(Number(n),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){const t=this._until(4);if(t)return e.appendChild(new l(Number(n),void 0,t,void 0)),!0}else if(this._accept(12)){const t=this._until(4);if(t)return e.appendChild(new l(Number(n),void 0,void 0,t)),!0}else if(this._accept(13)){const t=this._until(1);if(t){const i=this._until(4);if(i)return e.appendChild(new l(Number(n),void 0,t,i)),!0}}else{const t=this._until(4);if(t)return e.appendChild(new l(Number(n),void 0,void 0,t)),!0}return this._backTo(t),!1}_parseAnything(e){return 14!==this._token.type&&(e.appendChild(new o(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}},83030:function(e,t,i){i.d(t,{O:function(){return I}});var n=i(13338),s=i(10998),o=i(16844),r=i(23877),a=i(28061),c=i(93702),h=i(52394),l=i(20491),p=i(8377),d=i(26851),u=i(47039),_=i(83775),g=i(18019),f=i(22467),m=i(9223),v=i(3765),b=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,n){t(i,n,e)}};Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class C{constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const i=t.resolve(e);if(void 0!==i)return i}}}class k{constructor(e,t,i,n){this._model=e,this._selection=t,this._selectionIdx=i,this._overtypingCapturer=n}resolve(e){const{name:t}=e;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){let t=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!t&&this._overtypingCapturer){const e=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);e&&(t=e.value,i=e.multiline)}if(t&&i&&e.snippet){const i=this._model.getLineContent(this._selection.startLineNumber),n=(0,o.UU)(i,0,this._selection.startColumn-1);let s=n;e.snippet.walk((t=>t!==e&&(t instanceof u.EY&&(s=(0,o.UU)((0,o.uz)(t.value).pop())),!0)));const r=(0,o.Qp)(s,n);t=t.replace(/(\r\n|\r|\n)(.*)/g,((e,t,i)=>`${t}${s.substr(r)}${i}`))}return t}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){const e=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return e&&e.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):"CURSOR_INDEX"===t?String(this._selectionIdx):"CURSOR_NUMBER"===t?String(this._selectionIdx+1):void 0}}class N{constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if("TM_FILENAME"===t)return g.P8(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){const e=g.P8(this._model.uri.fsPath),t=e.lastIndexOf(".");return t<=0?e:e.slice(0,t)}return"TM_DIRECTORY"===t?"."===g.pD(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,f.pD)(this._model.uri)):"TM_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}class T{constructor(e,t,i,n){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=i,this._spread=n}resolve(e){if("CLIPBOARD"!==e.name)return;const t=this._readClipboardText();if(t){if(this._spread){const e=t.split(/\r\n|\n|\r/).filter((e=>!(0,o.AV)(e)));if(e.length===this._selectionCount)return e[this._selectionIdx]}return t}}}let E=class{constructor(e,t,i){this._model=e,this._selection=t,this._languageConfigurationService=i}resolve(e){const{name:t}=e,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(n)return"LINE_COMMENT"===t?n.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?n.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&n.blockCommentEndToken||void 0}};E=b([S(2,h.JZ)],E);class R{constructor(){this._date=new Date}resolve(e){const{name:t}=e;return"CURRENT_YEAR"===t?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===t?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===t?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===t?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===t?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===t?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===t?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===t?R.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===t?R.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===t?R.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===t?R.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===t?String(Math.floor(this._date.getTime()/1e3)):void 0}}R.dayNames=[v.kg("Sunday","Sunday"),v.kg("Monday","Monday"),v.kg("Tuesday","Tuesday"),v.kg("Wednesday","Wednesday"),v.kg("Thursday","Thursday"),v.kg("Friday","Friday"),v.kg("Saturday","Saturday")],R.dayNamesShort=[v.kg("SundayShort","Sun"),v.kg("MondayShort","Mon"),v.kg("TuesdayShort","Tue"),v.kg("WednesdayShort","Wed"),v.kg("ThursdayShort","Thu"),v.kg("FridayShort","Fri"),v.kg("SaturdayShort","Sat")],R.monthNames=[v.kg("January","January"),v.kg("February","February"),v.kg("March","March"),v.kg("April","April"),v.kg("May","May"),v.kg("June","June"),v.kg("July","July"),v.kg("August","August"),v.kg("September","September"),v.kg("October","October"),v.kg("November","November"),v.kg("December","December")],R.monthNamesShort=[v.kg("JanuaryShort","Jan"),v.kg("FebruaryShort","Feb"),v.kg("MarchShort","Mar"),v.kg("AprilShort","Apr"),v.kg("MayShort","May"),v.kg("JuneShort","Jun"),v.kg("JulyShort","Jul"),v.kg("AugustShort","Aug"),v.kg("SeptemberShort","Sep"),v.kg("OctoberShort","Oct"),v.kg("NovemberShort","Nov"),v.kg("DecemberShort","Dec")];class x{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=(0,d.Q_)(this._workspaceService.getWorkspace());return t?"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0:void 0}_resolveWorkspaceName(e){if((0,d.jB)(e))return g.P8(e.uri.path);let t=g.P8(e.configPath.path);return t.endsWith(d.kF)&&(t=t.substr(0,t.length-d.kF.length-1)),t}_resoveWorkspacePath(e){if((0,d.jB)(e))return(0,_.o)(e.uri.fsPath);const t=g.P8(e.configPath.path);let i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?(0,_.o)(i):"/"}}class w{resolve(e){const{name:t}=e;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?(0,m.b)():void 0}}var P=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,n){t(i,n,e)}};class M{constructor(e,t,i){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=i,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,n.$z)(t.placeholders,u.Or.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(-1===this._offset)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations((t=>{for(const i of this._snippet.placeholders){const n=this._snippet.offset(i),s=this._snippet.fullLen(i),o=a.Q.fromPositions(e.getPositionAt(this._offset+n),e.getPositionAt(this._offset+n+s)),r=i.isFinalTabstop?M._decor.inactiveFinal:M._decor.inactive,c=t.addDecoration(o,r);this._placeholderDecorations.set(i,c)}}))}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const e=[];for(const t of this._placeholderGroups[this._placeholderGroupsIdx])if(t.transform){const i=this._placeholderDecorations.get(t),n=this._editor.getModel().getDecorationRange(i),s=this._editor.getModel().getValueInRange(n),o=t.transform.resolve(s).split(/\r\n|\r|\n/);for(let e=1;e<o.length;e++)o[e]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+o[e]);e.push(r.k.replace(n,o.join(this._editor.getModel().getEOL())))}e.length>0&&this._editor.executeEdits("snippet.placeholderTransform",e)}let t=!1;!0===e&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):!1===e&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const i=this._editor.getModel().changeDecorations((e=>{const i=new Set,n=[];for(const s of this._placeholderGroups[this._placeholderGroupsIdx]){const o=this._placeholderDecorations.get(s),r=this._editor.getModel().getDecorationRange(o);n.push(new c.L(r.startLineNumber,r.startColumn,r.endLineNumber,r.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(s),e.changeDecorationOptions(o,s.isFinalTabstop?M._decor.activeFinal:M._decor.active),i.add(s);for(const t of this._snippet.enclosingPlaceholders(s)){const n=this._placeholderDecorations.get(t);e.changeDecorationOptions(n,t.isFinalTabstop?M._decor.activeFinal:M._decor.active),i.add(t)}}for(const[t,n]of this._placeholderDecorations)i.has(t)||e.changeDecorationOptions(n,t.isFinalTabstop?M._decor.inactiveFinal:M._decor.inactive);return n}));return t?this.move(e):null!=i?i:[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof u.Or){const e=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(e).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){return 0===this._snippet.placeholders.length||1===this._snippet.placeholders.length&&this._snippet.placeholders[0].isFinalTabstop}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let i;for(const n of t){if(n.isFinalTabstop)break;i||(i=[],e.set(n.index,i));const t=this._placeholderDecorations.get(n),s=this._editor.getModel().getDecorationRange(t);if(!s){e.delete(n.index);break}i.push(s)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(null==e?void 0:e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const i=this._editor.getModel().getDecorationRange(t);return i?{range:i,choice:e.choice}:void 0}get hasChoice(){let e=!1;return this._snippet.walk((t=>(e=t instanceof u.GR,!e))),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((i=>{for(const n of this._placeholderGroups[this._placeholderGroupsIdx]){const s=e.shift();console.assert(-1!==s._offset),console.assert(!s._placeholderDecorations);const o=s._snippet.placeholderInfo.last.index;for(const e of s._snippet.placeholderInfo.all)e.isFinalTabstop?e.index=n.index+(o+1)/this._nestingLevel:e.index=n.index+e.index/this._nestingLevel;this._snippet.replace(n,s._snippet.children);const r=this._placeholderDecorations.get(n);i.removeDecoration(r),this._placeholderDecorations.delete(n);for(const e of s._snippet.placeholders){const n=s._snippet.offset(e),o=s._snippet.fullLen(e),r=a.Q.fromPositions(t.getPositionAt(s._offset+n),t.getPositionAt(s._offset+n+o)),c=i.addDecoration(r,M._decor.inactive);this._placeholderDecorations.set(e,c)}}this._placeholderGroups=(0,n.$z)(this._snippet.placeholders,u.Or.compareByIndex)}))}}M._decor={active:l.kI.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:l.kI.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:l.kI.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:l.kI.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};const L={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let I=class e{constructor(e,t,i=L,n){this._editor=e,this._template=t,this._options=i,this._languageConfigurationService=n,this._templateMerges=[],this._snippets=[]}static adjustWhitespace(e,t,i,n,s){const r=e.getLineContent(t.lineNumber),a=(0,o.UU)(r,0,t.column-1);let c;return i.walk((t=>{if(!(t instanceof u.EY)||t.parent instanceof u.GR)return!0;const s=t.value.split(/\r\n|\r|\n/);if(n){const n=i.offset(t);if(0===n)s[0]=e.normalizeIndentation(s[0]);else{c=null!=c?c:i.toString();const t=c.charCodeAt(n-1);10!==t&&13!==t||(s[0]=e.normalizeIndentation(a+s[0]))}for(let t=1;t<s.length;t++)s[t]=e.normalizeIndentation(a+s[t])}const o=s.join(e.getEOL());return o!==t.value&&(t.parent.replace(t,[new u.EY(o)]),c=void 0),!0})),a}static adjustSelection(e,t,i,n){if(0!==i||0!==n){const{positionLineNumber:s,positionColumn:o}=t,r=o-i,a=o+n,h=e.validateRange({startLineNumber:s,startColumn:r,endLineNumber:s,endColumn:a});t=c.L.createWithDirection(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(t,i,n,s,o,c,h,l,_){const g=[],f=[];if(!t.hasModel())return{edits:g,snippets:f};const m=t.getModel(),v=t.invokeWithinContext((e=>e.get(d.VR))),b=t.invokeWithinContext((e=>new N(e.get(p.L),m))),S=()=>h,P=m.getValueInRange(e.adjustSelection(m,t.getSelection(),n,0)),y=m.getValueInRange(e.adjustSelection(m,t.getSelection(),0,s)),L=m.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),I=t.getSelections().map(((e,t)=>({selection:e,idx:t}))).sort(((e,t)=>a.Q.compareRangesUsingStarts(e.selection,t.selection)));for(const{selection:a,idx:h}of I){let p=e.adjustSelection(m,a,n,0),d=e.adjustSelection(m,a,0,s);P!==m.getValueInRange(p)&&(p=a),y!==m.getValueInRange(d)&&(d=a);const N=a.setStartPosition(p.startLineNumber,p.startColumn).setEndPosition(d.endLineNumber,d.endColumn),D=(new u.fr).parse(i,!0,o),O=N.getStartPosition(),A=e.adjustWhitespace(m,O,D,c||h>0&&L!==m.getLineFirstNonWhitespaceColumn(a.positionLineNumber),!0);D.resolveVariables(new C([b,new T(S,h,I.length,"spread"===t.getOption(73)),new k(m,a,h,l),new E(m,a,_),new R,new x(v),new w])),g[h]=r.k.replace(N,D.toString()),g[h].identifier={major:h,minor:0},g[h]._isTracked=!0,f[h]=new M(t,D,A)}return{edits:g,snippets:f}}static createEditsAndSnippetsFromEdits(e,t,i,n,s,o,c){if(!e.hasModel()||0===t.length)return{edits:[],snippets:[]};const h=[],l=e.getModel(),_=new u.fr,g=new u.mQ,f=new C([e.invokeWithinContext((e=>new N(e.get(p.L),l))),new T((()=>s),0,e.getSelections().length,"spread"===e.getOption(73)),new k(l,e.getSelection(),0,o),new E(l,e.getSelection(),c),new R,new x(e.invokeWithinContext((e=>e.get(d.VR)))),new w]);t=t.sort(((e,t)=>a.Q.compareRangesUsingStarts(e.range,t.range)));let m=0;for(let e=0;e<t.length;e++){const{range:i,template:n}=t[e];if(e>0){const n=t[e-1].range,s=a.Q.fromPositions(n.getEndPosition(),i.getStartPosition()),o=new u.EY(l.getValueInRange(s));g.appendChild(o),m+=o.value.length}_.parseFragment(n,g),g.resolveVariables(f);const s=g.toString(),o=s.slice(m);m=s.length;const c=r.k.replace(i,o);c.identifier={major:e,minor:0},c._isTracked=!0,h.push(c)}return _.ensureFinalTabstop(g,i,!0),{edits:h,snippets:[new M(e,g,"")]}}dispose(){(0,s.AS)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:t,snippets:i}="string"==typeof this._template?e.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):e.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=i,this._editor.executeEdits("snippet",t,(e=>{const t=e.filter((e=>!!e.identifier));for(let e=0;e<i.length;e++)i[e].initialize(t[e].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):t.map((e=>c.L.fromPositions(e.range.getEndPosition())))})),this._editor.revealRange(this._editor.getSelections()[0])}merge(t,i=L){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);const{edits:n,snippets:s}=e.createEditsAndSnippetsFromSelections(this._editor,t,i.overwriteBefore,i.overwriteAfter,!0,i.adjustWhitespace,i.clipboardText,i.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,(e=>{const t=e.filter((e=>!!e.identifier));for(let e=0;e<s.length;e++)s[e].initialize(t[e].textChange);const i=s[0].isTrivialSnippet;if(!i){for(const e of this._snippets)e.merge(s);console.assert(0===s.length)}return this._snippets[0].hasPlaceholder&&!i?this._move(void 0):t.map((e=>c.L.fromPositions(e.range.getEndPosition())))}))}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const i of this._snippets){const n=i.move(e);t.push(...n)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const i of this._snippets){const n=i.computePossibleSelections();if(0===t.size)for(const[i,s]of n){s.sort(a.Q.compareRangesUsingStarts);for(const n of e)if(s[0].containsRange(n)){t.set(i,[]);break}}if(0===t.size)return!1;t.forEach(((e,t)=>{e.push(...n.get(t))}))}e.sort(a.Q.compareRangesUsingStarts);for(const[i,n]of t)if(n.length===e.length){n.sort(a.Q.compareRangesUsingStarts);for(let s=0;s<n.length;s++)n[s].containsRange(e[s])||t.delete(i)}else t.delete(i);return t.size>0}};I=P([y(3,h.JZ)],I)}}]);
