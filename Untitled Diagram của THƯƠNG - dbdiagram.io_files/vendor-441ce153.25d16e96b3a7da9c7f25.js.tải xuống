!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="75482b20-f344-49d3-8d9e-d36066c9e87d",e._sentryDebugIdIdentifier="sentry-dbid-75482b20-f344-49d3-8d9e-d36066c9e87d")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[8196],{62214:function(e,t,n){Object.defineProperty(t,"B7",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"iX",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"xv",{enumerable:!0,get:function(){return c.VERSION}}),Object.defineProperty(t,"Tk",{enumerable:!0,get:function(){return u.default}});var r=l(n(82109)),o=l(n(24783)),i=n(92700),u=l(n(39802)),a=l(n(5717)),c=n(27276);function l(e){return e&&e.__esModule?e:{default:e}}},8974:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_GROUP=t.TABLE=t.REF=t.NOTE=t.ENUM=t.DEFAULT_SCHEMA_NAME=void 0;t.DEFAULT_SCHEMA_NAME="public";t.TABLE="table";t.NOTE="note";t.ENUM="enum";t.REF="ref";t.TABLE_GROUP="table_group"},14405:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var a=i?Object.getOwnPropertyDescriptor(e,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=e[u]}o.default=e,n&&n.set(e,o);return o}(n(2543)),i=b(n(9183)),u=b(n(22999)),a=b(n(56353)),c=b(n(35607)),l=b(n(83306)),f=b(n(24939)),s=b(n(37178)),p=n(8974),d=b(n(22261)),h=b(n(15313));function b(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(b,e);var t,n,r,s=g(b);function b(e){var t,n=e.schemas,r=void 0===n?[]:n,i=e.tables,a=void 0===i?[]:i,c=e.notes,l=void 0===c?[]:c,f=e.enums,h=void 0===f?[]:f,y=e.refs,m=void 0===y?[]:y,O=e.tableGroups,j=void 0===O?[]:O,w=e.project,P=void 0===w?{}:w,g=e.aliases,S=void 0===g?[]:g,k=e.records,E=void 0===k?[]:k,_=e.tablePartials,x=void 0===_?[]:_;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=s.call(this)).dbState=new d.default,t.generateId(),t.hasDefaultSchema=!1,t.schemas=[],t.notes=[],t.note=P.note?(0,o.get)(P,"note.value",P.note):null,t.noteToken=P.note?(0,o.get)(P,"note.token",P.noteToken):null,t.databaseType=P.database_type,t.name=P.name,t.token=P.token,t.aliases=S,t.records=[],t.tablePartials=[],t.injectedRawRefs=[],t.processNotes(l),t.processRecords(E),t.processTablePartials(x),t.processSchemas(r),t.processSchemaElements(h,p.ENUM),t.processSchemaElements(a,p.TABLE),t.processSchemaElements(l,p.NOTE),t.processSchemaElements(m,p.REF),t.processSchemaElements(j,p.TABLE_GROUP),t.injectedRawRefs.forEach((function(e){var n=t.findOrCreateSchema(p.DEFAULT_SCHEMA_NAME),r=new u.default(v(v({},e),{},{schema:n}));n.refs.some((function(e){return e.equals(r)}))||n.pushRef(r)})),t}return t=b,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("dbId")}},{key:"processNotes",value:function(e){var t=this;e.forEach((function(e){t.pushNote(new f.default(v(v({},e),{},{database:t})))}))}},{key:"processRecords",value:function(e){var t=this;e.forEach((function(e){var n=e.schemaName,r=e.tableName,o=e.columns,i=e.values;t.records.push({id:t.dbState.generateId("recordId"),schemaName:n,tableName:r,columns:o,values:i})}))}},{key:"processTablePartials",value:function(e){var t=this;e.forEach((function(e){t.tablePartials.push(new h.default(v(v({},e),{},{dbState:t.dbState})))}))}},{key:"pushNote",value:function(e){this.checkNote(e),this.notes.push(e)}},{key:"checkNote",value:function(e){this.notes.some((function(t){return t.name===e.name}))&&e.error("Notes ".concat(e.name," existed"))}},{key:"processSchemas",value:function(e){var t=this;e.forEach((function(e){t.pushSchema(new i.default(v(v({},e),{},{database:t})))}))}},{key:"pushSchema",value:function(e){this.checkSchema(e),this.schemas.push(e)}},{key:"checkSchema",value:function(e){this.schemas.some((function(t){return t.name===e.name}))&&e.error("Schemas ".concat(e.name," existed"))}},{key:"processSchemaElements",value:function(e,t){var n,r=this;e.forEach((function(e){switch(e.schemaName?(n=r.findOrCreateSchema(e.schemaName),e.schemaName,p.DEFAULT_SCHEMA_NAME):n=r.findOrCreateSchema(p.DEFAULT_SCHEMA_NAME),t){case p.TABLE:n.pushTable(new l.default(v(v({},e),{},{schema:n})));break;case p.ENUM:n.pushEnum(new a.default(v(v({},e),{},{schema:n})));break;case p.TABLE_GROUP:n.pushTableGroup(new c.default(v(v({},e),{},{schema:n})));break;case p.REF:n.pushRef(new u.default(v(v({},e),{},{schema:n})))}}))}},{key:"findOrCreateSchema",value:function(e){var t=this.schemas.find((function(t){return t.name===e||t.alias===e}));return t||(t=new i.default({name:e,note:{value:e===p.DEFAULT_SCHEMA_NAME?"Default ".concat(o.default.capitalize(p.DEFAULT_SCHEMA_NAME)," Schema"):null},database:this}),this.pushSchema(t)),t}},{key:"findTableAlias",value:function(e){var t=this.aliases.find((function(t){return t.name===e}));if(!t||"table"!==t.kind)return null;var n=t.value.schemaName||p.DEFAULT_SCHEMA_NAME,r=this.schemas.find((function(e){return e.name===n}));if(!r)return null;var o=t.value.tableName;return r.tables.find((function(e){return e.name===o}))}},{key:"findTable",value:function(e,t){var n=null;if(!e&&(n=this.findTableAlias(t)))return n;var r=this.findOrCreateSchema(e||p.DEFAULT_SCHEMA_NAME);return r||this.error("Schema ".concat(e||p.DEFAULT_SCHEMA_NAME," don't exist")),r.findTable(t)}},{key:"findEnum",value:function(e,t){var n=this.schemas.find((function(t){return t.name===e||t.alias===e}));return n?n.enums.find((function(e){return e.name===t})):null}},{key:"findTablePartial",value:function(e){return this.tablePartials.find((function(t){return t.name===e}))}},{key:"export",value:function(){return v({},this.exportChild())}},{key:"shallowExport",value:function(){return{hasDefaultSchema:this.hasDefaultSchema,note:this.note,databaseType:this.databaseType,name:this.name}}},{key:"exportChild",value:function(){return{schemas:this.schemas.map((function(e){return e.export()})),notes:this.notes.map((function(e){return e.export()})),records:this.records.map((function(e){return v({},e)}))}}},{key:"exportChildIds",value:function(){return{schemaIds:this.schemas.map((function(e){return e.id})),noteIds:this.notes.map((function(e){return e.id}))}}},{key:"normalize",value:function(){var e={database:O({},this.id,v(v({id:this.id},this.shallowExport()),this.exportChildIds())),schemas:{},notes:{},refs:{},enums:{},tableGroups:{},tables:{},endpoints:{},enumValues:{},indexes:{},indexColumns:{},fields:{},records:{},tablePartials:{}};return this.schemas.forEach((function(t){return t.normalize(e)})),this.notes.forEach((function(t){return t.normalize(e)})),this.records.forEach((function(t){e.records[t.id]=v({},t)})),this.tablePartials.forEach((function(t){return t.normalize(e)})),e}}])&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),b}(s.default);t.default=k},22261:function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,u=void 0,u=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===n(u)?u:String(u)),o)}var i,u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dbId=1,this.schemaId=1,this.enumId=1,this.tableGroupId=1,this.refId=1,this.tableId=1,this.noteId=1,this.enumValueId=1,this.endpointId=1,this.indexId=1,this.fieldId=1,this.indexColumnId=1,this.recordId=1,this.tablePartialId=1}var t,n,o;return t=e,(n=[{key:"generateId",value:function(e){var t=this[e];return this[e]+=1,t}}])&&r(t.prototype,n),o&&r(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=o},37178:function(e,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,u=void 0,u=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===n(u)?u:String(u)),o)}var i,u}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){var t=l();return function(){var r,o=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return c(e,arguments,s(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)},a(e)}function c(e,t,n){return c=l()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&f(o,n.prototype),o},c.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(n,e);var t=u(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{start:{line:1,column:1}};return i(this,n),(r=t.call(this,e)).location=o,r.error="error",r}return o(n)}(a(Error)),d=function(){function e(t){i(this,e),this.token=t}return o(e,[{key:"bind",value:function(e){this.selection=e}},{key:"error",value:function(e){throw new p(e,this.token)}}]),e}();t.default=d},53877:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=(o=n(37178))&&o.__esModule?o:{default:o},u=n(8974),a=n(3511);function c(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(i,e);var t,n,r,o=y(i);function i(e){var t,n=e.tableName,r=e.schemaName,c=e.fieldNames,l=e.relation,f=e.token,s=e.ref;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,f)).relation=l,t.schemaName=r,t.tableName=n,t.fieldNames=c,t.fields=[],t.ref=s,t.dbState=t.ref.dbState,t.generateId();var p=s.schema.database.findOrCreateSchema(r||u.DEFAULT_SCHEMA_NAME).database.findTable(r,n);return p||t.error("Can't find table ".concat((0,a.shouldPrintSchemaName)(r)?'"'.concat(r,'".'):"",'"').concat(n,'"')),t.setFields(c,p),t}return t=i,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("endpointId")}},{key:"equals",value:function(e){return this.fields.length===e.fields.length&&this.compareFields(e)}},{key:"compareFields",value:function(e){for(var t=this.fields.map((function(e){return e.id})).sort(),n=e.fields.map((function(e){return e.id})).sort(),r=0;r<t.length;r+=1)if(t[r]!==n[r])return!1;return!0}},{key:"export",value:function(){return s({},this.shallowExport())}},{key:"exportParentIds",value:function(){return{refId:this.ref.id,fieldIds:this.fields.map((function(e){return e.id}))}}},{key:"shallowExport",value:function(){return{schemaName:this.schemaName,tableName:this.tableName,fieldNames:this.fieldNames,relation:this.relation}}},{key:"setFields",value:function(e,t){var n=this,r=e&&e.length?c(e):[];if(!r.length){var o=t.fields.find((function(e){return e.pk}));if(o)r.push(o.name);else{var i=t.indexes.find((function(e){return e.pk}));i?r=i.columns.map((function(e){return e.value})):this.error("Can't find primary or composite key in table ".concat((0,a.shouldPrintSchema)(t.schema)?'"'.concat(t.schema.name,'".'):"",'"').concat(t.name,'"'))}}r.forEach((function(e){var r=t.findField(e);r||n.error("Can't find field ".concat((0,a.shouldPrintSchema)(t.schema)?'"'.concat(t.schema.name,'".'):"",'"').concat(e,'" in table "').concat(t.name,'"')),n.fields.push(r),r.pushEndpoint(n)}))}},{key:"normalize",value:function(e){e.endpoints[this.id]=s(s({id:this.id},this.shallowExport()),this.exportParentIds())}}])&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(i.default);t.default=v},56353:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(2543),i=c(n(37178)),u=c(n(73564)),a=n(3511);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(c,e);var t,n,r,i=b(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.token,u=t.values,a=t.note,l=t.schema,f=t.noteToken,s=void 0===f?null:f;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),e=i.call(this,r),n||e.error("Enum must have a name"),e.name=n,e.note=a?(0,o.get)(a,"value",a):null,e.noteToken=a?(0,o.get)(a,"token",s):null,e.values=[],e.fields=[],e.schema=l,e.dbState=e.schema.dbState,e.generateId(),e.processValues(u),e}return t=c,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("enumId")}},{key:"processValues",value:function(e){var t=this;e.forEach((function(e){t.pushValue(new u.default(f(f({},e),{},{_enum:t})))}))}},{key:"pushValue",value:function(e){this.checkValue(e),this.values.push(e)}},{key:"checkValue",value:function(e){this.values.some((function(t){return t.name===e.name}))&&e.error('Enum value "'.concat(e.name,'" existed in enum ').concat((0,a.shouldPrintSchema)(this.schema)?'"'.concat(this.schema.name,'".'):"",'"').concat(this.name,'"'))}},{key:"pushField",value:function(e){this.checkField(e),this.fields.push(e)}},{key:"checkField",value:function(e){this.fields.some((function(t){return t.id===e.id}))&&this.error("Field ".concat((0,a.shouldPrintSchema)(e.table.schema)?'"'.concat(e.table.schema.name,'".'):"",'"').concat(e.table.name,'"."').concat(e.name,'" already associated with enum ').concat((0,a.shouldPrintSchema)(this.schema)?'"'.concat(this.schema.name,'".'):"").concat(this.name,'"'))}},{key:"export",value:function(){return f(f({},this.shallowExport()),this.exportChild())}},{key:"exportChild",value:function(){return{values:this.values.map((function(e){return e.export()}))}}},{key:"exportChildIds",value:function(){return{valueIds:this.values.map((function(e){return e.id})),fieldIds:this.fields.map((function(e){return e.id}))}}},{key:"exportParentIds",value:function(){return{schemaId:this.schema.id}}},{key:"shallowExport",value:function(){return{name:this.name,note:this.note}}},{key:"normalize",value:function(e){e.enums[this.id]=f(f(f({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds()),this.values.forEach((function(t){return t.normalize(e)}))}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(i.default),v=m;t.default=v},73564:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(2543);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=p(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.token,a=t.note,c=t._enum,l=t.noteToken,f=void 0===l?null:l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),e=o.call(this,r),n||e.error("Enum value must have a name"),e.name=n,e.note=a?(0,i.get)(a,"value",a):null,e.noteToken=a?(0,i.get)(a,"token",f):null,e._enum=c,e.dbState=e._enum.dbState,e.generateId(),e}return t=u,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("enumValueId")}},{key:"export",value:function(){return a({},this.shallowExport())}},{key:"exportParentIds",value:function(){return{enumId:this._enum.id}}},{key:"shallowExport",value:function(){return{name:this.name,note:this.note}}},{key:"normalize",value:function(e){e.enumValues[this.id]=a(a({id:this.id},this.shallowExport()),this.exportParentIds())}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(((o=n(37178))&&o.__esModule?o:{default:o}).default),b=h;t.default=b},6450:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(2543),u=(o=n(37178))&&o.__esModule?o:{default:o},a=n(8974);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o=h(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.type,a=t.unique,c=t.pk,l=t.token,f=t.not_null,s=t.note,p=t.dbdefault,d=t.increment,h=t.table,b=void 0===h?{}:h,y=t.noteToken,m=void 0===y?null:y,v=t.injectedPartial,O=void 0===v?null:v,j=t.injectedToken,w=void 0===j?null:j;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),e=o.call(this,l),n||e.error("Field must have a name"),r||e.error("Field must have a type"),e.name=n,e.type=r,e.unique=a,e.pk=c,e.not_null=f,e.note=s?(0,i.get)(s,"value",s):null,e.noteToken=s?(0,i.get)(s,"token",m):null,e.dbdefault=p,e.increment=d,e.endpoints=[],e.table=b,e.injectedPartial=O,e.injectedToken=w,e.dbState=e.table.dbState,e.generateId(),e.bindType(),e}return t=u,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("fieldId")}},{key:"bindType",value:function(){var e=this.type.type_name,t=this.type.schemaName||a.DEFAULT_SCHEMA_NAME;if(this.type.schemaName){var n=this.table.schema.database.findEnum(t,e);if(!n)return void(this.type.type_name="".concat(t,".").concat(e));this._enum=n,n.pushField(this)}else{var r=this.table.schema.database.findEnum(t,e);if(!r)return;this._enum=r,r.pushField(this)}}},{key:"pushEndpoint",value:function(e){this.endpoints.push(e)}},{key:"export",value:function(){return l({},this.shallowExport())}},{key:"exportParentIds",value:function(){return{tableId:this.table.id,enumId:this._enum?this._enum.id:null}}},{key:"exportChildIds",value:function(){return{endpointIds:this.endpoints.map((function(e){return e.id}))}}},{key:"shallowExport",value:function(){var e;return{name:this.name,type:this.type,unique:this.unique,pk:this.pk,not_null:this.not_null,note:this.note,dbdefault:this.dbdefault,increment:this.increment,injectedPartialId:null===(e=this.injectedPartial)||void 0===e?void 0:e.id}}},{key:"normalize",value:function(e){e.fields[this.id]=l(l(l({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds())}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(u.default),m=y;t.default=m},17116:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(i,e);var t,n,r,o=s(i);function i(e){var t,n=e.type,r=e.value,u=e.index,a=e.token;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this)).type=n,t.value=r,t.index=u,t.token=a,t.dbState=t.index.dbState,t.generateId(),t}return t=i,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("indexColumnId")}},{key:"export",value:function(){return u({},this.shallowExport())}},{key:"exportParentIds",value:function(){return{indexId:this.index.id}}},{key:"shallowExport",value:function(){return{type:this.type,value:this.value}}},{key:"normalize",value:function(e){e.indexColumns[this.id]=u(u({id:this.id},this.shallowExport()),this.exportParentIds())}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(((o=n(37178))&&o.__esModule?o:{default:o}).default);t.default=d},36522:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n(37178)),i=u(n(17116));function u(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(u,e);var t,n,r,o=d(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.columns,r=t.type,i=t.unique,a=t.pk,c=t.token,l=t.name,f=t.note,s=t.table,p=void 0===s?{}:s,d=t.injectedPartial,h=void 0===d?null:d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this,c)).name=l,e.type=r,e.unique=i,e.note=f?f.value:null,e.noteToken=f?f.token:null,e.pk=a,e.columns=[],e.table=p,e.injectedPartial=h,e.dbState=e.table.dbState,e.generateId(),e.processIndexColumns(n),e}return t=u,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("indexId")}},{key:"processIndexColumns",value:function(e){var t=this;e.forEach((function(e){t.pushIndexColumn(new i.default(c(c({},e),{},{index:t})))}))}},{key:"pushIndexColumn",value:function(e){this.checkIndexColumn(e),this.columns.push(e)}},{key:"checkIndexColumn",value:function(e){this.columns.some((function(t){return t.type===e.type&&t.value===e.value}))&&e.error("Index column ".concat(e.value," existed"))}},{key:"export",value:function(){return c(c({},this.shallowExport()),this.exportChild())}},{key:"exportChild",value:function(){return{columns:this.columns.map((function(e){return e.export()}))}}},{key:"exportChildIds",value:function(){return{columnIds:this.columns.map((function(e){return e.id}))}}},{key:"exportParentIds",value:function(){return{tableId:this.table.id}}},{key:"shallowExport",value:function(){var e;return{name:this.name,type:this.type,unique:this.unique,pk:this.pk,note:this.note,injectedPartialId:null===(e=this.injectedPartial)||void 0===e?void 0:e.id}}},{key:"normalize",value:function(e){e.indexes[this.id]=c(c(c({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds()),this.columns.forEach((function(t){return t.normalize(e)}))}}])&&f(t.prototype,n),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(o.default),y=b;t.default=y},22999:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(37178)),i=a(n(53877)),u=n(8974);function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function y(e,t){return e[0].equals(t[0])&&e[1].equals(t[1])}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,r,o=h(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.color,i=t.endpoints,u=t.onDelete,c=t.onUpdate,l=t.token,f=t.schema,s=void 0===f?{}:f,p=t.injectedPartial,d=void 0===p?null:p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,l)).name=n,e.color=r,e.onDelete=u,e.onUpdate=c,e.endpoints=[],e.schema=s,e.injectedPartial=d,e.dbState=e.schema.dbState,e.generateId(),e.processEndpoints(i),e}return t=a,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("refId")}},{key:"processEndpoints",value:function(e){var t=this;e.forEach((function(e){t.endpoints.push(new i.default(l(l({},e),{},{ref:t}))),e.schemaName,u.DEFAULT_SCHEMA_NAME})),this.endpoints[0].equals(this.endpoints[1])&&this.error("Two endpoints are the same"),this.endpoints[0].fields.length!==this.endpoints[1].fields.length&&this.error("Two endpoints have unequal number of fields")}},{key:"equals",value:function(e){return y(this.endpoints,e.endpoints)||y(this.endpoints,e.endpoints.slice().reverse())}},{key:"export",value:function(){return l(l({},this.shallowExport()),this.exportChild())}},{key:"shallowExport",value:function(){var e;return{name:this.name,color:this.color,onDelete:this.onDelete,onUpdate:this.onUpdate,injectedPartialId:null===(e=this.injectedPartial)||void 0===e?void 0:e.id}}},{key:"exportChild",value:function(){return{endpoints:this.endpoints.map((function(e){return e.export()}))}}},{key:"exportChildIds",value:function(){return{endpointIds:this.endpoints.map((function(e){return e.id}))}}},{key:"exportParentIds",value:function(){return{schemaId:this.schema.id}}},{key:"normalize",value:function(e){e.refs[this.id]=l(l(l({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds()),this.endpoints.forEach((function(t){return t.normalize(e)}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(o.default),v=m;t.default=v},9183:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(2543),i=s(n(83306)),u=s(n(37178)),a=s(n(56353)),c=n(3511),l=s(n(35607)),f=s(n(22999));function s(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(s,e);var t,n,r,u=v(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.alias,i=t.note,a=t.tables,c=void 0===a?[]:a,l=t.refs,f=void 0===l?[]:l,p=t.enums,d=void 0===p?[]:p,h=t.tableGroups,b=void 0===h?[]:h,y=t.token,m=t.database,v=void 0===m?{}:m,O=t.noteToken,j=void 0===O?null:O;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=u.call(this,y)).tables=[],e.enums=[],e.tableGroups=[],e.refs=[],e.name=n,e.note=i?(0,o.get)(i,"value",i):null,e.noteToken=i?(0,o.get)(i,"token",j):null,e.alias=r,e.database=v,e.dbState=e.database.dbState,e.generateId(),e.processEnums(d),e.processTables(c),e.processRefs(f),e.processTableGroups(b),e}return t=s,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("schemaId")}},{key:"processTables",value:function(e){var t=this;e.forEach((function(e){t.pushTable(new i.default(d(d({},e),{},{schema:t})))}))}},{key:"pushTable",value:function(e){this.checkTable(e),this.tables.push(e)}},{key:"checkTable",value:function(e){this.tables.some((function(t){return t.name===e.name}))&&e.error("Table ".concat((0,c.shouldPrintSchema)(this)?'"'.concat(this.name,'".'):"",'"').concat(e.name,'" existed'))}},{key:"findTable",value:function(e){return this.tables.find((function(t){return t.name===e}))}},{key:"processEnums",value:function(e){var t=this;e.forEach((function(e){t.pushEnum(new a.default(d(d({},e),{},{schema:t})))}))}},{key:"pushEnum",value:function(e){this.checkEnum(e),this.enums.push(e)}},{key:"checkEnum",value:function(e){this.enums.some((function(t){return t.name===e.name}))&&e.error("Enum ".concat((0,c.shouldPrintSchema)(this)?'"'.concat(this.name,'".'):"",'"').concat(e.name,'" existed'))}},{key:"processRefs",value:function(e){var t=this;e.forEach((function(e){t.pushRef(new f.default(d(d({},e),{},{schema:t})))}))}},{key:"pushRef",value:function(e){this.checkRef(e),this.refs.push(e)}},{key:"checkRef",value:function(e){if(this.refs.some((function(t){return t.equals(e)}))){var t=e.endpoints[0],n=t.fieldNames.map(JSON.stringify).join(", "),r=e.endpoints[1],o=r.fieldNames.map(JSON.stringify).join(", "),i='"'.concat(t.schemaName?"".concat(t.schemaName,'"."'):"").concat(t.tableName,'"(').concat(n,")"),u='"'.concat(r.schemaName?"".concat(r.schemaName,'"."'):"").concat(r.tableName,'"(').concat(o,")");e.error("Reference with the same endpoints already exists: ".concat(i," references ").concat(u))}}},{key:"processTableGroups",value:function(e){var t=this;e.forEach((function(e){t.pushTableGroup(new l.default(d(d({},e),{},{schema:t})))}))}},{key:"pushTableGroup",value:function(e){this.checkTableGroup(e),this.tableGroups.push(e)}},{key:"checkTableGroup",value:function(e){this.tableGroups.some((function(t){return t.name===e.name}))&&e.error("Table Group ".concat((0,c.shouldPrintSchema)(this)?'"'.concat(this.name,'".'):"",'"').concat(e.name,'" existed'))}},{key:"checkSameId",value:function(e){return this.name===e.name||this.alias===e.name||this.name===e.alias||this.alias&&this.alias===e.alias}},{key:"export",value:function(){return d(d({},this.shallowExport()),this.exportChild())}},{key:"exportChild",value:function(){return{tables:this.tables.map((function(e){return e.export()})),enums:this.enums.map((function(e){return e.export()})),tableGroups:this.tableGroups.map((function(e){return e.export()})),refs:this.refs.map((function(e){return e.export()}))}}},{key:"exportChildIds",value:function(){return{tableIds:this.tables.map((function(e){return e.id})),enumIds:this.enums.map((function(e){return e.id})),tableGroupIds:this.tableGroups.map((function(e){return e.id})),refIds:this.refs.map((function(e){return e.id}))}}},{key:"exportParentIds",value:function(){return{databaseId:this.database.id}}},{key:"shallowExport",value:function(){return{name:this.name,note:this.note,alias:this.alias}}},{key:"normalize",value:function(e){e.schemas[this.id]=d(d(d({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds()),this.tables.forEach((function(t){return t.normalize(e)})),this.enums.forEach((function(t){return t.normalize(e)})),this.tableGroups.forEach((function(t){return t.normalize(e)})),this.refs.forEach((function(t){return t.normalize(e)}))}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(u.default),w=j;t.default=w},24939:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var o;function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(c,e);var t,n,r,o=f(c);function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.content,i=t.headerColor,u=t.token,a=t.database,l=void 0===a?{}:a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=o.call(this,u)).name=n,e.content=r,e.headerColor=i,e.database=l,e.dbState=e.database.dbState,e.generateId(),e}return t=c,n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("noteId")}},{key:"export",value:function(){return{name:this.name,content:this.content,headerColor:this.headerColor}}},{key:"normalize",value:function(e){e.notes[this.id]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:this.id},this.export())}}],n&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(((o=n(37178))&&o.__esModule?o:{default:o}).default),d=p;t.default=d},83306:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(2543),i=f(n(37178)),u=f(n(6450)),a=f(n(36522)),c=n(8974),l=n(3511);function f(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(f,e);var t,n,r,i=O(f);function f(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.alias,u=t.note,a=t.fields,c=void 0===a?[]:a,l=t.indexes,s=void 0===l?[]:l,p=t.schema,d=void 0===p?{}:p,h=t.token,b=t.headerColor,y=t.noteToken,m=void 0===y?null:y,v=t.partials,O=void 0===v?[]:v;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=i.call(this,h)).name=n,e.alias=r,e.note=u?(0,o.get)(u,"value",u):null,e.noteToken=u?(0,o.get)(u,"token",m):null,e.headerColor=b,e.fields=[],e.indexes=[],e.schema=d,e.partials=O,e.dbState=e.schema.dbState,e.generateId(),e.processFields(c),e.processPartials(),e.checkFieldCount(),e.processIndexes(s),e}return t=f,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("tableId")}},{key:"checkFieldCount",value:function(){0===this.fields.length&&this.error("Table must have at least one field")}},{key:"processFields",value:function(e){var t=this;e.forEach((function(e){t.pushField(new u.default(h(h({},e),{},{table:t})))}))}},{key:"pushField",value:function(e){this.checkField(e),this.fields.push(e)}},{key:"checkField",value:function(e){this.fields.some((function(t){return t.name===e.name}))&&e.error('Field "'.concat(e.name,'" existed in table ').concat((0,l.shouldPrintSchema)(this.schema)?'"'.concat(this.schema.name,'".'):"",'"').concat(this.name,'"'))}},{key:"processIndexes",value:function(e){var t=this;e.forEach((function(e){t.pushIndex(new a.default(h(h({},e),{},{table:t})))}))}},{key:"pushIndex",value:function(e){this.checkIndex(e),this.indexes.push(e)}},{key:"checkIndex",value:function(e){var t=this;e.columns.forEach((function(n){"column"!==n.type||t.findField(n.value)||e.error('Column "'.concat(n.value,'" do not exist in table ').concat((0,l.shouldPrintSchema)(t.schema)?'"'.concat(t.schema.name,'".'):"",'"').concat(t.name,'"'))}))}},{key:"findField",value:function(e){return this.fields.find((function(t){return t.name===e}))}},{key:"checkSameId",value:function(e){return this.schema.checkSameId(e.schemaName||c.DEFAULT_SCHEMA_NAME)&&(this.name===e.name||this.alias===e.name||this.name===e.alias||this.alias&&this.alias===e.alias)}},{key:"processPartials",value:function(){var e,t=this;if(null!==(e=this.partials)&&void 0!==e&&e.length){var n=new Set(this.fields.map((function(e){return e.name}))),r=new Set;(0,o.isNil)(this.note)||r.add("note"),(0,o.isNil)(this.headerColor)||r.add("headerColor");var i=this.partials.sort((function(e,t){return t.order-e.order}));i.toReversed().forEach((function(e){t.fields.splice(e.order,0,"dummy")})),i.forEach((function(e){var i=t.schema.database.findTablePartial(e.name);if(i||t.error("Table partial ".concat(e.name," not found"),e.token),e.id=i.id,i.fields){var c,l=i.fields.filter((function(e){return!n.has(e.name)})).map((function(r){return n.add(r.name),r.inline_refs&&r.inline_refs.forEach((function(e){var n,o={token:r.token,endpoints:[{tableName:t.name,schemaName:null===(n=t.schema)||void 0===n?void 0:n.name,fieldNames:[r.name],relation:["-","<"].includes(e.relation)?"1":"*",token:r.token},{tableName:e.tableName,schemaName:e.schemaName,fieldNames:e.fieldNames,relation:["-",">"].includes(e.relation)?"1":"*",token:e.token}],injectedPartial:i};t.schema.database.injectedRawRefs.push(o)})),new u.default(h(h({},r),{},{noteToken:null,table:t,injectedPartial:i,injectedToken:e.token}))}));(c=t.fields).splice.apply(c,[e.order,1].concat(s(l)))}else t.fields.splice(e.order,1);r.has("note")||(0,o.isNil)(i.note)||(t.noteToken=null,t.note=i.note,r.add("note")),r.has("headerColor")||(0,o.isNil)(i.headerColor)||(t.headerColor=i.headerColor,r.add("headerColor")),i.indexes.forEach((function(e){t.indexes.push(new a.default(h(h({},e),{},{table:t,injectedPartial:i})))}))}))}}},{key:"export",value:function(){return h(h({},this.shallowExport()),this.exportChild())}},{key:"exportChild",value:function(){return{fields:this.fields.map((function(e){return e.export()})),indexes:this.indexes.map((function(e){return e.export()}))}}},{key:"exportChildIds",value:function(){return{fieldIds:this.fields.map((function(e){return e.id})),indexIds:this.indexes.map((function(e){return e.id}))}}},{key:"exportParentIds",value:function(){return{schemaId:this.schema.id,groupId:this.group?this.group.id:null}}},{key:"shallowExport",value:function(){return{name:this.name,alias:this.alias,note:this.note,headerColor:this.headerColor,partials:this.partials}}},{key:"normalize",value:function(e){e.tables[this.id]=h(h(h({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds()),this.fields.forEach((function(t){return t.normalize(e)})),this.indexes.forEach((function(t){return t.normalize(e)}))}}])&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),f}(i.default),P=w;t.default=P},35607:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(2543),u=(o=n(37178))&&o.__esModule?o:{default:o},a=n(3511);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(u,e);var t,n,r,o=h(u);function u(e){var t,n=e.name,r=e.token,a=e.tables,c=void 0===a?[]:a,l=e.schema,f=void 0===l?{}:l,s=e.note,p=e.color,d=e.noteToken,h=void 0===d?null:d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=o.call(this,r)).name=n,t.tables=[],t.schema=f,t.dbState=t.schema.dbState,t.note=s?(0,i.get)(s,"value",s):null,t.noteToken=s?(0,i.get)(s,"token",h):null,t.color=p,t.generateId(),t.processTables(c),t}return t=u,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("tableGroupId")}},{key:"processTables",value:function(e){var t=this;e.forEach((function(e){var n=t.schema.database.findTable(e.schemaName,e.name);n||t.error("Table ".concat(e.schemaName?'"'.concat(e.schemaName,'".'):"").concat(e.name," don't exist")),t.pushTable(n)}))}},{key:"pushTable",value:function(e){this.checkTable(e),this.tables.push(e),e.group=this}},{key:"checkTable",value:function(e){this.tables.some((function(t){return t.id===e.id}))&&this.error("Table ".concat((0,a.shouldPrintSchema)(e.schema)?'"'.concat(e.schema.name,'".'):"",".").concat(e.name," is already in the group")),e.group&&this.error("Table ".concat((0,a.shouldPrintSchema)(e.schema)?'"'.concat(e.schema.name,'".'):"",".").concat(e.name," is already in group ").concat((0,a.shouldPrintSchema)(e.group.schema)?'"'.concat(e.group.schema.name,'".'):"").concat(e.group.name))}},{key:"export",value:function(){return l(l({},this.shallowExport()),this.exportChild())}},{key:"exportChild",value:function(){return{tables:this.tables.map((function(e){return{tableName:e.name,schemaName:e.schema.name}}))}}},{key:"exportChildIds",value:function(){return{tableIds:this.tables.map((function(e){return e.id}))}}},{key:"exportParentIds",value:function(){return{schemaId:this.schema.id}}},{key:"shallowExport",value:function(){return{name:this.name,note:this.note,color:this.color}}},{key:"normalize",value:function(e){e.tableGroups[this.id]=l(l(l({id:this.id},this.shallowExport()),this.exportChildIds()),this.exportParentIds())}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(u.default);t.default=y},15313:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=n(2543);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,n,r,o=p(u);function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.note,a=t.fields,c=void 0===a?[]:a,l=t.indexes,f=void 0===l?[]:l,s=t.token,p=t.headerColor,d=t.noteToken,h=void 0===d?null:d,b=t.dbState;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this,s)).name=n,e.note=r?(0,i.get)(r,"value",r):null,e.noteToken=r?(0,i.get)(r,"token",h):null,e.headerColor=p,e.fields=c,e.indexes=f,e.dbState=b,e.generateId(),e}return t=u,(n=[{key:"generateId",value:function(){this.id=this.dbState.generateId("tablePartialId")}},{key:"export",value:function(){return a({},this.shallowExport())}},{key:"shallowExport",value:function(){return{name:this.name,note:this.note,headerColor:this.headerColor,fields:this.fields,indexes:this.indexes}}},{key:"normalize",value:function(e){e.tablePartials[this.id]=a({id:this.id},this.shallowExport())}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(((o=n(37178))&&o.__esModule?o:{default:o}).default),b=h;t.default=b},3511:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.shouldPrintSchema=function(e){return e.name!==r.DEFAULT_SCHEMA_NAME||e.name===r.DEFAULT_SCHEMA_NAME&&e.database.hasDefaultSchema},t.shouldPrintSchemaName=function(e){return e!==r.DEFAULT_SCHEMA_NAME};var r=n(8974)}}]);
