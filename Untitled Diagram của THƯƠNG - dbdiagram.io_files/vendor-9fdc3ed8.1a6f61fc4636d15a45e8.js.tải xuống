!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="00125954-8beb-4a8f-b966-90c0f534efe6",e._sentryDebugIdIdentifier="sentry-dbid-00125954-8beb-4a8f-b966-90c0f534efe6")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[1152],{69746:function(e,t,i){i.r(t),i.d(t,{SelectionAnchorSet:function(){return m}});var o=i(59407),n=i(90028),s=i(68387),r=i(50946),c=i(93702),a=i(38122),d=i(3765),l=i(96655),h=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){return function(i,o){t(i,o,e)}},g=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};const m=new l.N1("selectionAnchorSet",!1);let p=class e{constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=m.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}static get(t){return t.getContribution(e.ID)}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations((t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(c.L.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:(new n.Bc).appendText((0,d.kg)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,o.xE)((0,d.kg)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(c.L.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations((t=>{t.removeDecoration(e),this.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};p.ID="editor.contrib.selectionAnchorController",p=h([u(1,l.fN)],p);class f extends r.ks{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,d.kg)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:a.R.editorTextFocus,primary:(0,s.m5)(2089,2080),weight:100}})}run(e,t){var i;return g(this,void 0,void 0,(function*(){null===(i=p.get(t))||void 0===i||i.setSelectionAnchor()}))}}class _ extends r.ks{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,d.kg)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:m})}run(e,t){var i;return g(this,void 0,void 0,(function*(){null===(i=p.get(t))||void 0===i||i.goToSelectionAnchor()}))}}class v extends r.ks{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,d.kg)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:m,kbOpts:{kbExpr:a.R.editorTextFocus,primary:(0,s.m5)(2089,2089),weight:100}})}run(e,t){var i;return g(this,void 0,void 0,(function*(){null===(i=p.get(t))||void 0===i||i.selectFromAnchorToCursor()}))}}class b extends r.ks{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,d.kg)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:m,kbOpts:{kbExpr:a.R.editorTextFocus,primary:9,weight:100}})}run(e,t){var i;return g(this,void 0,void 0,(function*(){null===(i=p.get(t))||void 0===i||i.cancelSelectionAnchor()}))}}(0,r.HW)(p.ID,p),(0,r.Fl)(f),(0,r.Fl)(_),(0,r.Fl)(v),(0,r.Fl)(b)},69744:function(e,t,i){i.r(t),i.d(t,{BracketMatchingController:function(){return y}});var o=i(65958),n=i(10998),s=i(50946),r=i(15365),c=i(28061),a=i(93702),d=i(38122),l=i(66055),h=i(20491),u=i(48295),g=i(3765),m=i(58067),p=i(4874),f=i(89044);const _=(0,p.x1A)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},g.kg("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class v extends s.ks{constructor(){super({id:"editor.action.jumpToBracket",label:g.kg("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:d.R.editorTextFocus,primary:3160,weight:100}})}run(e,t){var i;null===(i=y.get(t))||void 0===i||i.jumpToBracket()}}class b extends s.ks{constructor(){super({id:"editor.action.selectToBracket",label:g.kg("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,i){var o;let n=!0;i&&!1===i.selectBrackets&&(n=!1),null===(o=y.get(t))||void 0===o||o.selectToBracket(n)}}class C{constructor(e,t,i){this.position=e,this.brackets=t,this.options=i}}class y extends n.jG{constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new o.uC((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(66),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(66)&&(this._matchBrackets=this._editor.getOption(66),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(e.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}static get(e){return e.getContribution(y.ID)}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const i=t.getStartPosition(),o=e.bracketPairs.matchBracket(i);let n=null;if(o)o[0].containsPosition(i)&&!o[1].containsPosition(i)?n=o[1].getStartPosition():o[1].containsPosition(i)&&(n=o[0].getStartPosition());else{const t=e.bracketPairs.findEnclosingBrackets(i);if(t)n=t[1].getStartPosition();else{const t=e.bracketPairs.findNextBracket(i);t&&t.range&&(n=t.range.getStartPosition())}}return n?new a.L(n.lineNumber,n.column,n.lineNumber,n.column):new a.L(i.lineNumber,i.column,i.lineNumber,i.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=[];this._editor.getSelections().forEach((o=>{const n=o.getStartPosition();let s=t.bracketPairs.matchBracket(n);if(!s&&(s=t.bracketPairs.findEnclosingBrackets(n),!s)){const e=t.bracketPairs.findNextBracket(n);e&&e.range&&(s=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let r=null,d=null;if(s){s.sort(c.Q.compareRangesUsingStarts);const[t,i]=s;if(r=e?t.getStartPosition():t.getEndPosition(),d=e?i.getEndPosition():i.getStartPosition(),i.containsPosition(n)){const e=r;r=d,d=e}}r&&d&&i.push(new a.L(r.lineNumber,r.column,d.lineNumber,d.column))})),i.length>0&&(this._editor.setSelections(i),this._editor.revealRange(i[0]))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();const e=[];let t=0;for(const i of this._lastBracketsData){const o=i.brackets;o&&(e[t++]={range:o[0],options:i.options},e[t++]={range:o[1],options:i.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),i=t.getVersionId();let o=[];this._lastVersionId===i&&(o=this._lastBracketsData);const n=[];let s=0;for(let t=0,i=e.length;t<i;t++){const i=e[t];i.isEmpty()&&(n[s++]=i.getStartPosition())}n.length>1&&n.sort(r.y.compare);const c=[];let a=0,d=0;const l=o.length;for(let e=0,i=n.length;e<i;e++){const i=n[e];for(;d<l&&o[d].position.isBefore(i);)d++;if(d<l&&o[d].position.equals(i))c[a++]=o[d];else{let e=t.bracketPairs.matchBracket(i,20),o=y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;e||"always"!==this._matchBrackets||(e=t.bracketPairs.findEnclosingBrackets(i,20),o=y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),c[a++]=new C(i,e,o)}}this._lastBracketsData=c,this._lastVersionId=i}}y.ID="editor.contrib.bracketMatchingController",y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=h.kI.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,f.Yf)(_),position:l.A5.Center}}),y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=h.kI.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,s.HW)(y.ID,y),(0,s.Fl)(b),(0,s.Fl)(v),(0,f.zy)(((e,t)=>{const i=e.getColor(u.RU);i&&t.addRule(`.monaco-editor .bracket-match { background-color: ${i}; }`);const o=e.getColor(u.$u);o&&t.addRule(`.monaco-editor .bracket-match { border: 1px solid ${o}; }`)})),m.ZG.appendMenuItem(m.D8.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:g.kg({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},22498:function(e,t,i){var o=i(50946),n=i(38122),s=i(28061),r=i(93702);class c{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const i=this._selection.startLineNumber,o=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==o)&&(this._isMovingLeft||n!==e.getLineMaxColumn(i)))if(this._isMovingLeft){const r=new s.Q(i,o-1,i,o),c=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s.Q(i,n,i,n),c)}else{const r=new s.Q(i,n,i,n+1),c=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new s.Q(i,o,i,o),c)}}computeCursorState(e,t){return this._isMovingLeft?new r.L(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new r.L(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var a=i(3765);class d extends o.ks{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const i=[],o=t.getSelections();for(const e of o)i.push(new c(e,this.left));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}(0,o.Fl)(class extends d{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:a.kg("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:n.R.writable})}}),(0,o.Fl)(class extends d{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:a.kg("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:n.R.writable})}})},86302:function(e,t,i){i.r(t);var o=i(50946),n=i(66316),s=i(50572),r=i(28061),c=i(38122),a=i(3765);class d extends o.ks{constructor(){super({id:"editor.action.transposeLetters",label:a.kg("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:c.R.writable,kbOpts:{kbExpr:c.R.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const i=t.getModel(),o=[],c=t.getSelections();for(const e of c){if(!e.isEmpty())continue;const t=e.startLineNumber,c=e.startColumn,a=i.getLineMaxColumn(t);if(1===t&&(1===c||2===c&&2===a))continue;const d=c===a?e.getPosition():s.I.rightPosition(i,e.getPosition().lineNumber,e.getPosition().column),l=s.I.leftPosition(i,d),h=s.I.leftPosition(i,l),u=i.getValueInRange(r.Q.fromPositions(h,l)),g=i.getValueInRange(r.Q.fromPositions(l,d)),m=r.Q.fromPositions(h,d);o.push(new n.iu(m,g+u))}o.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop())}}(0,o.Fl)(d)},67860:function(e,t,i){i.r(t),i.d(t,{CopyAction:function(){return b},CutAction:function(){return v},PasteAction:function(){return C}});var o=i(55893),n=i(63339),s=i(93344),r=i(50946),c=i(87301),a=i(38122),d=i(3765),l=i(58067),h=i(3338),u=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};const g="9_cutcopypaste",m=n.ib||document.queryCommandSupported("cut"),p=n.ib||document.queryCommandSupported("copy"),f=void 0!==navigator.clipboard&&!o.isFirefox||document.queryCommandSupported("paste");function _(e){return e.register(),e}const v=m?_(new r.fE({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:n.ib?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:l.D8.MenubarEditMenu,group:"2_ccp",title:d.kg({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:l.D8.EditorContext,group:g,title:d.kg("actions.clipboard.cutLabel","Cut"),when:a.R.writable,order:1},{menuId:l.D8.CommandPalette,group:"",title:d.kg("actions.clipboard.cutLabel","Cut"),order:1},{menuId:l.D8.SimpleEditorContext,group:g,title:d.kg("actions.clipboard.cutLabel","Cut"),when:a.R.writable,order:1}]})):void 0,b=p?_(new r.fE({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:n.ib?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:l.D8.MenubarEditMenu,group:"2_ccp",title:d.kg({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:l.D8.EditorContext,group:g,title:d.kg("actions.clipboard.copyLabel","Copy"),order:2},{menuId:l.D8.CommandPalette,group:"",title:d.kg("actions.clipboard.copyLabel","Copy"),order:1},{menuId:l.D8.SimpleEditorContext,group:g,title:d.kg("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;l.ZG.appendMenuItem(l.D8.MenubarEditMenu,{submenu:l.D8.MenubarCopy,title:{value:d.kg("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),l.ZG.appendMenuItem(l.D8.EditorContext,{submenu:l.D8.EditorContextCopy,title:{value:d.kg("copy as","Copy As"),original:"Copy As"},group:g,order:3}),l.ZG.appendMenuItem(l.D8.EditorContext,{submenu:l.D8.EditorContextShare,title:{value:d.kg("share","Share"),original:"Share"},group:"11_share",order:-1});const C=f?_(new r.fE({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:n.ib?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:l.D8.MenubarEditMenu,group:"2_ccp",title:d.kg({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:l.D8.EditorContext,group:g,title:d.kg("actions.clipboard.pasteLabel","Paste"),when:a.R.writable,order:4},{menuId:l.D8.CommandPalette,group:"",title:d.kg("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:l.D8.SimpleEditorContext,group:g,title:d.kg("actions.clipboard.pasteLabel","Paste"),when:a.R.writable,order:4}]})):void 0;class y extends r.ks{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:d.kg("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:a.R.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;!t.getOption(33)&&t.getSelection().isEmpty()||(s.Eq.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),s.Eq.forceCopyWithSyntaxHighlighting=!1)}}function w(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,i)=>{const o=e.get(c.T).getFocusedCodeEditor();if(o&&o.hasTextFocus()){const e=o.getOption(33),i=o.getSelection();return i&&i.isEmpty()&&!e||document.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,i)=>(document.execCommand(t),!0))))}w(v,"cut"),w(b,"copy"),C&&(C.addImplementation(1e4,"code-editor",((e,t)=>{const i=e.get(c.T),o=e.get(h.h),r=i.getFocusedCodeEditor();if(r&&r.hasTextFocus()){return!(!document.execCommand("paste")&&n.HZ)||u(void 0,void 0,void 0,(function*(){const e=yield o.readText();if(""!==e){const t=s.bs.INSTANCE.get(e);let i=!1,o=null,n=null;t&&(i=r.getOption(33)&&!!t.isFromEmptySelection,o=void 0!==t.multicursorText?t.multicursorText:null,n=t.mode),r.trigger("keyboard","paste",{text:e,pasteOnNewLine:i,multicursorText:o,mode:n})}}))}return!1})),C.addImplementation(0,"generic-dom",((e,t)=>(document.execCommand("paste"),!0)))),p&&(0,r.Fl)(y)},73042:function(e,t,i){i.d(t,{C9:function(){return C},Rw:function(){return w},Uy:function(){return y},Vi:function(){return k},Xj:function(){return v},dU:function(){return A},k_:function(){return _},v8:function(){return b}});var o=i(13338),n=i(78903),s=i(94327),r=i(10998),c=i(37264),a=i(62105),d=i(28061),l=i(93702),h=i(64830),u=i(59715),g=i(44023),m=i(7524),p=i(52230),f=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};const _="editor.action.codeAction",v="editor.action.refactor",b="editor.action.refactor.preview",C="editor.action.sourceAction",y="editor.action.organizeImports",w="editor.action.fixAll";class k{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return f(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(e){(0,s.M_)(e)}t&&(this.action.edit=t.edit)}return this}))}}class S extends r.jG{constructor(e,t,i){super(),this.documentation=t,this._register(i),this.allActions=[...e].sort(S.codeActionsComparator),this.validActions=this.allActions.filter((({action:e})=>!e.disabled))}static codeActionsComparator({action:e},{action:t}){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:(0,o.EI)(e.diagnostics)?(0,o.EI)(t.diagnostics)?e.diagnostics[0].message.localeCompare(t.diagnostics[0].message):-1:(0,o.EI)(t.diagnostics)?1:0}get hasAutoFix(){return this.validActions.some((({action:e})=>!!e.kind&&m.gB.QuickFix.contains(new m.gB(e.kind))&&!!e.isPreferred))}}const L={actions:[],documentation:void 0};function A(e,t,i,n,c,d){var l;const h=n.filter||{},u={only:null===(l=h.include)||void 0===l?void 0:l.value,trigger:n.type},g=new a.ER(t,d),p=function(e,t,i){return e.all(t).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,m.uJ)(i,new m.gB(e))))))}(e,t,h),_=new r.Cm,v=p.map((e=>f(this,void 0,void 0,(function*(){try{c.report(e);const o=yield e.provideCodeActions(t,i,u,g.token);if(o&&_.add(o),g.token.isCancellationRequested)return L;const n=((null==o?void 0:o.actions)||[]).filter((e=>e&&(0,m.aF)(h,e))),s=function(e,t,i){if(!e.documentation)return;const o=e.documentation.map((e=>({kind:new m.gB(e.kind),command:e.command})));if(i){let e;for(const t of o)t.kind.contains(i)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null==e?void 0:e.command}for(const e of t)if(e.kind)for(const t of o)if(t.kind.contains(new m.gB(e.kind)))return t.command;return}(e,n,h.include);return{actions:n.map((t=>new k(t,e))),documentation:s}}catch(e){if((0,s.MB)(e))throw e;return(0,s.M_)(e),L}})))),b=e.onDidChange((()=>{const i=e.all(t);(0,o.aI)(i,p)||g.cancel()}));return Promise.all(v).then((e=>{const t=e.map((e=>e.actions)).flat(),i=(0,o.Yc)(e.map((e=>e.documentation)));return new S(t,i,_)})).finally((()=>{b.dispose(),g.dispose()}))}u.wb.registerCommand("_executeCodeActionProvider",(function(e,t,i,o,r){return f(this,void 0,void 0,(function*(){if(!(t instanceof c.r))throw(0,s.Qg)();const{codeActionProvider:a}=e.get(p.u),u=e.get(h.S).getModel(t);if(!u)throw(0,s.Qg)();const f=l.L.isISelection(i)?l.L.liftSelection(i):d.Q.isIRange(i)?u.validateRange(i):void 0;if(!f)throw(0,s.Qg)();const _="string"==typeof o?new m.gB(o):void 0,v=yield A(a,u,f,{type:1,triggerAction:m.fo.Default,filter:{includeSourceActions:!0,include:_}},g.ke.None,n.X.None),b=[],C=Math.min(v.validActions.length,"number"==typeof r?r:0);for(let e=0;e<C;e++)b.push(v.validActions[e].resolve(n.X.None));try{return yield Promise.all(b),v.validActions.map((e=>e.action))}finally{setTimeout((()=>v.dispose()),100)}}))}))},58129:function(e,t,i){i.d(t,{hi:function(){return Ce},d1:function(){return fe}});var o=i(78903),n=i(63946),s=i(10998),r=i(16844),c=i(50946),a=i(98769),d=i(38122),l=i(52230),h=i(73042),u=i(94327),g=i(77064),m=i(82399),p=i(14333),f=i(67954),_=i(27969),v=i(15365),b=i(7524),C=i(3765),y=i(85753),w=i(96655),k=i(52348),S=i(56071),L=i(76243),A=i(89044),x=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,o){t(i,o,e)}},P=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};const D={Visible:new w.N1("CodeActionMenuVisible",!1,(0,C.kg)("CodeActionMenuVisible","Whether the code action list widget is visible"))};class E extends _.rc{constructor(e,t){super(e.command?e.command.id:e.title,e.title.replace(/\r\n|\r|\n/g," "),void 0,!e.disabled,t),this.action=e}}let M=class{constructor(e,t){this.acceptKeybindings=e,this.keybindingService=t}get templateId(){return"codeActionWidget"}renderTemplate(e){const t=Object.create(null);return t.disposables=[],t.root=e,t.text=document.createElement("span"),e.append(t.text),t}renderElement(e,t,i){const o=i,n=e.title,s=e.isEnabled,r=e.isSeparator,c=e.isDocumentation;if(o.text.textContent=n,s?o.root.classList.remove("option-disabled"):(o.root.classList.add("option-disabled"),o.root.style.backgroundColor="transparent !important"),r&&(o.root.classList.add("separator"),o.root.style.height="10px"),!c){(()=>{var e,t;const[i,n]=this.acceptKeybindings;o.root.title=(0,C.kg)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Refactor, Shift+F2 to Preview"']},"{0} to Refactor, {1} to Preview",null===(e=this.keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this.keybindingService.lookupKeybinding(n))||void 0===t?void 0:t.getLabel())})()}}disposeTemplate(e){e.disposables=(0,s.AS)(e.disposables)}};M=x([I(1,S.b)],M);let N=class e extends s.jG{constructor(e,t,i,o,n,r,c,a,d,l){super(),this._editor=e,this._delegate=t,this._contextMenuService=i,this._languageFeaturesService=n,this._telemetryService=r,this._configurationService=a,this._contextViewService=d,this._contextKeyService=l,this._showingActions=this._register(new s.HE),this.codeActionList=this._register(new s.HE),this.options=[],this._visible=!1,this.viewItems=[],this.hasSeperator=!1,this._keybindingResolver=new O({getKeybindings:()=>o.getKeybindings()}),this._ctxMenuWidgetVisible=D.Visible.bindTo(this._contextKeyService),this.listRenderer=new M(["onEnterSelectCodeAction","onEnterSelectCodeActionWithPreview"],o)}get isVisible(){return this._visible}isCodeActionWidgetEnabled(e){return this._configurationService.getValue("editor.experimental.useCustomCodeActionMenu",{resource:e.uri})}_onListSelection(e){e.elements.length&&e.elements.forEach((e=>{e.isEnabled&&(e.action.run(),this.hideCodeActionWidget())}))}_onListHover(e){var t,i,o,n;e.element?(null===(i=e.element)||void 0===i?void 0:i.isEnabled)?(null===(o=this.codeActionList.value)||void 0===o||o.setFocus([e.element.index]),this.focusedEnabledItem=this.viewItems.indexOf(e.element),this.currSelectedItem=e.element.index):(this.currSelectedItem=void 0,null===(n=this.codeActionList.value)||void 0===n||n.setFocus([e.element.index])):(this.currSelectedItem=void 0,null===(t=this.codeActionList.value)||void 0===t||t.setFocus([]))}renderCodeActionMenuList(t,i){var o;const n=new s.Cm,r=document.createElement("div"),c=document.createElement("div");this.block=t.appendChild(c),this.block.classList.add("context-view-block"),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",n.add(p.ko(this.block,p.Bx.MOUSE_DOWN,(e=>e.stopPropagation()))),r.id="codeActionMenuWidget",r.classList.add("codeActionMenuWidget"),t.appendChild(r),this.codeActionList.value=new f.B8("codeActionWidget",r,{getHeight(e){return e.isSeparator?10:26},getTemplateId(e){return"codeActionWidget"}},[this.listRenderer],{keyboardSupport:!1}),n.add(this.codeActionList.value.onMouseOver((e=>this._onListHover(e)))),n.add(this.codeActionList.value.onDidChangeFocus((e=>{var t;return null===(t=this.codeActionList.value)||void 0===t?void 0:t.domFocus()}))),n.add(this.codeActionList.value.onDidChangeSelection((e=>this._onListSelection(e)))),n.add(this._editor.onDidLayoutChange((e=>this.hideCodeActionWidget()))),i.forEach(((t,o)=>{const n="separator"===t.class;let s=!1;t instanceof E&&(s=t.action.kind===e.documentationID),n&&(this.hasSeperator=!0);const r={title:t.label,detail:t.tooltip,action:i[o],isEnabled:t.enabled,isSeparator:n,index:o,isDocumentation:s};t.enabled&&this.viewItems.push(r),this.options.push(r)})),this.codeActionList.value.splice(0,this.codeActionList.value.length,this.options);const a=this.hasSeperator?26*(i.length-1)+10:26*i.length;r.style.height=String(a)+"px",this.codeActionList.value.layout(a);const d=[];this.options.forEach(((e,t)=>{var i,o;if(!this.codeActionList.value)return;const n=null===(o=document.getElementById(null===(i=this.codeActionList.value)||void 0===i?void 0:i.getElementID(t)))||void 0===o?void 0:o.getElementsByTagName("span")[0].offsetWidth;d.push(Number(n))}));const l=Math.max(...d);r.style.width=l+52+"px",null===(o=this.codeActionList.value)||void 0===o||o.layout(a,l),this.viewItems.length<1||this.viewItems.every((e=>e.isDocumentation))?this.currSelectedItem=void 0:(this.focusedEnabledItem=0,this.currSelectedItem=this.viewItems[0].index,this.codeActionList.value.setFocus([this.currSelectedItem])),this.codeActionList.value.domFocus();const h=p.w5(t),u=h.onDidBlur((()=>{this.hideCodeActionWidget()}));return n.add(u),n.add(h),this._ctxMenuWidgetVisible.set(!0),n}focusPrevious(){var e;if(void 0===this.focusedEnabledItem)this.focusedEnabledItem=this.viewItems[0].index;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let i;do{this.focusedEnabledItem=this.focusedEnabledItem-1,this.focusedEnabledItem<0&&(this.focusedEnabledItem=this.viewItems.length-1),i=this.viewItems[this.focusedEnabledItem],null===(e=this.codeActionList.value)||void 0===e||e.setFocus([i.index]),this.currSelectedItem=i.index}while(this.focusedEnabledItem!==t&&(!i.isEnabled||i.action.id===_.wv.ID));return!0}focusNext(){var e;if(void 0===this.focusedEnabledItem)this.focusedEnabledItem=this.viewItems.length-1;else if(this.viewItems.length<1)return!1;const t=this.focusedEnabledItem;let i;do{this.focusedEnabledItem=(this.focusedEnabledItem+1)%this.viewItems.length,i=this.viewItems[this.focusedEnabledItem],null===(e=this.codeActionList.value)||void 0===e||e.setFocus([i.index]),this.currSelectedItem=i.index}while(this.focusedEnabledItem!==t&&(!i.isEnabled||i.action.id===_.wv.ID));return!0}navigateListWithKeysUp(){this.focusPrevious()}navigateListWithKeysDown(){this.focusNext()}onEnterSet(){var e;"number"==typeof this.currSelectedItem&&(null===(e=this.codeActionList.value)||void 0===e||e.setSelection([this.currSelectedItem]))}dispose(){super.dispose()}hideCodeActionWidget(){this._ctxMenuWidgetVisible.reset(),this.options=[],this.viewItems=[],this.focusedEnabledItem=0,this.currSelectedItem=void 0,this.hasSeperator=!1,this._contextViewService.hideContextView({source:this})}codeActionTelemetry(e,t,i){this._telemetryService.publicLog2("codeAction.applyCodeAction",{codeActionFrom:e,validCodeActions:i.validActions.length,cancelled:t})}show(e,t,i,o){return P(this,void 0,void 0,(function*(){const n=this._editor.getModel();if(!n)return;const s=o.includeDisabledActions?t.allActions:t.validActions;if(!s.length)return void(this._visible=!1);if(!this._editor.getDomNode())throw this._visible=!1,(0,u.aD)();this._visible=!0,this._showingActions.value=t;const r=this.getMenuActions(e,s,t.documentation),c=v.y.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},a=this._keybindingResolver.getResolver(),d=this._editor.getOption(117);this.isCodeActionWidgetEnabled(n)?this._contextViewService.showContextView({getAnchor:()=>c,render:e=>this.renderCodeActionMenuList(e,r),onHide:i=>{const n=o.fromLightbulb?b.fo.Lightbulb:e.triggerAction;this.codeActionTelemetry(n,i,t),this._visible=!1,this._editor.focus()}},this._editor.getDomNode(),!1):this._contextMenuService.showContextMenu({domForShadowRoot:d?this._editor.getDomNode():void 0,getAnchor:()=>c,getActions:()=>r,onHide:i=>{const n=o.fromLightbulb?b.fo.Lightbulb:e.triggerAction;this.codeActionTelemetry(n,i,t),this._visible=!1,this._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:e=>e instanceof E?a(e.action):void 0})}))}getMenuActions(t,i,o){var n,s;const r=e=>new E(e.action,(()=>this._delegate.onSelectCodeAction(e,t))),c=i.map(r),a=[...o],d=this._editor.getModel();if(d&&c.length)for(const e of this._languageFeaturesService.codeActionProvider.all(d))e._getAdditionalMenuItems&&a.push(...e._getAdditionalMenuItems({trigger:t.type,only:null===(s=null===(n=t.filter)||void 0===n?void 0:n.include)||void 0===s?void 0:s.value},i.map((e=>e.action))));return a.length&&c.push(new _.wv,...a.map((t=>r(new h.Vi({title:t.title,command:t,kind:e.documentationID},void 0))))),c}_toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),i=p.BK(this._editor.getDomNode());return{x:i.left+t.left,y:i.top+t.top+t.height}}};N.documentationID="_documentation",N=x([I(2,k.Z),I(3,S.b),I(4,l.u),I(5,L.k),I(6,A.Gy),I(7,y.pG),I(8,k.l),I(9,w.fN)],N);class O{constructor(e){this._keybindingProvider=e}getResolver(){const e=new n.d((()=>this._keybindingProvider.getKeybindings().filter((e=>O.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===h.Uy?t={kind:b.gB.SourceOrganizeImports.value}:e.command===h.Rw&&(t={kind:b.gB.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},b.QA.fromUser(t,{kind:b.gB.None,apply:"never"}))}))));return t=>{if(t.kind){const i=this.bestKeybindingForCodeAction(t,e.getValue());return null==i?void 0:i.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const i=new b.gB(e.kind);return t.filter((e=>e.kind.contains(i))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}}O.codeActionCommands=[h.Xj,h.k_,h.C9,h.Uy,h.Rw];var T,R=i(30474),F=i(26048),B=i(2106),W=i(50969),V=i(4874),j=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},H=function(e,t){return function(i,o){t(i,o,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,i,o){this.actions=e,this.trigger=t,this.editorPosition=i,this.widgetPosition=o,this.type=1}}}(T||(T={}));let U=class e extends s.jG{constructor(e,t,i,o){super(),this._editor=e,this._quickFixActionId=t,this._preferredFixActionId=i,this._keybindingService=o,this._onClick=this._register(new B.vl),this.onClick=this._onClick.event,this._state=T.Hidden,this._domNode=document.createElement("div"),this._domNode.className=F.W6.lightBulb.classNames,this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),R.q.ignoreTarget(this._domNode),this._register(p.Xc(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:i}=p.BK(this._domNode),o=this._editor.getOption(61);let n=Math.floor(o/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=o),this._onClick.fire({x:e.posx,y:t+i+n,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(p.ko(this._domNode,"mouseenter",(e=>{1&~e.buttons||this.hide()}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(59)&&!this._editor.getOption(59).enabled&&this.hide()}))),this._updateLightBulbTitleAndIcon(),this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon,this))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(t,i,o){if(t.validActions.length<=0)return this.hide();const n=this._editor.getOptions();if(!n.get(59).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:r,column:c}=s.validatePosition(o),a=s.getOptions().tabSize,d=n.get(46),l=s.getLineContent(r),h=(0,W.G)(l,a),u=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let g=r;if(!(d.spaceWidth*h>22))if(r>1&&!u(r-1))g-=1;else if(u(r+1)){if(c*d.spaceWidth<22)return this.hide()}else g+=1;this.state=new T.Showing(t,i,o,{position:{lineNumber:g,column:1},preference:e._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state=T.Hidden,this._editor.layoutContentWidget(this)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(1===this.state.type&&this.state.actions.hasAutoFix){this._domNode.classList.remove(...F.W6.lightBulb.classNamesArray),this._domNode.classList.add(...F.W6.lightbulbAutofix.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(e)return void(this.title=C.kg("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",e.getLabel()))}this._domNode.classList.remove(...F.W6.lightbulbAutofix.classNamesArray),this._domNode.classList.add(...F.W6.lightBulb.classNamesArray);const e=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=e?C.kg("codeActionWithKb","Show Code Actions ({0})",e.getLabel()):C.kg("codeAction","Show Code Actions")}set title(e){this._domNode.title=e}};U._posPref=[0],U=j([H(3,S.b)],U),(0,A.zy)(((e,t)=>{var i;const o=null===(i=e.getColor(V.YtV))||void 0===i?void 0:i.transparent(.7),n=e.getColor(V.yHf);n&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${F.W6.lightBulb.cssSelector} {\n\t\t\tcolor: ${n};\n\t\t\tbackground-color: ${o};\n\t\t}`);const s=e.getColor(V.qTN);s&&t.addRule(`\n\t\t.monaco-editor .contentWidgets ${F.W6.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${s};\n\t\t\tbackground-color: ${o};\n\t\t}`)}));var K,Q=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},z=function(e,t){return function(i,o){t(i,o,e)}},G=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))},$=function(e,t,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,i):n?n.value=i:t.set(e,i),i},q=function(e,t,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(e):o?o.value:t.get(e)};let Z=class extends s.jG{constructor(e,t,i,o,r){super(),this._editor=e,this.delegate=o,this._activeCodeActions=this._register(new s.HE),this.previewOn=!1,K.set(this,!1),this._codeActionWidget=new n.d((()=>this._register(r.createInstance(N,this._editor,{onSelectCodeAction:(e,t)=>G(this,void 0,void 0,(function*(){this.previewOn?this.delegate.applyCodeAction(e,!0,Boolean(this.previewOn)):this.delegate.applyCodeAction(e,!0,Boolean(t.preview)),this.previewOn=!1}))})))),this._lightBulbWidget=new n.d((()=>{const e=this._register(r.createInstance(U,this._editor,t,i));return this._register(e.onClick((e=>this.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1,fromLightbulb:!0})))),e}))}dispose(){$(this,K,!0,"f"),super.dispose()}hideCodeActionWidget(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().hideCodeActionWidget()}onEnter(){this._codeActionWidget.hasValue()&&this._codeActionWidget.getValue().onEnterSet()}onPreviewEnter(){this.previewOn=!0,this.onEnter()}navigateList(e){this._codeActionWidget.hasValue()&&(e?this._codeActionWidget.getValue().navigateListWithKeysUp():this._codeActionWidget.getValue().navigateListWithKeysDown())}update(e){var t,i,o,n,s;return G(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let r;try{r=yield e.actions}catch(e){return void(0,u.dz)(e)}if(!q(this,K,"f"))if(this._lightBulbWidget.getValue().update(r,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,r);if(t){try{this._lightBulbWidget.getValue().hide(),yield this.delegate.applyCodeAction(t,!1,!1)}finally{r.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,r);if(t&&t.action.disabled)return null===(o=g.k.get(this._editor))||void 0===o||o.showMessage(t.action.disabled,e.trigger.context.position),void r.dispose()}}const t=!!(null===(n=e.trigger.filter)||void 0===n?void 0:n.include);if(e.trigger.context&&(!r.allActions.length||!t&&!r.validActions.length))return null===(s=g.k.get(this._editor))||void 0===s||s.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=r,void r.dispose();this._activeCodeActions.value=r,this._codeActionWidget.getValue().show(e.trigger,r,e.position,{includeDisabledActions:t,fromLightbulb:!1})}else this._codeActionWidget.getValue().isVisible?r.dispose():this._activeCodeActions.value=r}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((({action:e})=>e.disabled)):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,i,o){return G(this,void 0,void 0,(function*(){this._codeActionWidget.getValue().show(e,t,i,o)}))}};K=new WeakMap,Z=Q([z(4,m._Y)],Z);var J,X=i(59715),Y=i(27619),ee=i(44023),te=i(29879),ie=i(65958),oe=i(22467),ne=i(28061),se=function(e,t,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(e):o?o.value:t.get(e)},re=function(e,t,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(e,i):n?n.value=i:t.set(e,i),i};const ce=new w.N1("supportedCodeAction","");class ae extends s.jG{constructor(e,t,i,o=250){super(),this._editor=e,this._markerService=t,this._signalChange=i,this._delay=o,this._autoTriggerTimer=this._register(new ie.pc),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._onCursorChange())))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,oe.n4)(e,t.uri)))&&this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:b.fo.Default})}),this._delay)}_onCursorChange(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:b.fo.Default})}),this._delay)}_getRangeOfMarker(e){const t=this._editor.getModel();if(t)for(const i of this._markerService.read({resource:t.uri})){const o=t.validateRange(i);if(ne.Q.intersectRanges(o,e))return ne.Q.lift(o)}}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),i=this._editor.getSelection();if(i.isEmpty()&&2===e.type){const{lineNumber:e,column:o}=i.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===o){if(/\s/.test(n[0]))return}else if(o===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[o-2])&&/\s/.test(n[o-1]))return}return i}_createEventAndSignalChange(e,t){const i=this._editor.getModel();if(!t||!i)return void this._signalChange(void 0);const o=this._getRangeOfMarker(t),n=o?o.getStartPosition():t.getStartPosition(),s={trigger:e,selection:t,position:n};return this._signalChange(s),s}}var de;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,i,o){this.trigger=e,this.rangeOrSelection=t,this.position=i,this._cancellablePromise=o,this.type=1,this.actions=o.catch((e=>{if((0,u.MB)(e))return le;throw e}))}cancel(){this._cancellablePromise.cancel()}}}(de||(de={}));const le={allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1};class he extends s.jG{constructor(e,t,i,o,n){super(),this._editor=e,this._registry=t,this._markerService=i,this._progressService=n,this._codeActionOracle=this._register(new s.HE),this._state=de.Empty,this._onDidChangeState=this._register(new B.vl),this.onDidChangeState=this._onDidChangeState.event,J.set(this,!1),this._supportedCodeActions=ce.bindTo(o),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._update()}dispose(){se(this,J,"f")||(re(this,J,!0,"f"),super.dispose(),this.setState(de.Empty,!0))}_update(){if(se(this,J,"f"))return;this._codeActionOracle.value=void 0,this.setState(de.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(83)){const t=[];for(const i of this._registry.all(e))Array.isArray(i.providedCodeActionKinds)&&t.push(...i.providedCodeActionKinds);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new ae(this._editor,this._markerService,(t=>{var i;if(!t)return void this.setState(de.Empty);const o=(0,ie.SS)((i=>(0,h.dU)(this._registry,e,t.selection,t.trigger,ee.ke.None,i)));1===t.trigger.type&&(null===(i=this._progressService)||void 0===i||i.showWhile(o,250)),this.setState(new de.Triggered(t.trigger,t.selection,t.position,o))}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:b.fo.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||se(this,J,"f")||this._onDidChangeState.fire(e))}}J=new WeakMap;var ue=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ge=function(e,t){return function(i,o){t(i,o,e)}},me=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};function pe(e){return w.M$.regex(ce.keys()[0],new RegExp("(\\s|^)"+(0,r.bm)(e.value)+"\\b"))}C.kg("args.schema.kind","Kind of the code action to run."),C.kg("args.schema.apply","Controls when the returned actions are applied."),C.kg("args.schema.apply.first","Always apply the first returned code action."),C.kg("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),C.kg("args.schema.apply.never","Do not apply the returned code actions."),C.kg("args.schema.preferred","Controls if only preferred code actions should be returned.");let fe=class e extends s.jG{constructor(e,t,i,o,s,r){super(),this._instantiationService=s,this._editor=e,this._model=this._register(new he(this._editor,r.codeActionProvider,t,i,o)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._ui=new n.d((()=>this._register(new Z(e,Ce.Id,ye.Id,{applyCodeAction:(e,t,i)=>me(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e,i)}finally{t&&this._trigger({type:2,triggerAction:b.fo.QuickFix,filter:{}})}}))},this._instantiationService))))}static get(t){return t.getContribution(e.ID)}update(e){this._ui.getValue().update(e)}hideCodeActionMenu(){this._ui.hasValue()&&this._ui.getValue().hideCodeActionWidget()}navigateCodeActionList(e){this._ui.hasValue()&&this._ui.getValue().navigateList(e)}selectedOption(){this._ui.hasValue()&&this._ui.getValue().onEnter()}selectedOptionWithPreview(){this._ui.hasValue()&&this._ui.getValue().onPreviewEnter()}showCodeActions(e,t,i){return this._ui.getValue().showCodeActionList(e,t,i,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,i,o,n){var s;if(!this._editor.hasModel())return;null===(s=g.k.get(this._editor))||void 0===s||s.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:i,autoApply:o,context:{notAvailableMessage:e,position:r},preview:n})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(ve,e,_e.FromCodeActions,{preview:t,editor:this._editor})}};var _e;function ve(e,t,i,n){return me(this,void 0,void 0,(function*(){const s=e.get(a.nu),r=e.get(X.wT),c=e.get(L.k),d=e.get(te.Ot);if(c.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:i}),yield t.resolve(o.X.None),t.action.edit&&(yield s.apply(a.jN.convert(t.action.edit),{editor:null==n?void 0:n.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:!0,showPreview:null==n?void 0:n.preview})),t.action.command)try{yield r.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(e){const t=function(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(e);d.error("string"==typeof t?t:C.kg("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}))}function be(e,t,i,o,n=!1,s=b.fo.Default){if(e.hasModel()){const r=fe.get(e);null==r||r.manualTriggerAtCurrentPosition(t,s,i,o,n)}}fe.ID="editor.contrib.quickFixController",fe=ue([ge(1,Y.DR),ge(2,w.fN),ge(3,ee.N8),ge(4,m._Y),ge(5,l.u)],fe),function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions"}(_e||(_e={}));class Ce extends c.ks{constructor(){super({id:Ce.Id,label:C.kg("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:w.M$.and(d.R.writable,d.R.hasCodeActionsProvider),kbOpts:{kbExpr:d.R.editorTextFocus,primary:2132,weight:100}})}run(e,t){return be(t,C.kg("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,!1,b.fo.QuickFix)}}Ce.Id="editor.action.quickFix";c.DX;c.ks;c.ks;c.ks;c.ks;c.ks;class ye extends c.ks{constructor(){super({id:ye.Id,label:C.kg("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:w.M$.and(d.R.writable,pe(b.gB.QuickFix)),kbOpts:{kbExpr:d.R.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}run(e,t){return be(t,C.kg("editor.action.autoFix.noneMessage","No auto fixes available"),{include:b.gB.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",void 0,b.fo.AutoFix)}}ye.Id="editor.action.autoFix";const we=c.DX.bindToContribution(fe.get),ke=190;(0,c.E_)(new we({id:"hideCodeActionMenuWidget",precondition:D.Visible,handler(e){e.hideCodeActionMenu()},kbOpts:{weight:ke,primary:9,secondary:[1033]}})),(0,c.E_)(new we({id:"focusPreviousCodeAction",precondition:D.Visible,handler(e){e.navigateCodeActionList(!0)},kbOpts:{weight:100190,primary:16,secondary:[2064]}})),(0,c.E_)(new we({id:"focusNextCodeAction",precondition:D.Visible,handler(e){e.navigateCodeActionList(!1)},kbOpts:{weight:100190,primary:18,secondary:[2066]}})),(0,c.E_)(new we({id:"onEnterSelectCodeAction",precondition:D.Visible,handler(e){e.selectedOption()},kbOpts:{weight:100190,primary:3,secondary:[1026]}})),(0,c.E_)(new we({id:"onEnterSelectCodeActionWithPreview",precondition:D.Visible,handler(e){e.selectedOptionWithPreview()},kbOpts:{weight:100190,primary:2051}}))},7524:function(e,t,i){i.d(t,{QA:function(){return a},aF:function(){return r},fo:function(){return n},gB:function(){return o},uJ:function(){return s}});class o{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+o.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new o(this.value+o.sep+e)}}var n;function s(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((i=>c(t,i,e.include))))&&!(!e.includeSourceActions&&o.Source.contains(t)))}function r(e,t){const i=t.kind?new o(t.kind):void 0;return!!(!e.include||i&&e.include.contains(i))&&(!(e.excludes&&i&&e.excludes.some((t=>c(i,t,e.include))))&&(!(!e.includeSourceActions&&i&&o.Source.contains(i))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function c(e,t,i){return!!t.contains(e)&&(!i||!t.contains(i))}o.sep=".",o.None=new o("@@none@@"),o.Empty=new o(""),o.QuickFix=new o("quickfix"),o.Refactor=new o("refactor"),o.Source=new o("source"),o.SourceOrganizeImports=o.Source.append("organizeImports"),o.SourceFixAll=o.Source.append("fixAll"),function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(n||(n={}));class a{constructor(e,t,i){this.kind=e,this.apply=t,this.preferred=i}static fromUser(e,t){return e&&"object"==typeof e?new a(a.getKindFromUser(e,t.kind),a.getApplyFromUser(e,t.apply),a.getPreferredUser(e)):new a(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"==typeof e.kind?new o(e.kind):t}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}}},41219:function(e,t,i){i.r(t),i.d(t,{CodeLensContribution:function(){return Q}});var o=i(14333),n=i(65958),s=i(94327),r=i(22344),c=i(10998),a=i(80878),d=i(50946),l=i(66476),h=i(38122),u=i(78903),g=i(79359),m=i(37264),p=i(64830),f=i(59715),_=i(52230),v=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};class b{constructor(){this.lenses=[],this._disposables=new c.Cm}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const i of e.lenses)this.lenses.push({symbol:i,provider:t})}}function C(e,t,i){return v(this,void 0,void 0,(function*(){const o=e.ordered(t),n=new Map,r=new b,c=o.map(((e,o)=>v(this,void 0,void 0,(function*(){n.set(e,o);try{const o=yield Promise.resolve(e.provideCodeLenses(t,i));o&&r.add(o,e)}catch(e){(0,s.M_)(e)}}))));return yield Promise.all(c),r.lenses=r.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:n.get(e.provider)<n.get(t.provider)?-1:n.get(e.provider)>n.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),r}))}f.wb.registerCommand("_executeCodeLensProvider",(function(e,...t){let[i,o]=t;(0,g.j)(m.r.isUri(i)),(0,g.j)("number"==typeof o||!o);const{codeLensProvider:n}=e.get(_.u),r=e.get(p.S).getModel(i);if(!r)throw(0,s.Qg)();const a=[],d=new c.Cm;return C(n,r,u.X.None).then((e=>{d.add(e);const t=[];for(const i of e.lenses)null==o||Boolean(i.symbol.command)?a.push(i.symbol):o-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(r,i.symbol,u.X.None)).then((e=>a.push(e||i.symbol))));return Promise.all(t)})).then((()=>a)).finally((()=>{setTimeout((()=>d.dispose()),100)}))}));var y=i(48289),w=i(27992),k=i(28061),S=i(66726),L=i(82399),A=i(45539),x=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,o){t(i,o,e)}};const P=(0,L.u1)("ICodeLensCache");class D{constructor(e,t){this.lineCount=e,this.data=t}}let E=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new w.qK(20,.75);(0,n.cx)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",i=e.get(t,1,"{}");this._deserialize(i),(0,y.O)(e.onWillSaveState)((i=>{i.reason===A.LP.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const i=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),o=new b;o.add({lenses:i,dispose:()=>{}},this._fakeProvider);const n=new D(e.getLineCount(),o);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,i]of this._cache){const o=new Set;for(const e of i.data.lenses)o.add(e.symbol.range.startLineNumber);e[t]={lineCount:i.lineCount,lines:[...o.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const i=t[e],o=[];for(const e of i.lines)o.push({range:new k.Q(e,1,e,11)});const n=new b;n.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(e,new D(i.lineCount,n))}}catch(e){}}};E=x([I(0,A.CS)],E),(0,S.v)(P,E);var M=i(91818),N=i(20491);class O{constructor(e,t,i){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class T{constructor(e,t,i){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+T._idPool++,this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();const i=[];let n=!1;for(let t=0;t<e.length;t++){const s=e[t];if(s&&(n=!0,s.command)){const n=(0,M.n)(s.command.title.trim());s.command.id?(i.push(o.$("a",{id:String(t),title:s.command.tooltip,role:"button"},...n)),this._commands.set(String(t),s.command)):i.push(o.$("span",{title:s.command.tooltip},...n)),t+1<e.length&&i.push(o.$("span",void 0," | "))}}n?(o.Ln(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):o.Ln(this._domNode,o.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}T._idPool=0;class R{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,i=t.length;e<i;e++)this._addDecorationsCallbacks[e](t[e])}}class F{constructor(e,t,i,o,n,s,r){let c;this._isDisposed=!1,this._editor=t,this._className=i,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),o.addDecoration({range:e.symbol.range,options:N.kI.EMPTY},(e=>this._decorationIds[t]=e)),c=c?k.Q.plusRange(c,e.symbol.range):k.Q.lift(e.symbol.range)})),this._viewZone=new O(c.startLineNumber-1,s,r),this._viewZoneId=n.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new T(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null==t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const i=this._editor.getModel().getDecorationRange(e),o=this._data[t].symbol;return!(!i||k.Q.isEmpty(o.range)!==i.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,i)=>{t.addDecoration({range:e.symbol.range,options:N.kI.EMPTY},(e=>this._decorationIds[i]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=e.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const i=e[t];if(i){const{symbol:e}=this._data[t];e.command=i.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var B=i(3765),W=i(29879),V=i(73027),j=i(12060),H=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,o){t(i,o,e)}},K=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};let Q=class{constructor(e,t,i,s,a,d){this._editor=e,this._languageFeaturesService=t,this._commandService=s,this._notificationService=a,this._codeLensCache=d,this._disposables=new c.Cm,this._localToDispose=new c.Cm,this._lenses=[],this._oldCodeLensModels=new c.Cm,this._provideCodeLensDebounce=i.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=i.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new n.uC((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(46)||e.hasChanged(16)||e.hasChanged(15))&&this._updateLensStyle(),e.hasChanged(14)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,r.tW)(this._editor.getId()).toString(16),this._styleElement=o.li(o.Cl(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(61)/this._editor.getOption(48));let t=this._editor.getOption(16);return(!t||t<5)&&(t=.9*this._editor.getOption(48)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),i=this._editor.getOption(15),o=this._editor.getOption(46),n=`--codelens-font-family${this._styleClassName}`,s=`--codelens-font-features${this._styleClassName}`;let r=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${s}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;i&&(r+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${n}), ${l.jU.fontFamily}}`),this._styleElement.textContent=r,this._editor.getContainerDomNode().style.setProperty(n,null!=i?i:"inherit"),this._editor.getContainerDomNode().style.setProperty(s,o.fontFeatureSettings),this._editor.changeViewZones((t=>{for(const i of this._lenses)i.updateHeight(e,t)}))}_localDispose(){var e,t,i;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(i=this._currentCodeLensModel)||void 0===i||i.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&this._localToDispose.add((0,n.EQ)((()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const t of this._languageFeaturesService.codeLensProvider.all(e))if("function"==typeof t.onDidChange){const e=t.onDidChange((()=>i.schedule()));this._localToDispose.add(e)}const i=new n.uC((()=>{var t;const o=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,n.SS)((t=>C(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const n=this._provideCodeLensDebounce.update(e,Date.now()-o);i.delay=n,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),s.dz)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(i),this._localToDispose.add((0,c.s)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=[];let o=-1;this._lenses.forEach((e=>{e.isValid()&&o!==e.getLineNumber()?(e.update(t),o=e.getLineNumber()):i.push(e)}));const n=new R;i.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),i.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{i.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,c.s)((()=>{if(this._editor.getModel()){const e=a.D.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){const i=e.getCommand(t);if(i){this._commandService.executeCommand(i.id,...i.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),i.schedule()}_disposeAllLenses(e,t){const i=new R;for(const e of this._lenses)e.dispose(i,t);e&&i.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),i=[];let o;for(const n of e.lenses){const e=n.symbol.range.startLineNumber;e<1||e>t||(o&&o[o.length-1].symbol.range.startLineNumber===e?o.push(n):(o=[n],i.push(o)))}const n=a.D.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=new R;let n=0,r=0;for(;r<i.length&&n<this._lenses.length;){const e=i[r][0].symbol.range.startLineNumber,c=this._lenses[n].getLineNumber();c<e?(this._lenses[n].dispose(o,t),this._lenses.splice(n,1)):c===e?(this._lenses[n].updateCodeLensSymbols(i[r],o),r++,n++):(this._lenses.splice(n,0,new F(i[r],this._editor,this._styleClassName,o,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(o,t),this._lenses.splice(n,1);for(;r<i.length;)this._lenses.push(new F(i[r],this._editor,this._styleClassName,o,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;o.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const i=[],o=[];if(this._lenses.forEach((e=>{const n=e.computeIfNecessary(t);n&&(i.push(n),o.push(e))})),0===i.length)return;const r=Date.now(),c=(0,n.SS)((e=>{const n=i.map(((i,n)=>{const r=new Array(i.length),c=i.map(((i,o)=>i.symbol.command||"function"!=typeof i.provider.resolveCodeLens?(r[o]=i.symbol,Promise.resolve(void 0)):Promise.resolve(i.provider.resolveCodeLens(t,i.symbol,e)).then((e=>{r[o]=e}),s.M_)));return Promise.all(c).then((()=>{e.isCancellationRequested||o[n].isDisposed()||o[n].updateCommands(r)}))}));return Promise.all(n)}));this._resolveCodeLensesPromise=c,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),c===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,s.dz)(e),c===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getModel(){return this._currentCodeLensModel}};Q.ID="css.editor.codeLens",Q=H([U(1,_.u),U(2,j.U),U(3,f.wT),U(4,W.Ot),U(5,P)],Q),(0,d.HW)(Q.ID,Q),(0,d.Fl)(class extends d.ks{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:h.R.hasCodeLensProvider,label:(0,B.kg)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return K(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(V.GK),o=e.get(f.wT),n=e.get(W.Ot),s=t.getSelection().positionLineNumber,r=t.getContribution(Q.ID);if(!r)return;const c=r.getModel();if(!c)return;const a=[];for(const e of c.lenses)e.symbol.command&&e.symbol.range.startLineNumber===s&&a.push({label:e.symbol.command.title,command:e.symbol.command});if(0===a.length)return;const d=yield i.pick(a,{canPickMany:!1});if(d){if(c.isDisposed)return yield o.executeCommand(this.id);try{yield o.executeCommand(d.command.id,...d.command.arguments||[])}catch(e){n.error(e)}}}))}})},72106:function(e,t,i){var o=i(68387),n=i(50946),s=i(28061),r=i(38122),c=i(52394),a=i(23877),d=i(15365),l=i(93702);class h{constructor(e,t,i){this.languageConfigurationService=i,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,i){if(i<0)return!1;const o=t.length;if(i+o>e.length)return!1;for(let n=0;n<o;n++){const o=e.charCodeAt(i+n),s=t.charCodeAt(n);if(o!==s&&!(o>=65&&o<=90&&o+32===s||s>=65&&s<=90&&s+32===o))return!1}return!0}_createOperationsForBlockComment(e,t,i,o,n,r){const c=e.startLineNumber,a=e.startColumn,d=e.endLineNumber,l=e.endColumn,u=n.getLineContent(c),g=n.getLineContent(d);let m,p=u.lastIndexOf(t,a-1+t.length),f=g.indexOf(i,l-1-i.length);if(-1!==p&&-1!==f)if(c===d){u.substring(p+t.length,f).indexOf(i)>=0&&(p=-1,f=-1)}else{const e=u.substring(p+t.length),o=g.substring(0,f);(e.indexOf(i)>=0||o.indexOf(i)>=0)&&(p=-1,f=-1)}-1!==p&&-1!==f?(o&&p+t.length<u.length&&32===u.charCodeAt(p+t.length)&&(t+=" "),o&&f>0&&32===g.charCodeAt(f-1)&&(i=" "+i,f-=1),m=h._createRemoveBlockCommentOperations(new s.Q(c,p+t.length+1,d,f+1),t,i)):(m=h._createAddBlockCommentOperations(e,t,i,this._insertSpace),this._usedEndToken=1===m.length?i:null);for(const e of m)r.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,i){const o=[];return s.Q.isEmpty(e)?o.push(a.k.delete(new s.Q(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+i.length))):(o.push(a.k.delete(new s.Q(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),o.push(a.k.delete(new s.Q(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+i.length)))),o}static _createAddBlockCommentOperations(e,t,i,o){const n=[];return s.Q.isEmpty(e)?n.push(a.k.replace(new s.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+i)):(n.push(a.k.insert(new d.y(e.startLineNumber,e.startColumn),t+(o?" ":""))),n.push(a.k.insert(new d.y(e.endLineNumber,e.endColumn),(o?" ":"")+i))),n}getEditOperations(e,t){const i=this._selection.startLineNumber,o=this._selection.startColumn;e.tokenization.tokenizeIfCheap(i);const n=e.getLanguageIdAtPosition(i,o),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const i=t.getInverseEditOperations();if(2===i.length){const e=i[0],t=i[1];return new l.L(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=i[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new l.L(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=i(16844);class g{constructor(e,t,i,o,n,s,r){this.languageConfigurationService=e,this._selection=t,this._tabSize=i,this._type=o,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=r||!1}static _gatherPreflightCommentStrings(e,t,i,o){e.tokenization.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),s=o.getLanguageConfiguration(n).comments,r=s?s.lineCommentToken:null;if(!r)return null;const c=[];for(let e=0,o=i-t+1;e<o;e++)c[e]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return c}static _analyzeLines(e,t,i,o,n,s,r,c){let a,d=!0;a=0===e||1!==e;for(let c=0,l=o.length;c<l;c++){const l=o[c],g=n+c;if(g===n&&r){l.ignore=!0;continue}const m=i.getLineContent(g),p=u.HG(m);if(-1!==p){if(d=!1,l.ignore=!1,l.commentStrOffset=p,a&&!h._haystackHasNeedleAtOffset(m,l.commentStr,p)&&(0===e?a=!1:1===e||(l.ignore=!0)),a&&t){const e=p+l.commentStrLength;e<m.length&&32===m.charCodeAt(e)&&(l.commentStrLength+=1)}}else l.ignore=s,l.commentStrOffset=m.length}if(0===e&&d){a=!1;for(let e=0,t=o.length;e<t;e++)o[e].ignore=!1}return{supported:!0,shouldRemoveComments:a,lines:o}}static _gatherPreflightData(e,t,i,o,n,s,r,c){const a=g._gatherPreflightCommentStrings(i,o,n,c);return null===a?{supported:!1}:g._analyzeLines(e,t,i,a,o,s,r,c)}_executeLineComments(e,t,i,o){let n;i.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(i.lines,o.startLineNumber):(g._normalizeInsertionPoint(e,i.lines,o.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(i.lines,o.startLineNumber));const r=new d.y(o.positionLineNumber,o.positionColumn);for(let i=0,o=n.length;i<o;i++)if(t.addEditOperation(n[i].range,n[i].text),s.Q.isEmpty(n[i].range)&&s.Q.getStartPosition(n[i].range).equals(r)){e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(n[i].text||"").length)}this._selectionId=t.trackSelection(o)}_attemptRemoveBlockComment(e,t,i,o){let n=t.startLineNumber,r=t.endLineNumber;const c=o.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let a=e.getLineContent(n).lastIndexOf(i,c-1),d=e.getLineContent(r).indexOf(o,t.endColumn-1-i.length);return-1!==a&&-1===d&&(d=e.getLineContent(n).indexOf(o,a+i.length),r=n),-1===a&&-1!==d&&(a=e.getLineContent(r).lastIndexOf(i,d),n=r),!t.isEmpty()||-1!==a&&-1!==d||(a=e.getLineContent(n).indexOf(i),-1!==a&&(d=e.getLineContent(n).indexOf(o,a+i.length))),-1!==a&&32===e.getLineContent(n).charCodeAt(a+i.length)&&(i+=" "),-1!==d&&32===e.getLineContent(r).charCodeAt(d-1)&&(o=" "+o,d-=1),-1!==a&&-1!==d?h._createRemoveBlockCommentOperations(new s.Q(n,a+i.length+1,r,d+1),i,o):null}_executeBlockComment(e,t,i){e.tokenization.tokenizeIfCheap(i.startLineNumber);const o=e.getLanguageIdAtPosition(i.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(o).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const r=n.blockCommentStartToken,c=n.blockCommentEndToken;let a=this._attemptRemoveBlockComment(e,i,r,c);if(!a){if(i.isEmpty()){const t=e.getLineContent(i.startLineNumber);let o=u.HG(t);-1===o&&(o=t.length),a=h._createAddBlockCommentOperations(new s.Q(i.startLineNumber,o+1,i.startLineNumber,t.length+1),r,c,this._insertSpace)}else a=h._createAddBlockCommentOperations(new s.Q(i.startLineNumber,e.getLineFirstNonWhitespaceColumn(i.startLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),r,c,this._insertSpace);1===a.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(i);for(const e of a)t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new s.Q(i.startLineNumber,e.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const o=g._gatherPreflightData(this._type,this._insertSpace,e,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return o.supported?this._executeLineComments(e,t,o,i):this._executeBlockComment(e,t,i)}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),new l.L(i.selectionStartLineNumber,i.selectionStartColumn+this._deltaColumn,i.positionLineNumber,i.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const i=[];for(let o=0,n=e.length;o<n;o++){const n=e[o];n.ignore||i.push(a.k.delete(new s.Q(t+o,n.commentStrOffset+1,t+o,n.commentStrOffset+n.commentStrLength+1)))}return i}_createAddLineCommentsOperations(e,t){const i=[],o=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||i.push(a.k.insert(new d.y(t+n,s.commentStrOffset+1),s.commentStr+o))}return i}static nextVisibleColumn(e,t,i,o){return i?e+(t-e%t):e+o}static _normalizeInsertionPoint(e,t,i,o){let n,s,r=1073741824;for(let n=0,s=t.length;n<s;n++){if(t[n].ignore)continue;const s=e.getLineContent(i+n);let c=0;for(let e=0,i=t[n].commentStrOffset;c<r&&e<i;e++)c=g.nextVisibleColumn(c,o,9===s.charCodeAt(e),1);c<r&&(r=c)}r=Math.floor(r/o)*o;for(let c=0,a=t.length;c<a;c++){if(t[c].ignore)continue;const a=e.getLineContent(i+c);let d=0;for(n=0,s=t[c].commentStrOffset;d<r&&n<s;n++)d=g.nextVisibleColumn(d,o,9===a.charCodeAt(n),1);t[c].commentStrOffset=d>r?n-1:n}}}var m=i(3765),p=i(58067);class f extends n.ks{constructor(e,t){super(t),this._type=e}run(e,t){const i=e.get(c.JZ);if(!t.hasModel())return;const o=[],n=t.getModel().getOptions(),r=t.getOption(19),a=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));a.sort(((e,t)=>s.Q.compareRangesUsingStarts(e.selection,t.selection)));let d=a[0];for(let e=1;e<a.length;e++){const t=a[e];d.selection.endLineNumber===t.selection.startLineNumber&&(d.index<t.index?t.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=t))}for(const e of a)o.push(new g(i,e.selection,n.tabSize,this._type,r.insertSpace,r.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class _ extends n.ks{constructor(){super({id:"editor.action.blockComment",label:m.kg("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:p.D8.MenubarEditMenu,group:"5_insert",title:m.kg({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const i=e.get(c.JZ);if(!t.hasModel())return;const o=t.getOption(19),n=[],s=t.getSelections();for(const e of s)n.push(new h(e,o.insertSpace,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}(0,n.Fl)(class extends f{constructor(){super(0,{id:"editor.action.commentLine",label:m.kg("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:p.D8.MenubarEditMenu,group:"5_insert",title:m.kg({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.Fl)(class extends f{constructor(){super(1,{id:"editor.action.addCommentLine",label:m.kg("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:(0,o.m5)(2089,2081),weight:100}})}}),(0,n.Fl)(class extends f{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m.kg("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:r.R.writable,kbOpts:{kbExpr:r.R.editorTextFocus,primary:(0,o.m5)(2089,2099),weight:100}})}}),(0,n.Fl)(_)},75368:function(e,t,i){i.r(t),i.d(t,{ContextMenuController:function(){return v}});var o=i(14333),n=i(23473),s=i(27969),r=i(10998),c=i(63339),a=i(50946),d=i(38122),l=i(3765),h=i(58067),u=i(96655),g=i(52348),m=i(56071),p=i(85753),f=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,o){t(i,o,e)}};let v=class e{constructor(e,t,i,n,s,c,a){this._contextMenuService=t,this._contextViewService=i,this._contextKeyService=n,this._keybindingService=s,this._menuService=c,this._configurationService=a,this._toDispose=new r.Cm,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),i=e.srcElement;i.shadowRoot&&o.jG(t)===i.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{this._editor.getOption(20)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}static get(t){return t.getContribution(e.ID)}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(20))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(20))return;if(!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?h.D8.SimpleEditorContext:h.D8.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const i=[],o=this._menuService.createMenu(t,this._contextKeyService),n=o.getActions({arg:e.uri});o.dispose();for(const t of n){const[,o]=t;let n=0;for(const t of o)if(t instanceof h.nI){const o=this._getMenuActions(e,t.item.submenu);o.length>0&&(i.push(new s.YH(t.id,t.label,o)),n++)}else i.push(t),n++;n&&i.push(new s.wv)}return i.length&&i.pop(),i}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const i=this._editor.getOption(55);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),i=o.BK(this._editor.getDomNode()),n=i.left+e.left,s=i.top+e.top+e.height;t={x:n,y:s}}const s=this._editor.getOption(117)&&!c.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new n.Z(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const i=e;return"function"==typeof i.getActionViewItem?i.getActionViewItem():new n.Z(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus(),this._editor.updateOptions({hover:i})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;const t=this._editor.getOption(67);let i=0;const o=e=>({id:"menu-action-"+ ++i,label:e.label,tooltip:"",class:void 0,enabled:void 0===e.enabled||e.enabled,checked:e.checked,run:e.run,dispose:()=>null}),n=(e,t,n,r,c)=>{if(!t)return o({label:e,enabled:t,run:()=>{}});const a=e=>()=>{this._configurationService.updateValue(n,e)},d=[];for(const e of c)d.push(o({label:e.label,checked:r===e.value,run:a(e.value)}));return((e,t)=>new s.YH("menu-action-"+ ++i,e,t,void 0))(e,d)},r=[];r.push(o({label:l.kg("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),r.push(new s.wv),r.push(o({label:l.kg("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),r.push(n(l.kg("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:l.kg("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:l.kg("context.minimap.size.fill","Fill"),value:"fill"},{label:l.kg("context.minimap.size.fit","Fit"),value:"fit"}])),r.push(n(l.kg("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:l.kg("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:l.kg("context.minimap.slider.always","Always"),value:"always"}]));const a=this._editor.getOption(117)&&!c.un;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:a?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>r,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};v.ID="editor.contrib.contextmenu",v=f([_(1,g.Z),_(2,g.l),_(3,u.fN),_(4,m.b),_(5,h.ez),_(6,p.pG)],v);class b extends a.ks{constructor(){super({id:"editor.action.showContextMenu",label:l.kg("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:d.R.textInputFocus,primary:1092,weight:100}})}run(e,t){var i;null===(i=v.get(t))||void 0===i||i.showContextMenu()}}(0,a.HW)(v.ID,v),(0,a.Fl)(b)},30358:function(e,t,i){var o=i(50946),n=i(85003),s=i(39587),r=i(14333),c=i(65958),a=i(69887),d=i(10998),l=i(53720),h=i(9223),u=i(42683),g=i(98769),m=i(28061),p=i(52230),f=i(62105),_=i(50960),v=i(47039),b=i(3338),C=i(85753),y=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t){return function(i,o){t(i,o,e)}},k=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(e){s(e)}}function c(e){try{a(o.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,c)}a((o=o.apply(e,t||[])).next())}))};const S="application/vnd.code.copyMetadata";let L=class extends d.jG{constructor(e,t,i,o,n){super(),this._bulkEditService=t,this._clipboardService=i,this._configurationService=o,this._languageFeaturesService=n,this._editor=e;const s=e.getContainerDomNode();this._register((0,r.ko)(s,"copy",(e=>this.handleCopy(e)))),this._register((0,r.ko)(s,"cut",(e=>this.handleCopy(e)))),this._register((0,r.ko)(s,"paste",(e=>this.handlePaste(e)),!0))}arePasteActionsEnabled(e){return this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:e.uri})}handleCopy(e){var t;if(!e.clipboardData||!this._editor.hasTextFocus())return;const i=this._editor.getModel(),o=this._editor.getSelections();if(!i||!(null==o?void 0:o.length))return;if(!this.arePasteActionsEnabled(i))return;const n=[...o],s=o[0],r=s.isEmpty();if(r){if(!this._editor.getOption(33))return;n[0]=new m.Q(s.startLineNumber,0,s.startLineNumber,i.getLineLength(s.startLineNumber))}const a=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter((e=>!!e.prepareDocumentPaste));if(!a.length)return void this.setCopyMetadata(e.clipboardData,{wasFromEmptySelection:r});const d=(0,u.q_)(e.clipboardData),l=(0,h.b)();this.setCopyMetadata(e.clipboardData,{id:l,wasFromEmptySelection:r});const g=(0,c.SS)((e=>k(this,void 0,void 0,(function*(){const t=yield Promise.all(a.map((t=>t.prepareDocumentPaste(i,n,d,e))));for(const e of t)null==e||e.forEach(((e,t)=>{d.replace(t,e)}));return d}))));null===(t=this._currentClipboardItem)||void 0===t||t.dataTransferPromise.cancel(),this._currentClipboardItem={handle:l,dataTransferPromise:g}}setCopyMetadata(e,t){e.setData(S,JSON.stringify(t))}handlePaste(e){var t,i,o;return k(this,void 0,void 0,(function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;const n=this._editor.getSelections();if(!(null==n?void 0:n.length)||!this._editor.hasModel())return;const r=this._editor.getModel();if(!this.arePasteActionsEnabled(r))return;let c;const d=null===(t=e.clipboardData)||void 0===t?void 0:t.getData(S);d&&"string"==typeof d&&(c=JSON.parse(d));const h=this._languageFeaturesService.documentPasteEditProvider.ordered(r);if(!h.length)return;e.preventDefault(),e.stopImmediatePropagation();const m=r.getVersionId(),p=new f.gI(this._editor,3);try{const t=(0,u.q_)(e.clipboardData);if((null==c?void 0:c.id)&&(null===(i=this._currentClipboardItem)||void 0===i?void 0:i.handle)===c.id){(yield this._currentClipboardItem.dataTransferPromise).forEach(((e,i)=>{t.replace(i,e)}))}if(!t.has(l.K.uriList)){const e=yield this._clipboardService.readResources();e.length&&t.append(l.K.uriList,(0,a.gf)(u.jt.create(e)))}t.delete(S);for(const e of h){if(!e.pasteMimeTypes.some((e=>e.toLowerCase()===s.t.FILES.toLowerCase()?[...t.values()].some((e=>e.asFile())):t.has(e))))continue;const i=yield e.provideDocumentPasteEdits(r,n,t,p.token);if(m!==r.getVersionId())return;if(i)return(0,_.performSnippetEdit)(this._editor,"string"==typeof i.insertText?v.fr.escape(i.insertText):i.insertText.snippet,n),void(i.additionalEdit&&(yield this._bulkEditService.apply(g.jN.convert(i.additionalEdit),{editor:this._editor})))}const d=null!==(o=t.get(l.K.text))&&void 0!==o?o:t.get("text");if(!d)return;const f=yield d.asString();if(m!==r.getVersionId())return;this._editor.trigger("keyboard","paste",{text:f,pasteOnNewLine:null==c?void 0:c.wasFromEmptySelection,multicursorText:null})}finally{p.dispose()}}))}};L.ID="editor.contrib.copyPasteActionController",L=y([w(1,g.nu),w(2,b.h),w(3,C.pG),w(4,p.u)],L);var A=i(3765),x=i(27142),I=i(67167);(0,o.HW)(L.ID,L),I.O.as(x.Fd.Configuration).registerConfiguration(Object.assign(Object.assign({},n.JJ),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:A.kg("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}))},23676:function(e,t,i){i.r(t),i.d(t,{CursorRedo:function(){return h},CursorUndo:function(){return l},CursorUndoRedoController:function(){return d}});var o=i(10998),n=i(50946),s=i(38122),r=i(3765);class c{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}class a{constructor(e,t,i){this.cursorState=e,this.scrollTop=t,this.scrollLeft=i}}class d extends o.jG{constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const i=new c(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new a(i,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}static get(e){return e.getContribution(d.ID)}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new a(new c(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new a(new c(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}d.ID="editor.contrib.cursorUndoRedoController";class l extends n.ks{constructor(){super({id:"cursorUndo",label:r.kg("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:s.R.textInputFocus,primary:2099,weight:100}})}run(e,t,i){var o;null===(o=d.get(t))||void 0===o||o.cursorUndo()}}class h extends n.ks{constructor(){super({id:"cursorRedo",label:r.kg("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,i){var o;null===(o=d.get(t))||void 0===o||o.cursorRedo()}}(0,n.HW)(d.ID,d),(0,n.Fl)(l),(0,n.Fl)(h)}}]);
