!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=(new Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="e375dfdd-ff12-4f2d-80a0-45f9a33bed50",e._sentryDebugIdIdentifier="sentry-dbid-e375dfdd-ff12-4f2d-80a0-45f9a33bed50")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[5326],{49084:function(e,i,t){t.d(i,{x:function(){return $}});t(90711);var o=t(3765),n=t(14333),r=t(94327),s=t(2106),a=t(10998),d=t(13072),h=t(92127),l=t(50946),u=t(87301),g=t(26076),m=t(83620),c=t(66476),_=t(84296),f=t(62549),v=t(15365),p=t(28061),D=t(93702),C=t(22595),w=t(12596),b=t(38122),E=t(20491),S=t(48295),L=t(4874),y=t(4140),N=t(59715),R=t(96655),I=t(82399),M=t(30657),T=t(29879),O=t(89044),P=t(53909),W=t(79359),x=t(61435),V=t(79604),F=t(89673),k=t(52394),H=t(48218),z=t(52230),Q=function(e,i,t,o){var n,r=arguments.length,s=r<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,i,t,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(i,t,s):n(i,t))||s);return r>3&&s&&Object.defineProperty(i,t,s),s},A=function(e,i){return function(t,o){i(t,o,e)}},U=function(e,i,t,o){return new(t||(t=Promise))((function(n,r){function s(e){try{d(o.next(e))}catch(e){r(e)}}function a(e){try{d(o.throw(e))}catch(e){r(e)}}function d(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(s,a)}d((o=o.apply(e,i||[])).next())}))};let Z=0;class B{constructor(e,i,t,o,n){this.model=e,this.viewModel=i,this.view=t,this.hasRealView=o,this.listenersToRemove=n}dispose(){(0,a.AS)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let $=class e extends a.jG{constructor(e,i,t,o,a,d,h,u,g,m,c,_){super(),this.languageConfigurationService=c,this._deliveryQueue=new s.ci,this._onDidDispose=this._register(new s.vl),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new j({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onWillType=this._onWillType.event,this._onDidType=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection();const f=Object.assign({},i);let v;this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++Z,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=t.telemetryData,this._configuration=this._register(this._createConfiguration(t.isSimpleWidget||!1,f,m)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const i=this._configuration.options;if(e.hasChanged(133)){const e=i.get(133);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(h.createScoped(this._domElement)),this._notificationService=g,this._codeEditorService=a,this._commandService=d,this._themeService=u,this._register(new K(this,this._contextKeyService)),this._register(new q(this,this._contextKeyService,_)),this._instantiationService=o.createChild(new M.a([R.fN,this._contextKeyService])),this._modelData=null,this._contributions={},this._actions={},this._focusTracker=new G(e),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},v=Array.isArray(t.contributions)?t.contributions:l.dS.getEditorContributions();for(const e of v)if(this._contributions[e.id])(0,r.dz)(new Error(`Cannot have two contributions with the same id ${e.id}`));else try{const i=this._instantiationService.createInstance(e.ctor,this);this._contributions[e.id]=i}catch(e){(0,r.dz)(e)}l.dS.getEditorActions().forEach((e=>{if(this._actions[e.id])return void(0,r.dz)(new Error(`Cannot have two actions with the same id ${e.id}`));const i=new C.f(e.id,e.label,e.alias,(0,W.UH)(e.precondition),(()=>this._instantiationService.invokeFunction((i=>Promise.resolve(e.runEditorCommand(i,this,null))))),this._contextKeyService);this._actions[i.id]=i}));const p=()=>!this._configuration.options.get(83)&&this._configuration.options.get(32).enabled;this._register(new n.pN(this._domElement,{onDragEnter:()=>{},onDragOver:e=>{if(!p())return;const i=this.getTargetAtClientPoint(e.clientX,e.clientY);(null==i?void 0:i.position)&&this.showDropIndicatorAt(i.position)},onDrop:e=>U(this,void 0,void 0,(function*(){if(!p())return;if(this.removeDropIndicator(),!e.dataTransfer)return;const i=this.getTargetAtClientPoint(e.clientX,e.clientY);(null==i?void 0:i.position)&&this._onDropIntoEditor.fire({position:i.position,event:e})})),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}get isSimpleWidget(){return this._configuration.isSimpleWidget}_createConfiguration(e,i,t){return new h.g(e,i,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return w._.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();const e=Object.keys(this._contributions);for(let i=0,t=e.length;i<t;i++){const t=e[i];this._contributions[t].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?F.z.getWordAtPosition(this._modelData.model,this._configuration.options.get(119),e):null}getValue(e=null){if(!this._modelData)return"";const i=!(!e||!e.preserveBOM);let t=0;return e&&e.lineEnding&&"\n"===e.lineEnding?t=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(t=2),this._modelData.model.getValue(t,i)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){const i=e;if(null===this._modelData&&null===i)return;if(this._modelData&&this._modelData.model===i)return;const t=this.hasTextFocus(),o=this._detachModel();this._attachModel(i),t&&this.hasModel()&&this.focus();const n={oldModelUrl:o?o.uri:null,newModelUrl:i?i.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(o)}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const i=this._decorationTypeSubtypes[e];for(const t in i)this._removeDecorationType(e+"-"+t)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,i,t,o){const n=e.model.validatePosition({lineNumber:i,column:t}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,o)}getTopForLineNumber(i,t=!1){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,i,1,t):-1}getTopForPosition(i,t){return this._modelData?e._getVerticalOffsetForPosition(this._modelData,i,t,!1):-1}static _getVerticalOffsetForPosition(e,i,t,o=!1){const n=e.model.validatePosition({lineNumber:i,column:t}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,o)}getBottomForLineNumber(i,t=!1){return this._modelData?e._getVerticalOffsetAfterPosition(this._modelData,i,1,t):-1}setHiddenAreas(e){var i;null===(i=this._modelData)||void 0===i||i.viewModel.setHiddenAreas(e.map((e=>p.Q.lift(e))))}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const i=this._modelData.model.validatePosition(e),t=this._modelData.model.getOptions().tabSize;return f.A.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,t)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,i="api"){if(this._modelData){if(!v.y.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,i,t,o){if(!this._modelData)return;if(!p.Q.isIRange(e))throw new Error("Invalid arguments");const n=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.viewModel.revealRange("api",t,r,i,o)}revealLine(e,i=0){this._revealLine(e,0,i)}revealLineInCenter(e,i=0){this._revealLine(e,1,i)}revealLineInCenterIfOutsideViewport(e,i=0){this._revealLine(e,2,i)}revealLineNearTop(e,i=0){this._revealLine(e,5,i)}_revealLine(e,i,t){if("number"!=typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new p.Q(e,1,e,1),i,!1,t)}revealPosition(e,i=0){this._revealPosition(e,0,!0,i)}revealPositionInCenter(e,i=0){this._revealPosition(e,1,!0,i)}revealPositionInCenterIfOutsideViewport(e,i=0){this._revealPosition(e,2,!0,i)}revealPositionNearTop(e,i=0){this._revealPosition(e,5,!0,i)}_revealPosition(e,i,t,o){if(!v.y.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new p.Q(e.lineNumber,e.column,e.lineNumber,e.column),i,t,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,i="api"){const t=D.L.isISelection(e),o=p.Q.isIRange(e);if(!t&&!o)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e,i);else if(o){const t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t,i)}}_setSelectionImpl(e,i){if(!this._modelData)return;const t=new D.L(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(i,[t])}revealLines(e,i,t=0){this._revealLines(e,i,0,t)}revealLinesInCenter(e,i,t=0){this._revealLines(e,i,1,t)}revealLinesInCenterIfOutsideViewport(e,i,t=0){this._revealLines(e,i,2,t)}revealLinesNearTop(e,i,t=0){this._revealLines(e,i,5,t)}_revealLines(e,i,t,o){if("number"!=typeof e||"number"!=typeof i)throw new Error("Invalid arguments");this._sendRevealRange(new p.Q(e,1,i,1),t,!1,o)}revealRange(e,i=0,t=!1,o=!0){this._revealRange(e,t?1:0,o,i)}revealRangeInCenter(e,i=0){this._revealRange(e,1,!0,i)}revealRangeInCenterIfOutsideViewport(e,i=0){this._revealRange(e,2,!0,i)}revealRangeNearTop(e,i=0){this._revealRange(e,5,!0,i)}revealRangeNearTopIfOutsideViewport(e,i=0){this._revealRange(e,6,!0,i)}revealRangeAtTop(e,i=0){this._revealRange(e,3,!0,i)}_revealRange(e,i,t,o){if(!p.Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(p.Q.lift(e),i,t,o)}setSelections(e,i="api",t=0){if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let i=0,t=e.length;i<t;i++)if(!D.L.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,t)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,i=1){if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},i)}}setScrollTop(e,i=1){if(this._modelData){if("number"!=typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},i)}}setScrollPosition(e,i=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,i)}saveViewState(){if(!this._modelData)return null;const e={},i=Object.keys(this._contributions);for(const t of i){const i=this._contributions[t];"function"==typeof i.saveViewState&&(e[t]=i.saveViewState())}return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const i=e;if(i&&i.cursorState&&i.viewState){const e=i.cursorState;Array.isArray(e)?e.length>0&&this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]);const t=i.contributionsState||{},o=Object.keys(this._contributions);for(let e=0,i=o.length;e<i;e++){const i=o[e],n=this._contributions[i];"function"==typeof n.restoreViewState&&n.restoreViewState(t[i])}const n=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(n)}}getContribution(e){return this._contributions[e]||null}getActions(){const e=[],i=Object.keys(this._actions);for(let t=0,o=i.length;t<o;t++){const o=i[t];e.push(this._actions[o])}return e}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions[e]||null}trigger(e,i,t){switch(t=t||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const i=t;return void this._type(e,i.text||"")}case"replacePreviousChar":{const i=t;return void this._compositionType(e,i.text||"",i.replaceCharCnt||0,0,0)}case"compositionType":{const i=t;return void this._compositionType(e,i.text||"",i.replacePrevCharCnt||0,i.replaceNextCharCnt||0,i.positionDelta||0)}case"paste":{const i=t;return void this._paste(e,i.text||"",i.pasteOnNewLine||!1,i.multicursorText||null,i.mode||null)}case"cut":return void this._cut(e)}const o=this.getAction(i);o?Promise.resolve(o.run()).then(void 0,r.dz):this._modelData&&(this._triggerEditorCommand(e,i,t)||this._triggerCommand(i,t))}_triggerCommand(e,i){this._commandService.executeCommand(e,i)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,i){this._modelData&&0!==i.length&&("keyboard"===e&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),"keyboard"===e&&this._onDidType.fire(i))}_compositionType(e,i,t,o,n){this._modelData&&this._modelData.viewModel.compositionType(i,t,o,n,e)}_paste(e,i,t,o,n){if(!this._modelData||0===i.length)return;const r=this._modelData.viewModel,s=r.getSelection().getStartPosition();r.paste(i,t,o,e);const a=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new p.Q(s.lineNumber,s.column,a.lineNumber,a.column),languageId:n})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,i,t){const o=l.dS.getEditorCommand(i);return!!o&&((t=t||{}).source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(o.runEditorCommand(e,this,t)).then(void 0,r.dz)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(83)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(83)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,i,t){if(!this._modelData)return!1;if(this._configuration.options.get(83))return!1;let o;return o=t?Array.isArray(t)?()=>t:t:()=>null,this._modelData.viewModel.executeEdits(e,i,o),!0}executeCommand(e,i){this._modelData&&this._modelData.viewModel.executeCommand(i,e)}executeCommands(e,i){this._modelData&&this._modelData.viewModel.executeCommands(i,e)}createDecorationsCollection(e){return new Y(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,c.$C)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,c.$C)(this._configuration.options)):null}deltaDecorations(e,i){return this._modelData?0===e.length&&0===i.length?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((i=>{i.deltaDecorations(e,[])}))}removeDecorationsByType(e){const i=this._decorationTypeKeysToIds[e];i&&this.deltaDecorations(i,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(133)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}layoutContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const t=this._contentWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}removeContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const e=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}layoutOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const t=this._overlayWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}removeOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const e=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,i):null}getScrolledVisiblePosition(i){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(i),o=this._configuration.options,n=o.get(133);return{top:e._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+n.glyphMarginWidth+n.lineNumbersWidth+n.decorationsWidth-this.getScrollLeft(),height:o.get(61)}}getOffsetForColumn(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,i):-1}render(e=!1){this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,H.M)(e,this._configuration.options.get(46))}setBanner(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const i=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();const t=new y.J(this._id,this._configuration,e,V.K.create(),x.J.create(this._configuration.options),(e=>n.PG(e)),this.languageConfigurationService,this._themeService);i.push(e.onWillDispose((()=>this.setModel(null)))),i.push(t.onEvent((i=>{switch(i.kind){case 0:this._onDidContentSizeChange.fire(i);break;case 1:this._editorTextFocus.setValue(i.hasFocus);break;case 2:this._onDidScrollChange.fire(i);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{i.reachedMaxCursorCount&&this._notificationService.warn(o.kg("cursors.maximum","The number of cursors has been limited to {0}.",_._.MAX_CURSOR_COUNT));const e=[];for(let t=0,o=i.selections.length;t<o;t++)e[t]=i.selections[t].getPosition();const t={position:e[0],secondaryPositions:e.slice(1),reason:i.reason,source:i.source};this._onDidChangeCursorPosition.fire(t);const n={selection:i.selections[0],secondarySelections:i.selections.slice(1),modelVersionId:i.modelVersionId,oldSelections:i.oldSelections,oldModelVersionId:i.oldModelVersionId,source:i.source,reason:i.reason};this._onDidChangeCursorSelection.fire(n);break}case 7:this._onDidChangeModelDecorations.fire(i.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(i.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(i.event);break;case 10:this._onDidChangeModelContent.fire(i.event);break;case 11:this._onDidChangeModelOptions.fire(i.event);break;case 12:this._onDidChangeModelTokens.fire(i.event)}})));const[r,s]=this._createView(t);if(s){this._domElement.appendChild(r.domNode.domNode);let i=Object.keys(this._contentWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];r.addContentWidget(this._contentWidgets[t])}i=Object.keys(this._overlayWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];r.addOverlayWidget(this._overlayWidgets[t])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new B(e,t,r,s,i)}_createView(e){let i;i=this.isSimpleWidget?{paste:(e,i,t,o)=>{this._paste("keyboard",e,i,t,o)},type:e=>{this._type("keyboard",e)},compositionType:(e,i,t,o)=>{this._compositionType("keyboard",e,i,t,o)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,i,t,o)=>{const n={text:e,pasteOnNewLine:i,multicursorText:t,mode:o};this._commandService.executeCommand("paste",n)},type:e=>{const i={text:e};this._commandService.executeCommand("type",i)},compositionType:(e,i,t,o)=>{if(t||o){const n={text:e,replacePrevCharCnt:i,replaceNextCharCnt:t,positionDelta:o};this._commandService.executeCommand("compositionType",n)}else{const t={text:e,replaceCharCnt:i};this._commandService.executeCommand("replacePreviousChar",t)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const t=new m.o(e.coordinatesConverter);t.onKeyDown=e=>this._onKeyDown.fire(e),t.onKeyUp=e=>this._onKeyUp.fire(e),t.onContextMenu=e=>this._onContextMenu.fire(e),t.onMouseMove=e=>this._onMouseMove.fire(e),t.onMouseLeave=e=>this._onMouseLeave.fire(e),t.onMouseDown=e=>this._onMouseDown.fire(e),t.onMouseUp=e=>this._onMouseUp.fire(e),t.onMouseDrag=e=>this._onMouseDrag.fire(e),t.onMouseDrop=e=>this._onMouseDrop.fire(e),t.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),t.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new g.S(i,this._configuration,this._themeService.getColorTheme(),e,t,this._overflowWidgetsDomNode),!0]}_postDetachModelCleanup(e){null==e||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(i){const t=[{range:new p.Q(i.lineNumber,i.column,i.lineNumber,i.column),options:e.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(i,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}};$.dropIntoEditorDecorationOptions=E.kI.register({description:"workbench-dnd-target",className:"dnd-target"}),$=Q([A(3,I._Y),A(4,u.T),A(5,N.wT),A(6,R.fN),A(7,O.Gy),A(8,T.Ot),A(9,P.j),A(10,k.JZ),A(11,z.u)],$);class j extends a.jG{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new s.vl(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new s.vl(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const i=e?2:1;this._value!==i&&(this._value=i,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class K extends a.jG{constructor(e,i){super(),this._editor=e,i.createKey("editorId",e.getId()),this._editorSimpleInput=b.R.editorSimpleInput.bindTo(i),this._editorFocus=b.R.focus.bindTo(i),this._textInputFocus=b.R.textInputFocus.bindTo(i),this._editorTextFocus=b.R.editorTextFocus.bindTo(i),this._editorTabMovesFocus=b.R.tabMovesFocus.bindTo(i),this._editorReadonly=b.R.readOnly.bindTo(i),this._inDiffEditor=b.R.inDiffEditor.bindTo(i),this._editorColumnSelection=b.R.columnSelection.bindTo(i),this._hasMultipleSelections=b.R.hasMultipleSelections.bindTo(i),this._hasNonEmptySelection=b.R.hasNonEmptySelection.bindTo(i),this._canUndo=b.R.canUndo.bindTo(i),this._canRedo=b.R.canRedo.bindTo(i),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(132)),this._editorReadonly.set(e.get(83)),this._inDiffEditor.set(e.get(56)),this._editorColumnSelection.set(e.get(18))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class q extends a.jG{constructor(e,i,t){super(),this._editor=e,this._contextKeyService=i,this._languageFeaturesService=t,this._langId=b.R.languageId.bindTo(i),this._hasCompletionItemProvider=b.R.hasCompletionItemProvider.bindTo(i),this._hasCodeActionsProvider=b.R.hasCodeActionsProvider.bindTo(i),this._hasCodeLensProvider=b.R.hasCodeLensProvider.bindTo(i),this._hasDefinitionProvider=b.R.hasDefinitionProvider.bindTo(i),this._hasDeclarationProvider=b.R.hasDeclarationProvider.bindTo(i),this._hasImplementationProvider=b.R.hasImplementationProvider.bindTo(i),this._hasTypeDefinitionProvider=b.R.hasTypeDefinitionProvider.bindTo(i),this._hasHoverProvider=b.R.hasHoverProvider.bindTo(i),this._hasDocumentHighlightProvider=b.R.hasDocumentHighlightProvider.bindTo(i),this._hasDocumentSymbolProvider=b.R.hasDocumentSymbolProvider.bindTo(i),this._hasReferenceProvider=b.R.hasReferenceProvider.bindTo(i),this._hasRenameProvider=b.R.hasRenameProvider.bindTo(i),this._hasSignatureHelpProvider=b.R.hasSignatureHelpProvider.bindTo(i),this._hasInlayHintsProvider=b.R.hasInlayHintsProvider.bindTo(i),this._hasDocumentFormattingProvider=b.R.hasDocumentFormattingProvider.bindTo(i),this._hasDocumentSelectionFormattingProvider=b.R.hasDocumentSelectionFormattingProvider.bindTo(i),this._hasMultipleDocumentFormattingProvider=b.R.hasMultipleDocumentFormattingProvider.bindTo(i),this._hasMultipleDocumentSelectionFormattingProvider=b.R.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),this._isInWalkThrough=b.R.isInWalkThroughSnippet.bindTo(i);const o=()=>this._update();this._register(e.onDidChangeModel(o)),this._register(e.onDidChangeModelLanguage(o)),this._register(t.completionProvider.onDidChange(o)),this._register(t.codeActionProvider.onDidChange(o)),this._register(t.codeLensProvider.onDidChange(o)),this._register(t.definitionProvider.onDidChange(o)),this._register(t.declarationProvider.onDidChange(o)),this._register(t.implementationProvider.onDidChange(o)),this._register(t.typeDefinitionProvider.onDidChange(o)),this._register(t.hoverProvider.onDidChange(o)),this._register(t.documentHighlightProvider.onDidChange(o)),this._register(t.documentSymbolProvider.onDidChange(o)),this._register(t.referenceProvider.onDidChange(o)),this._register(t.renameProvider.onDidChange(o)),this._register(t.documentFormattingEditProvider.onDidChange(o)),this._register(t.documentRangeFormattingEditProvider.onDidChange(o)),this._register(t.signatureHelpProvider.onDidChange(o)),this._register(t.inlayHintsProvider.onDidChange(o)),o()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===d.ny.walkThroughSnippet)})):this.reset()}}class G extends a.jG{constructor(e){super(),this._onChange=this._register(new s.vl),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(n.w5(e)),this._register(this._domFocusTracker.onDidFocus((()=>{this._hasFocus=!0,this._onChange.fire(void 0)}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasFocus=!1,this._onChange.fire(void 0)})))}hasFocus(){return this._hasFocus}}class Y{constructor(e,i){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(i)&&i.length>0&&this.set(i)}get length(){return this._decorationIds.length}onDidChange(e,i,t){return this._editor.onDidChangeModelDecorations((t=>{this._isChangingDecorations||e.call(i,t)}),t)}getRange(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),i=[];for(const t of this._decorationIds){const o=e.getDecorationRange(t);o&&i.push(o)}return i}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations((i=>{this._decorationIds=i.deltaDecorations(this._decorationIds,e)}))}finally{this._isChangingDecorations=!1}}}const X=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),J=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function ee(e){return X+encodeURIComponent(e.toString())+J}const ie=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),te=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,O.zy)(((e,i)=>{const t=e.getColor(L.AN$);t&&i.addRule(`.monaco-editor .squiggly-error { border-bottom: 4px double ${t}; }`);const o=e.getColor(L.Rbi);o&&i.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${ee(o)}") repeat-x bottom left; }`);const n=e.getColor(L.Sj);n&&i.addRule(`.monaco-editor .squiggly-error::before { display: block; content: ''; width: 100%; height: 100%; background: ${n}; }`);const r=e.getColor(L.Stt);r&&i.addRule(`.monaco-editor .squiggly-warning { border-bottom: 4px double ${r}; }`);const s=e.getColor(L.Hng);s&&i.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${ee(s)}") repeat-x bottom left; }`);const a=e.getColor(L.whs);a&&i.addRule(`.monaco-editor .squiggly-warning::before { display: block; content: ''; width: 100%; height: 100%; background: ${a}; }`);const d=e.getColor(L.IIb);d&&i.addRule(`.monaco-editor .squiggly-info { border-bottom: 4px double ${d}; }`);const h=e.getColor(L.pOz);h&&i.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${ee(h)}") repeat-x bottom left; }`);const l=e.getColor(L.sDQ);l&&i.addRule(`.monaco-editor .squiggly-info::before { display: block; content: ''; width: 100%; height: 100%; background: ${l}; }`);const u=e.getColor(L.HWC);u&&i.addRule(`.monaco-editor .squiggly-hint { border-bottom: 2px dotted ${u}; }`);const g=e.getColor(L.i61);var m;g&&i.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${m=g,ie+encodeURIComponent(m.toString())+te}") no-repeat bottom left; }`);const c=e.getColor(S.yw);c&&i.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${c.rgba.a}; }`);const _=e.getColor(S.Ln);_&&i.addRule(`.monaco-editor.showUnused .squiggly-unnecessary { border-bottom: 2px dashed ${_}; }`);const f=e.getColor(L.By2)||"inherit";i.addRule(`.monaco-editor.showDeprecated .squiggly-inline-deprecated { text-decoration: line-through; text-decoration-color: ${f}}`)}))},98390:function(e,i,t){t.d(i,{T:function(){return X}});var o,n=t(3765),r=t(14333),s=t(87110),a=t(5043),d=t(86843),h=t(65958),l=t(2106),u=t(10998),g=t(48218),m=t(80878),c=t(87301),_=t(49084),f=t(42279),v=t(66476),p=t(15365),D=t(28061),C=t(54324),w=t(12596),b=t(20491),E=t(90304),S=t(96803),L=t(45561),y=t(39723),N=t(11608),R=t(96655),I=t(82399),M=t(30657),T=t(29879),O=t(4874),P=t(89044),W=t(52348),x=t(91144),V=t(3338),F=t(50946),k=t(94327),H=t(44023),z=t(5711),Q=t(26048),A=t(68107),U=t(11210),Z=t(89563),B=function(e,i,t,o){var n,r=arguments.length,s=r<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,i,t,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(i,t,s):n(i,t))||s);return r>3&&s&&Object.defineProperty(i,t,s),s},$=function(e,i){return function(t,o){i(t,o,e)}};class j{constructor(e,i){this._contextMenuService=e,this._clipboardService=i,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}getForeignViewZones(e){return e.filter((e=>!this._zonesMap[String(e.id)]))}clean(e){this._zones.length>0&&e.changeViewZones((e=>{for(const i of this._zones)e.removeZone(i)})),this._zones=[],this._zonesMap={},e.changeDecorations((e=>{this._decorations=e.deltaDecorations(this._decorations,[])}))}apply(e,i,t,o){const n=o?m.D.capture(e):null;e.changeViewZones((i=>{var o;for(const e of this._zones)i.removeZone(e);for(const e of this._inlineDiffMargins)e.dispose();this._zones=[],this._zonesMap={},this._inlineDiffMargins=[];for(let n=0,r=t.zones.length;n<r;n++){const r=t.zones[n];r.suppressMouseDown=!0;const s=i.addZone(r);this._zones.push(s),this._zonesMap[String(s)]=!0,t.zones[n].diff&&r.marginDomNode&&(r.suppressMouseDown=!1,0!==(null===(o=t.zones[n].diff)||void 0===o?void 0:o.originalModel.getValueLength())&&this._inlineDiffMargins.push(new x.n(s,r.marginDomNode,e,t.zones[n].diff,this._contextMenuService,this._clipboardService)))}})),null==n||n.restore(e),e.changeDecorations((e=>{this._decorations=e.deltaDecorations(this._decorations,t.decorations)})),null==i||i.setZones(t.overviewZones)}}let K=0;const q=(0,U.pU)("diff-insert",Q.W6.add,n.kg("diffInsertIcon","Line decoration for inserts in the diff editor.")),G=(0,U.pU)("diff-remove",Q.W6.remove,n.kg("diffRemoveIcon","Line decoration for removals in the diff editor.")),Y=null===(o=window.trustedTypes)||void 0===o?void 0:o.createPolicy("diffEditorWidget",{createHTML:e=>e});let X=class e extends u.jG{constructor(i,t,o,n,s,d,u,g,m,c,_,v){super(),this._editorProgressService=v,this._onDidDispose=this._register(new l.vl),this.onDidDispose=this._onDidDispose.event,this._onDidUpdateDiff=this._register(new l.vl),this.onDidUpdateDiff=this._onDidUpdateDiff.event,this._onDidContentSizeChange=this._register(new l.vl),this._lastOriginalWarning=null,this._lastModifiedWarning=null,this._editorWorkerService=s,this._codeEditorService=g,this._contextKeyService=this._register(d.createScoped(i)),this._instantiationService=u.createChild(new M.a([R.fN,this._contextKeyService])),this._contextKeyService.createKey("isInDiffEditor",!0),this._themeService=m,this._notificationService=c,this._id=++K,this._state=0,this._updatingDiffProgress=null,this._domElement=i,t=t||{},this._options=_e(t,{enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),void 0!==t.isInEmbeddedEditor?this._contextKeyService.createKey("isInEmbeddedDiffEditor",t.isInEmbeddedEditor):this._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),this._updateDecorationsRunner=this._register(new h.uC((()=>this._updateDecorations()),0)),this._containerDomElement=document.createElement("div"),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide),this._containerDomElement.style.position="relative",this._containerDomElement.style.height="100%",this._domElement.appendChild(this._containerDomElement),this._overviewViewportDomElement=(0,a.Z)(document.createElement("div")),this._overviewViewportDomElement.setClassName("diffViewport"),this._overviewViewportDomElement.setPosition("absolute"),this._overviewDomElement=document.createElement("div"),this._overviewDomElement.className="diffOverview",this._overviewDomElement.style.position="absolute",this._overviewDomElement.appendChild(this._overviewViewportDomElement.domNode),this._register(r.b2(this._overviewDomElement,r.Bx.POINTER_DOWN,(e=>{this._modifiedEditor.delegateVerticalScrollbarPointerDown(e)}))),this._options.renderOverviewRuler&&this._containerDomElement.appendChild(this._overviewDomElement),this._originalDomNode=document.createElement("div"),this._originalDomNode.className="editor original",this._originalDomNode.style.position="absolute",this._originalDomNode.style.height="100%",this._containerDomElement.appendChild(this._originalDomNode),this._modifiedDomNode=document.createElement("div"),this._modifiedDomNode.className="editor modified",this._modifiedDomNode.style.position="absolute",this._modifiedDomNode.style.height="100%",this._containerDomElement.appendChild(this._modifiedDomNode),this._beginUpdateDecorationsTimeout=-1,this._currentlyChangingViewZones=!1,this._diffComputationToken=0,this._originalEditorState=new j(_,n),this._modifiedEditorState=new j(_,n),this._isVisible=!0,this._isHandlingScrollEvent=!1,this._elementSizeObserver=this._register(new z.u(this._containerDomElement,t.dimension)),this._register(this._elementSizeObserver.onDidChange((()=>this._onDidContainerSizeChanged()))),t.automaticLayout&&this._elementSizeObserver.startObserving(),this._diffComputationResult=null,this._originalEditor=this._createLeftHandSideEditor(t,o.originalEditor||{}),this._modifiedEditor=this._createRightHandSideEditor(t,o.modifiedEditor||{}),this._originalOverviewRuler=null,this._modifiedOverviewRuler=null,this._reviewPane=u.createInstance(f.y,this),this._containerDomElement.appendChild(this._reviewPane.domNode.domNode),this._containerDomElement.appendChild(this._reviewPane.shadow.domNode),this._containerDomElement.appendChild(this._reviewPane.actionBarContainer.domNode),this._options.renderSideBySide?this._setStrategy(new ne(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new se(this._createDataSource(),this._options.enableSplitViewResizing)),this._register(m.onDidColorThemeChange((i=>{this._strategy&&this._strategy.applyColors(i)&&this._updateDecorationsRunner.schedule(),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)})));const p=F.dS.getDiffEditorContributions();for(const e of p)try{this._register(u.createInstance(e.ctor,this))}catch(e){(0,k.dz)(e)}this._codeEditorService.addDiffEditor(this)}_setState(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}diffReviewNext(){this._reviewPane.next()}diffReviewPrev(){this._reviewPane.prev()}static _getClassName(e,i){let t="monaco-diff-editor monaco-editor-background ";return i&&(t+="side-by-side "),t+=(0,P.Pz)(e.type),t}_disposeOverviewRulers(){this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose(),this._originalOverviewRuler=null),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose(),this._modifiedOverviewRuler=null)}_createOverviewRulers(){this._options.renderOverviewRuler&&(s.ok(!this._originalOverviewRuler&&!this._modifiedOverviewRuler),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}_createLeftHandSideEditor(i,t){const o=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(i),t);this._register(o.onDidScrollChange((e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((()=>{this._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((e=>{o.getModel()&&(e.hasChanged(46)&&this._updateDecorationsRunner.schedule(),e.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))}))),this._register(o.onDidChangeHiddenAreas((()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()}))),this._register(o.onDidChangeModelContent((()=>{this._isVisible&&this._beginUpdateDecorationsSoon()})));const n=this._contextKeyService.createKey("isInDiffLeftEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget((()=>n.set(!0)))),this._register(o.onDidBlurEditorWidget((()=>n.set(!1)))),this._register(o.onDidContentSizeChange((i=>{const t=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,o=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:o,contentWidth:t,contentHeightChanged:i.contentHeightChanged,contentWidthChanged:i.contentWidthChanged})}))),o}_createRightHandSideEditor(i,t){const o=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(i),t);this._register(o.onDidScrollChange((e=>{this._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(this._isHandlingScrollEvent=!0,this._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),this._isHandlingScrollEvent=!1,this._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((()=>{this._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((e=>{o.getModel()&&(e.hasChanged(46)&&this._updateDecorationsRunner.schedule(),e.hasChanged(134)&&(this._updateDecorationsRunner.cancel(),this._updateDecorations()))}))),this._register(o.onDidChangeHiddenAreas((()=>{this._updateDecorationsRunner.cancel(),this._updateDecorations()}))),this._register(o.onDidChangeModelContent((()=>{this._isVisible&&this._beginUpdateDecorationsSoon()}))),this._register(o.onDidChangeModelOptions((e=>{e.tabSize&&this._updateDecorationsRunner.schedule()})));const n=this._contextKeyService.createKey("isInDiffRightEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget((()=>n.set(!0)))),this._register(o.onDidBlurEditorWidget((()=>n.set(!1)))),this._register(o.onDidContentSizeChange((i=>{const t=this._originalEditor.getContentWidth()+this._modifiedEditor.getContentWidth()+e.ONE_OVERVIEW_WIDTH,o=Math.max(this._modifiedEditor.getContentHeight(),this._originalEditor.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:o,contentWidth:t,contentHeightChanged:i.contentHeightChanged,contentWidthChanged:i.contentWidthChanged})}))),this._register(o.onMouseDown((e=>{var i,t;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("arrow-revert-change"))){const i=e.target.position.lineNumber,o=null===(t=this._diffComputationResult)||void 0===t?void 0:t.changes.find((e=>e.modifiedStartLineNumber===i-1||e.modifiedStartLineNumber===i));return o&&this.revertChange(o),e.event.stopPropagation(),void this._updateDecorations()}}))),o}revertChange(e){const i=this._modifiedEditor,t=this._originalEditor.getModel(),o=this._modifiedEditor.getModel();if(!t||!o||!i)return;const n=e.originalEndLineNumber>0?new D.Q(e.originalStartLineNumber,1,e.originalEndLineNumber,t.getLineMaxColumn(e.originalEndLineNumber)):null,r=n?t.getValueInRange(n):null,s=e.modifiedEndLineNumber>0?new D.Q(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,o.getLineMaxColumn(e.modifiedEndLineNumber)):null,a=o.getEOL();if(0===e.originalEndLineNumber&&s){let t=s;e.modifiedStartLineNumber>1?t=s.setStartPosition(e.modifiedStartLineNumber-1,o.getLineMaxColumn(e.modifiedStartLineNumber-1)):e.modifiedEndLineNumber<o.getLineCount()&&(t=s.setEndPosition(e.modifiedEndLineNumber+1,1)),i.executeEdits("diffEditor",[{range:t,text:""}])}else if(0===e.modifiedEndLineNumber&&null!==r){const t=e.modifiedStartLineNumber<o.getLineCount()?new p.y(e.modifiedStartLineNumber+1,1):new p.y(e.modifiedStartLineNumber,o.getLineMaxColumn(e.modifiedStartLineNumber));i.executeEdits("diffEditor",[{range:D.Q.fromPositions(t,t),text:e.modifiedStartLineNumber<o.getLineCount()?r+a:a+r}])}else s&&null!==r&&i.executeEdits("diffEditor",[{range:s,text:r}])}_createInnerEditor(e,i,t,o){return e.createInstance(_.x,i,t,o)}dispose(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),super.dispose()}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return w._.IDiffEditor}getLineChanges(){return this._diffComputationResult?this._diffComputationResult.changes:null}getOriginalEditor(){return this._originalEditor}getModifiedEditor(){return this._modifiedEditor}updateOptions(i){const t=_e(i,this._options),o=(n=this._options,r=t,{enableSplitViewResizing:n.enableSplitViewResizing!==r.enableSplitViewResizing,renderSideBySide:n.renderSideBySide!==r.renderSideBySide,renderMarginRevertIcon:n.renderMarginRevertIcon!==r.renderMarginRevertIcon,maxComputationTime:n.maxComputationTime!==r.maxComputationTime,maxFileSize:n.maxFileSize!==r.maxFileSize,ignoreTrimWhitespace:n.ignoreTrimWhitespace!==r.ignoreTrimWhitespace,renderIndicators:n.renderIndicators!==r.renderIndicators,originalEditable:n.originalEditable!==r.originalEditable,diffCodeLens:n.diffCodeLens!==r.diffCodeLens,renderOverviewRuler:n.renderOverviewRuler!==r.renderOverviewRuler,diffWordWrap:n.diffWordWrap!==r.diffWordWrap});var n,r;this._options=t;const s=o.ignoreTrimWhitespace||o.renderIndicators||o.renderMarginRevertIcon,a=this._isVisible&&(o.maxComputationTime||o.maxFileSize);s?this._beginUpdateDecorations():a&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(i)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(i)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),o.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new ne(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new se(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=e._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),o.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}getModel(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}setModel(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._disposeOverviewRulers(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._createOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}getContainerDomNode(){return this._domElement}getVisibleColumnFromPosition(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._modifiedEditor.getPosition()}setPosition(e,i="api"){this._modifiedEditor.setPosition(e,i)}revealLine(e,i=0){this._modifiedEditor.revealLine(e,i)}revealLineInCenter(e,i=0){this._modifiedEditor.revealLineInCenter(e,i)}revealLineInCenterIfOutsideViewport(e,i=0){this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,i)}revealLineNearTop(e,i=0){this._modifiedEditor.revealLineNearTop(e,i)}revealPosition(e,i=0){this._modifiedEditor.revealPosition(e,i)}revealPositionInCenter(e,i=0){this._modifiedEditor.revealPositionInCenter(e,i)}revealPositionInCenterIfOutsideViewport(e,i=0){this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,i)}revealPositionNearTop(e,i=0){this._modifiedEditor.revealPositionNearTop(e,i)}getSelection(){return this._modifiedEditor.getSelection()}getSelections(){return this._modifiedEditor.getSelections()}setSelection(e,i="api"){this._modifiedEditor.setSelection(e,i)}setSelections(e,i="api"){this._modifiedEditor.setSelections(e,i)}revealLines(e,i,t=0){this._modifiedEditor.revealLines(e,i,t)}revealLinesInCenter(e,i,t=0){this._modifiedEditor.revealLinesInCenter(e,i,t)}revealLinesInCenterIfOutsideViewport(e,i,t=0){this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}revealLinesNearTop(e,i,t=0){this._modifiedEditor.revealLinesNearTop(e,i,t)}revealRange(e,i=0,t=!1,o=!0){this._modifiedEditor.revealRange(e,i,t,o)}revealRangeInCenter(e,i=0){this._modifiedEditor.revealRangeInCenter(e,i)}revealRangeInCenterIfOutsideViewport(e,i=0){this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,i)}revealRangeNearTop(e,i=0){this._modifiedEditor.revealRangeNearTop(e,i)}revealRangeNearTopIfOutsideViewport(e,i=0){this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,i)}revealRangeAtTop(e,i=0){this._modifiedEditor.revealRangeAtTop(e,i)}getSupportedActions(){return this._modifiedEditor.getSupportedActions()}saveViewState(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}restoreViewState(e){if(e&&e.original&&e.modified){const i=e;this._originalEditor.restoreViewState(i.original),this._modifiedEditor.restoreViewState(i.modified)}}layout(e){this._elementSizeObserver.observe(e)}focus(){this._modifiedEditor.focus()}hasTextFocus(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}trigger(e,i,t){this._modifiedEditor.trigger(e,i,t)}createDecorationsCollection(e){return this._modifiedEditor.createDecorationsCollection(e)}changeDecorations(e){return this._modifiedEditor.changeDecorations(e)}_onDidContainerSizeChanged(){this._doLayout()}_getReviewHeight(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}_layoutOverviewRulers(){if(!this._options.renderOverviewRuler)return;if(!this._originalOverviewRuler||!this._modifiedOverviewRuler)return;const i=this._elementSizeObserver.getHeight(),t=this._getReviewHeight(),o=e.ENTIRE_DIFF_OVERVIEW_WIDTH-2*e.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:e.ONE_OVERVIEW_WIDTH,right:o+e.ONE_OVERVIEW_WIDTH,height:i-t}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:e.ONE_OVERVIEW_WIDTH,height:i-t}))}_onViewZonesChanged(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}_beginUpdateDecorationsSoon(){-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout((()=>this._beginUpdateDecorations()),e.UPDATE_DIFF_DECORATIONS_DELAY)}static _equals(e,i){return!e&&!i||!(!e||!i)&&e.toString()===i.toString()}_beginUpdateDecorations(){this._beginUpdateDecorationsTimeout=-1;const i=this._originalEditor.getModel(),t=this._modifiedEditor.getModel();if(!i||!t)return;this._diffComputationToken++;const o=this._diffComputationToken,r=1024*this._options.maxFileSize*1024,s=e=>{const i=e.getValueLength();return 0===r||i<=r};s(i)&&s(t)?(this._setState(1),this._editorWorkerService.computeDiff(i.uri,t.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then((e=>{o===this._diffComputationToken&&i===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=e,this._updateDecorationsRunner.schedule(),this._onDidUpdateDiff.fire())}),(e=>{o===this._diffComputationToken&&i===this._originalEditor.getModel()&&t===this._modifiedEditor.getModel()&&(this._setState(2),this._diffComputationResult=null,this._updateDecorationsRunner.schedule())}))):e._equals(i.uri,this._lastOriginalWarning)&&e._equals(t.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=i.uri,this._lastModifiedWarning=t.uri,this._notificationService.warn(n.kg("diff.tooLarge","Cannot compare files because one file is too large.")))}_cleanViewZonesAndDecorations(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}_updateDecorations(){if(!this._originalEditor.getModel()||!this._modifiedEditor.getModel())return;const e=this._diffComputationResult?this._diffComputationResult.changes:[],i=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),t=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),o=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,this._options.renderMarginRevertIcon,i,t);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,o.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,o.modified,!0)}finally{this._currentlyChangingViewZones=!1}}_adjustOptionsForSubEditor(e){const i=Object.assign({},e);return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar=Object.assign({},i.scrollbar||{}),i.scrollbar.vertical="visible",i.folding=!1,i.codeLens=this._options.diffCodeLens,i.fixedOverflowWidgets=!0,i.minimap=Object.assign({},i.minimap||{}),i.minimap.enabled=!1,i}_adjustOptionsForLeftHandSide(e){const i=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?i.wordWrapOverride1=this._options.diffWordWrap:(i.wordWrapOverride1="off",i.wordWrapOverride2="off"),e.originalAriaLabel&&(i.ariaLabel=e.originalAriaLabel),i.readOnly=!this._options.originalEditable,i.dropIntoEditor={enabled:!i.readOnly},i.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}_adjustOptionsForRightHandSide(i){const t=this._adjustOptionsForSubEditor(i);return i.modifiedAriaLabel&&(t.ariaLabel=i.modifiedAriaLabel),t.wordWrapOverride1=this._options.diffWordWrap,t.revealHorizontalRightPadding=v.qB.revealHorizontalRightPadding.defaultValue+e.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},t),{dimension:{height:0,width:0}})}doLayout(){this._elementSizeObserver.observe(),this._doLayout()}_doLayout(){const i=this._elementSizeObserver.getWidth(),t=this._elementSizeObserver.getHeight(),o=this._getReviewHeight(),n=this._strategy.layout();this._originalDomNode.style.width=n+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=i-n+"px",this._modifiedDomNode.style.left=n+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=t-o+"px",this._overviewDomElement.style.width=e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=i-e.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(e.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:n,height:t-o}),this._modifiedEditor.layout({width:i-n-(this._options.renderOverviewRuler?e.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:t-o}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(t-o,i,o),this._layoutOverviewViewport()}_layoutOverviewViewport(){const e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}_computeOverviewViewport(){const e=this._modifiedEditor.getLayoutInfo();if(!e)return null;const i=this._modifiedEditor.getScrollTop(),t=this._modifiedEditor.getScrollHeight(),o=Math.max(0,e.height),n=Math.max(0,o-0),r=t>0?n/t:0;return{height:Math.max(0,Math.floor(e.height*r)),top:Math.floor(i*r)}}_createDataSource(){return{getWidth:()=>this._elementSizeObserver.getWidth(),getHeight:()=>this._elementSizeObserver.getHeight()-this._getReviewHeight(),getOptions:()=>({renderOverviewRuler:this._options.renderOverviewRuler}),getContainerDomNode:()=>this._containerDomElement,relayoutEditors:()=>{this._doLayout()},getOriginalEditor:()=>this._originalEditor,getModifiedEditor:()=>this._modifiedEditor}}_setStrategy(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}_getLineChangeAtOrBeforeLineNumber(e,i){const t=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===t.length||e<i(t[0]))return null;let o=0,n=t.length-1;for(;o<n;){const r=Math.floor((o+n)/2),s=i(t[r]),a=r+1<=n?i(t[r+1]):1073741824;e<s?n=r-1:e>=a?o=r+1:(o=r,n=r)}return t[o]}_getEquivalentLineForOriginalLineNumber(e){const i=this._getLineChangeAtOrBeforeLineNumber(e,(e=>e.originalStartLineNumber));if(!i)return e;const t=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),o=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),n=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,r=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,s=e-t;return s<=n?o+Math.min(s,r):o+r-n+s}_getEquivalentLineForModifiedLineNumber(e){const i=this._getLineChangeAtOrBeforeLineNumber(e,(e=>e.modifiedStartLineNumber));if(!i)return e;const t=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),o=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),n=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,r=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,s=e-o;return s<=r?t+Math.min(s,n):t+n-r+s}getDiffLineInformationForOriginal(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}getDiffLineInformationForModified(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}};X.ONE_OVERVIEW_WIDTH=15,X.ENTIRE_DIFF_OVERVIEW_WIDTH=30,X.UPDATE_DIFF_DECORATIONS_DELAY=200,X=B([$(3,V.h),$(4,E.w),$(5,R.fN),$(6,I._Y),$(7,c.T),$(8,P.Gy),$(9,T.Ot),$(10,W.Z),$(11,H.N8)],X);class J extends u.jG{constructor(e){super(),this._dataSource=e,this._insertColor=null,this._removeColor=null}applyColors(e){const i=e.getColor(O.ld8)||(e.getColor(O.Gj6)||O.EY1).transparent(2),t=e.getColor(O.$BZ)||(e.getColor(O.GNm)||O.ZEf).transparent(2),o=!i.equals(this._insertColor)||!t.equals(this._removeColor);return this._insertColor=i,this._removeColor=t,o}getEditorsDiffDecorations(e,i,t,o,n,r){r=r.sort(((e,i)=>e.afterLineNumber-i.afterLineNumber)),n=n.sort(((e,i)=>e.afterLineNumber-i.afterLineNumber));const s=this._getViewZones(e,n,r,t),a=this._getOriginalEditorDecorations(s,e,i,t),d=this._getModifiedEditorDecorations(s,e,i,t,o);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:s.original},modified:{decorations:d.decorations,overviewZones:d.overviewZones,zones:s.modified}}}}class ee{constructor(e){this._source=e,this._index=-1,this.current=null,this.advance()}advance(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}class ie{constructor(e,i,t,o,n){this._lineChanges=e,this._originalForeignVZ=i,this._modifiedForeignVZ=t,this._originalEditor=o,this._modifiedEditor=n}static _getViewLineCount(e,i,t){const o=e.getModel(),n=e._getViewModel();if(o&&n){const e=ce(o,n,i,t);return e.endLineNumber-e.startLineNumber+1}return t-i+1}getViewZones(){const e=this._originalEditor.getOption(61),i=this._modifiedEditor.getOption(61),t=-1!==this._originalEditor.getOption(134).wrappingColumn,o=-1!==this._modifiedEditor.getOption(134).wrappingColumn,n=t||o,r=this._originalEditor.getModel(),s=this._originalEditor._getViewModel().coordinatesConverter,a=this._modifiedEditor._getViewModel().coordinatesConverter,d=[],h=[];let l=0,u=0,g=0,m=0,c=0,_=0;const f=(e,i)=>e.afterLineNumber-i.afterLineNumber,v=(e,i)=>{if(null===i.domNode&&e.length>0){const t=e[e.length-1];if(t.afterLineNumber===i.afterLineNumber&&null===t.domNode)return void(t.heightInLines+=i.heightInLines)}e.push(i)},p=new ee(this._modifiedForeignVZ),D=new ee(this._originalForeignVZ);let C=1,w=1;for(let t=0,o=this._lineChanges.length;t<=o;t++){const b=t<o?this._lineChanges[t]:null;null!==b?(g=b.originalStartLineNumber+(b.originalEndLineNumber>0?-1:0),m=b.modifiedStartLineNumber+(b.modifiedEndLineNumber>0?-1:0),u=b.originalEndLineNumber>0?ie._getViewLineCount(this._originalEditor,b.originalStartLineNumber,b.originalEndLineNumber):0,l=b.modifiedEndLineNumber>0?ie._getViewLineCount(this._modifiedEditor,b.modifiedStartLineNumber,b.modifiedEndLineNumber):0,c=Math.max(b.originalStartLineNumber,b.originalEndLineNumber),_=Math.max(b.modifiedStartLineNumber,b.modifiedEndLineNumber)):(g+=1e7+u,m+=1e7+l,c=g,_=m);let E=[],S=[];if(n){let e;e=b?b.originalEndLineNumber>0?b.originalStartLineNumber-C:b.modifiedStartLineNumber-w:r.getLineCount()-C+1;for(let i=0;i<e;i++){const e=C+i,t=w+i,o=s.getModelLineViewLineCount(e),n=a.getModelLineViewLineCount(t);o<n?E.push({afterLineNumber:e,heightInLines:n-o,domNode:null,marginDomNode:null}):o>n&&S.push({afterLineNumber:t,heightInLines:o-n,domNode:null,marginDomNode:null})}b&&(C=(b.originalEndLineNumber>0?b.originalEndLineNumber:b.originalStartLineNumber)+1,w=(b.modifiedEndLineNumber>0?b.modifiedEndLineNumber:b.modifiedStartLineNumber)+1)}for(;p.current&&p.current.afterLineNumber<=_;){let e;e=p.current.afterLineNumber<=m?g-m+p.current.afterLineNumber:c;let t=null;b&&b.modifiedStartLineNumber<=p.current.afterLineNumber&&p.current.afterLineNumber<=b.modifiedEndLineNumber&&(t=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),E.push({afterLineNumber:e,heightInLines:p.current.height/i,domNode:null,marginDomNode:t}),p.advance()}for(;D.current&&D.current.afterLineNumber<=c;){let i;i=D.current.afterLineNumber<=g?m-g+D.current.afterLineNumber:_,S.push({afterLineNumber:i,heightInLines:D.current.height/e,domNode:null}),D.advance()}if(null!==b&&de(b)){const e=this._produceOriginalFromDiff(b,u,l);e&&E.push(e)}if(null!==b&&he(b)){const e=this._produceModifiedFromDiff(b,u,l);e&&S.push(e)}let L=0,y=0;for(E=E.sort(f),S=S.sort(f);L<E.length&&y<S.length;){const e=E[L],i=S[y],t=e.afterLineNumber-g,o=i.afterLineNumber-m;t<o?(v(d,e),L++):o<t?(v(h,i),y++):e.shouldNotShrink?(v(d,e),L++):i.shouldNotShrink?(v(h,i),y++):e.heightInLines>=i.heightInLines?(e.heightInLines-=i.heightInLines,y++):(i.heightInLines-=e.heightInLines,L++)}for(;L<E.length;)v(d,E[L]),L++;for(;y<S.length;)v(h,S[y]),y++}return{original:ie._ensureDomNodes(d),modified:ie._ensureDomNodes(h)}}static _ensureDomNodes(e){return e.map((e=>(e.domNode||(e.domNode=ge()),e)))}}function te(e,i,t,o,n){return{range:new D.Q(e,i,t,o),options:n}}const oe={arrowRevertChange:b.kI.register({description:"diff-editor-arrow-revert-change",glyphMarginClassName:"arrow-revert-change "+P.L0.asClassName(Q.W6.arrowRight)}),charDelete:b.kI.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:b.kI.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:b.kI.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:b.kI.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:b.kI.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"gutter-insert",isWholeLine:!0}),lineInsertWithSign:b.kI.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+P.L0.asClassName(q),marginClassName:"gutter-insert",isWholeLine:!0}),lineDelete:b.kI.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteWithSign:b.kI.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+P.L0.asClassName(G),marginClassName:"gutter-delete",isWholeLine:!0}),lineDeleteMargin:b.kI.register({description:"diff-editor-line-delete-margin",marginClassName:"gutter-delete"})};class ne extends J{constructor(e,i){super(e),this._disableSash=!1===i,this._sashRatio=null,this._sashPosition=null,this._startSashPosition=null,this._sash=this._register(new d.m(this._dataSource.getContainerDomNode(),this,{orientation:0})),this._disableSash&&(this._sash.state=0),this._sash.onDidStart((()=>this._onSashDragStart())),this._sash.onDidChange((e=>this._onSashDrag(e))),this._sash.onDidEnd((()=>this._onSashDragEnd())),this._sash.onDidReset((()=>this._onSashReset()))}setEnableSplitViewResizing(e){const i=!1===e;this._disableSash!==i&&(this._disableSash=i,this._sash.state=this._disableSash?0:3)}layout(e=this._sashRatio){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?X.ENTIRE_DIFF_OVERVIEW_WIDTH:0);let t=Math.floor((e||.5)*i);const o=Math.floor(.5*i);return t=this._disableSash?o:t||o,i>2*ne.MINIMUM_EDITOR_WIDTH?(t<ne.MINIMUM_EDITOR_WIDTH&&(t=ne.MINIMUM_EDITOR_WIDTH),t>i-ne.MINIMUM_EDITOR_WIDTH&&(t=i-ne.MINIMUM_EDITOR_WIDTH)):t=o,this._sashPosition!==t&&(this._sashPosition=t),this._sash.layout(),this._sashPosition}_onSashDragStart(){this._startSashPosition=this._sashPosition}_onSashDrag(e){const i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?X.ENTIRE_DIFF_OVERVIEW_WIDTH:0),t=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=t/i,this._dataSource.relayoutEditors()}_onSashDragEnd(){this._sash.layout()}_onSashReset(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}getVerticalSashTop(e){return 0}getVerticalSashLeft(e){return this._sashPosition}getVerticalSashHeight(e){return this._dataSource.getHeight()}_getViewZones(e,i,t){const o=this._dataSource.getOriginalEditor(),n=this._dataSource.getModifiedEditor();return new re(e,i,t,o,n).getViewZones()}_getOriginalEditorDecorations(e,i,t,o){const n=this._dataSource.getOriginalEditor(),r=String(this._removeColor),s={decorations:[],overviewZones:[]},a=n.getModel(),d=n._getViewModel();for(const e of i)if(he(e)){s.decorations.push({range:new D.Q(e.originalStartLineNumber,1,e.originalEndLineNumber,1073741824),options:o?oe.lineDeleteWithSign:oe.lineDelete}),de(e)&&e.charChanges||s.decorations.push(te(e.originalStartLineNumber,1,e.originalEndLineNumber,1073741824,oe.charDeleteWholeLine));const i=ce(a,d,e.originalStartLineNumber,e.originalEndLineNumber);if(s.overviewZones.push(new S.iE(i.startLineNumber,i.endLineNumber,0,r)),e.charChanges)for(const i of e.charChanges)if(ue(i))if(t)for(let e=i.originalStartLineNumber;e<=i.originalEndLineNumber;e++){let t,o;t=e===i.originalStartLineNumber?i.originalStartColumn:a.getLineFirstNonWhitespaceColumn(e),o=e===i.originalEndLineNumber?i.originalEndColumn:a.getLineLastNonWhitespaceColumn(e),s.decorations.push(te(e,t,e,o,oe.charDelete))}else s.decorations.push(te(i.originalStartLineNumber,i.originalStartColumn,i.originalEndLineNumber,i.originalEndColumn,oe.charDelete))}return s}_getModifiedEditorDecorations(e,i,t,o,n){const r=this._dataSource.getModifiedEditor(),s=String(this._insertColor),a={decorations:[],overviewZones:[]},d=r.getModel(),h=r._getViewModel();for(const r of i){if(n)if(r.modifiedEndLineNumber>0)a.decorations.push({range:new D.Q(r.modifiedStartLineNumber,1,r.modifiedStartLineNumber,1),options:oe.arrowRevertChange});else{const i=e.modified.find((e=>e.afterLineNumber===r.modifiedStartLineNumber));i&&(i.marginDomNode=me())}if(de(r)){a.decorations.push({range:new D.Q(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,1073741824),options:o?oe.lineInsertWithSign:oe.lineInsert}),he(r)&&r.charChanges||a.decorations.push(te(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,1073741824,oe.charInsertWholeLine));const e=ce(d,h,r.modifiedStartLineNumber,r.modifiedEndLineNumber);if(a.overviewZones.push(new S.iE(e.startLineNumber,e.endLineNumber,0,s)),r.charChanges)for(const e of r.charChanges)if(le(e))if(t)for(let i=e.modifiedStartLineNumber;i<=e.modifiedEndLineNumber;i++){let t,o;t=i===e.modifiedStartLineNumber?e.modifiedStartColumn:d.getLineFirstNonWhitespaceColumn(i),o=i===e.modifiedEndLineNumber?e.modifiedEndColumn:d.getLineLastNonWhitespaceColumn(i),a.decorations.push(te(i,t,i,o,oe.charInsert))}else a.decorations.push(te(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn,oe.charInsert))}}return a}}ne.MINIMUM_EDITOR_WIDTH=100;class re extends ie{constructor(e,i,t,o,n){super(e,i,t,o,n)}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){return null}_produceOriginalFromDiff(e,i,t){return t>i?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:t-i,domNode:null}:null}_produceModifiedFromDiff(e,i,t){return i>t?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:i-t,domNode:null}:null}}class se extends J{constructor(e,i){super(e),this._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,this._register(e.getOriginalEditor().onDidLayoutChange((i=>{this._decorationsLeft!==i.decorationsLeft&&(this._decorationsLeft=i.decorationsLeft,e.relayoutEditors())})))}setEnableSplitViewResizing(e){}_getViewZones(e,i,t,o){const n=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new ae(e,i,t,n,r,o).getViewZones()}_getOriginalEditorDecorations(e,i,t,o){const n=String(this._removeColor),r={decorations:[],overviewZones:[]},s=this._dataSource.getOriginalEditor(),a=s.getModel(),d=s._getViewModel();let h=0;for(const t of i)if(he(t)){for(r.decorations.push({range:new D.Q(t.originalStartLineNumber,1,t.originalEndLineNumber,1073741824),options:oe.lineDeleteMargin});h<e.modified.length;){const i=e.modified[h];if(i.diff&&i.diff.originalStartLineNumber>=t.originalStartLineNumber)break;h++}let i=0;if(h<e.modified.length){const o=e.modified[h];o.diff&&o.diff.originalStartLineNumber===t.originalStartLineNumber&&o.diff.originalEndLineNumber===t.originalEndLineNumber&&o.diff.modifiedStartLineNumber===t.modifiedStartLineNumber&&o.diff.modifiedEndLineNumber===t.modifiedEndLineNumber&&(i=o.heightInLines)}const o=ce(a,d,t.originalStartLineNumber,t.originalEndLineNumber);r.overviewZones.push(new S.iE(o.startLineNumber,o.endLineNumber,i,n))}return r}_getModifiedEditorDecorations(e,i,t,o,n){const r=this._dataSource.getModifiedEditor(),s=String(this._insertColor),a={decorations:[],overviewZones:[]},d=r.getModel(),h=r._getViewModel();for(const e of i)if(de(e)){a.decorations.push({range:new D.Q(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,1073741824),options:o?oe.lineInsertWithSign:oe.lineInsert});const i=ce(d,h,e.modifiedStartLineNumber,e.modifiedEndLineNumber);if(a.overviewZones.push(new S.iE(i.startLineNumber,i.endLineNumber,0,s)),e.charChanges){for(const i of e.charChanges)if(le(i))if(t)for(let e=i.modifiedStartLineNumber;e<=i.modifiedEndLineNumber;e++){let t,o;t=e===i.modifiedStartLineNumber?i.modifiedStartColumn:d.getLineFirstNonWhitespaceColumn(e),o=e===i.modifiedEndLineNumber?i.modifiedEndColumn:d.getLineLastNonWhitespaceColumn(e),a.decorations.push(te(e,t,e,o,oe.charInsert))}else a.decorations.push(te(i.modifiedStartLineNumber,i.modifiedStartColumn,i.modifiedEndLineNumber,i.modifiedEndColumn,oe.charInsert))}else a.decorations.push(te(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber,1073741824,oe.charInsertWholeLine))}return a}layout(){return Math.max(5,this._decorationsLeft)}}class ae extends ie{constructor(e,i,t,o,n,r){super(e,i,t,o,n),this._originalModel=o.getModel(),this._renderIndicators=r,this._pendingLineChange=[],this._pendingViewZones=[],this._lineBreaksComputer=this._modifiedEditor._getViewModel().createLineBreaksComputer()}getViewZones(){const e=super.getViewZones();return this._finalize(e),e}_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion(){const e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}_produceOriginalFromDiff(e,i,t){const o=document.createElement("div");return o.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:t,domNode:document.createElement("div"),marginDomNode:o}}_produceModifiedFromDiff(e,i,t){const o=document.createElement("div");o.className=`view-lines line-delete ${A.S}`;const n=document.createElement("div");n.className="inline-deleted-margin-view-zone";const r={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:i,minWidthInPx:0,domNode:o,marginDomNode:n,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}};for(let i=e.originalStartLineNumber;i<=e.originalEndLineNumber;i++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(i),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}_finalize(e){const i=this._modifiedEditor.getOptions(),t=this._modifiedEditor.getModel().getOptions().tabSize,o=i.get(46),n=i.get(29),r=o.typicalHalfwidthCharacterWidth,s=i.get(95),a=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),h=i.get(61),l=i.get(133).decorationsWidth,u=i.get(107),m=i.get(90),c=i.get(85),_=i.get(47),f=this._lineBreaksComputer.finalize();let v=0;for(let i=0;i<this._pendingLineChange.length;i++){const p=this._pendingLineChange[i],w=this._pendingViewZones[i],b=w.domNode;(0,g.M)(b,o);const E=w.marginDomNode;(0,g.M)(E,o);const S=[];if(p.charChanges)for(const e of p.charChanges)ue(e)&&S.push(new N.kI(new D.Q(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),"char-delete",0));const y=S.length>0,R=(0,C.Du)(1e4);let I=0,M=0,T=null;for(let i=p.originalStartLineNumber;i<=p.originalEndLineNumber;i++){const r=i-p.originalStartLineNumber,s=this._originalModel.tokenization.getLineTokens(i),g=s.getLineContent(),D=f[v++],C=L.d.filter(S,i,1,g.length+1);if(D){let f=0;for(const e of D.breakOffsets){const i=s.sliceAndInflate(f,e,0),r=g.substring(f,e);I=Math.max(I,this._renderOriginalLine(M++,r,i,L.d.extractWrapped(C,f,e),y,a,d,o,n,h,l,u,m,c,_,t,R,E)),f=e}for(T||(T=[]);T.length<r;)T[T.length]=1;T[r]=D.breakOffsets.length,w.heightInLines+=D.breakOffsets.length-1;const v=document.createElement("div");v.className="gutter-delete",e.original.push({afterLineNumber:i,afterColumn:0,heightInLines:D.breakOffsets.length-1,domNode:ge(),marginDomNode:v})}else I=Math.max(I,this._renderOriginalLine(M++,g,s,C,y,a,d,o,n,h,l,u,m,c,_,t,R,E))}I+=s;const O=R.build(),P=Y?Y.createHTML(O):O;if(b.innerHTML=P,w.minWidthInPx=I*r,T){const e=p.originalEndLineNumber-p.originalStartLineNumber;for(;T.length<=e;)T[T.length]=1}w.diff.viewLineCounts=T}e.original.sort(((e,i)=>e.afterLineNumber-i.afterLineNumber))}_renderOriginalLine(e,i,t,o,n,r,s,a,d,h,l,u,g,m,c,_,f,p){f.appendASCIIString('<div class="view-line'),n||f.appendASCIIString(" char-delete"),f.appendASCIIString('" style="top:'),f.appendASCIIString(String(e*h)),f.appendASCIIString('px;width:1000000px;">');const D=N.qL.isBasicASCII(i,r),C=N.qL.containsRTL(i,D,s),w=(0,y.UW)(new y.zL(a.isMonospace&&!d,a.canUseHalfwidthRightwardsArrow,i,!1,D,C,0,t,o,_,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,u,g,m,c!==v.Bc.OFF,null),f);if(f.appendASCIIString("</div>"),this._renderIndicators){const i=document.createElement("div");i.className=`delete-sign ${P.L0.asClassName(G)}`,i.setAttribute("style",`position:absolute;top:${e*h}px;width:${l}px;height:${h}px;right:0;`),p.appendChild(i)}return w.characterMapping.getHorizontalOffset(w.characterMapping.length)}}function de(e){return e.modifiedEndLineNumber>0}function he(e){return e.originalEndLineNumber>0}function le(e){return e.modifiedStartLineNumber===e.modifiedEndLineNumber?e.modifiedEndColumn-e.modifiedStartColumn>0:e.modifiedEndLineNumber-e.modifiedStartLineNumber>0}function ue(e){return e.originalStartLineNumber===e.originalEndLineNumber?e.originalEndColumn-e.originalStartColumn>0:e.originalEndLineNumber-e.originalStartLineNumber>0}function ge(){const e=document.createElement("div");return e.className="diagonal-fill",e}function me(){const e=document.createElement("div");return e.className="arrow-revert-change "+P.L0.asClassName(Q.W6.arrowRight),r.$("div",{},e)}function ce(e,i,t,o){const n=e.getLineCount();return t=Math.min(n,Math.max(1,t)),o=Math.min(n,Math.max(1,o)),i.coordinatesConverter.convertModelRangeToViewRange(new D.Q(t,e.getLineMinColumn(t),o,e.getLineMaxColumn(o)))}function _e(e,i){return{enableSplitViewResizing:(0,v.zM)(e.enableSplitViewResizing,i.enableSplitViewResizing),renderSideBySide:(0,v.zM)(e.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,v.zM)(e.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,v.wA)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,v.wA)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,v.zM)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,v.zM)(e.renderIndicators,i.renderIndicators),originalEditable:(0,v.zM)(e.originalEditable,i.originalEditable),diffCodeLens:(0,v.zM)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,v.zM)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(t=e.diffWordWrap,o=i.diffWordWrap,(0,v.O4)(t,o,["off","on","inherit"]))};var t,o}(0,P.zy)(((e,i)=>{const t=e.getColor(O.Gj6);t&&i.addRule(`.monaco-editor .char-insert, .monaco-diff-editor .char-insert { background-color: ${t}; }`);const o=e.getColor(O.w3w)||t;o&&i.addRule(`.monaco-editor .line-insert, .monaco-diff-editor .line-insert { background-color: ${o}; }`);const n=e.getColor(O.NXK)||o;n&&(i.addRule(`.monaco-editor .inline-added-margin-view-zone { background-color: ${n}; }`),i.addRule(`.monaco-editor .gutter-insert, .monaco-diff-editor .gutter-insert { background-color: ${n}; }`));const r=e.getColor(O.GNm);r&&i.addRule(`.monaco-editor .char-delete, .monaco-diff-editor .char-delete { background-color: ${r}; }`);const s=e.getColor(O.MHP)||r;s&&i.addRule(`.monaco-editor .line-delete, .monaco-diff-editor .line-delete { background-color: ${s}; }`);const a=e.getColor(O.$Qy)||s;a&&(i.addRule(`.monaco-editor .inline-deleted-margin-view-zone { background-color: ${a}; }`),i.addRule(`.monaco-editor .gutter-delete, .monaco-diff-editor .gutter-delete { background-color: ${a}; }`));const d=e.getColor(O.YZM);d&&i.addRule(`.monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ${(0,Z.Bb)(e.type)?"dashed":"solid"} ${d}; }`);const h=e.getColor(O.qaw);h&&i.addRule(`.monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ${(0,Z.Bb)(e.type)?"dashed":"solid"} ${h}; }`);const l=e.getColor(O.bXl);l&&i.addRule(`.monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ${l}; }`);const u=e.getColor(O.w3C);u&&i.addRule(`.monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ${u}; }`);const g=e.getColor(O.gnV);g&&i.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ${g};\n\t\t\t}\n\t\t`);const m=e.getColor(O.cI_);m&&i.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ${m};\n\t\t\t}\n\t\t`);const c=e.getColor(O.mhZ);c&&i.addRule(`\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ${c};\n\t\t\t}\n\t\t`);const _=e.getColor(O.WmU);i.addRule(`\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${_} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${_} 50%, ${_} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`)}))},16878:function(e,i,t){t.d(i,{b:function(){return h}});var o=t(87110),n=t(2106),r=t(10998),s=t(71386),a=t(28061);const d={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class h extends r.jG{constructor(e,i={}){super(),this._onDidUpdate=this._register(new n.vl),this._editor=e,this._options=s.co(i,d,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose((()=>this.dispose()))),this._register(this._editor.onDidUpdateDiff((()=>this._onDiffUpdated()))),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition((e=>{this.ignoreSelectionChange||(this.nextIdx=-1)}))),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel((e=>{this.revealFirst=!0}))),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach((e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((e=>{this.ranges.push({rhs:!0,range:new a.Q(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):0===e.modifiedEndLineNumber?this.ranges.push({rhs:!0,range:new a.Q(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new a.Q(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})})),this.ranges.sort(((e,i)=>a.Q.compareRangesUsingStarts(e.range,i.range))),this._onDidUpdate.fire(this)}_initIdx(e){let i=!1;const t=this._editor.getPosition();if(t){for(let o=0,n=this.ranges.length;o<n&&!i;o++){const n=this.ranges[o].range;t.isBeforeOrEqual(n.getStartPosition())&&(this.nextIdx=o+(e?0:-1),i=!0)}i||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(e,i){if(o.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const t=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const e=t.range.getStartPosition();this._editor.setPosition(e),this._editor.revealRangeInCenter(t.range,i)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}}}]);
