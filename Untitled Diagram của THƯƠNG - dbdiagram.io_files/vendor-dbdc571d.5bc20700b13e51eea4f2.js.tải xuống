!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="29764d8c-8988-462f-9985-7a935a6cdb60",e._sentryDebugIdIdentifier="sentry-dbid-29764d8c-8988-462f-9985-7a935a6cdb60")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"13ad4a0c312011ebb49f3e8dc8f97be809f60d04"},(self.webpackChunkschema_diagram_vue=self.webpackChunkschema_diagram_vue||[]).push([[360],{11950:function(e,t,n){n.d(t,{Zt:function(){return d}});var i=n(65958),o=n(78903),s=n(94327),r=n(50946),a=n(52230),c=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))};class h{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}function d(e,t,n,o){const r=e.ordered(t).map(((e,i)=>function(e,t,n,i,o){return c(this,void 0,void 0,(function*(){try{const s=yield Promise.resolve(e.provideHover(n,i,o));if(s&&function(e){const t=void 0!==e.range,n=void 0!==e.contents&&e.contents&&e.contents.length>0;return t&&n}(s))return new h(e,s,t)}catch(e){(0,s.M_)(e)}}))}(e,i,t,n,o)));return i.AE.fromPromises(r).coalesce()}(0,r.ke)("_executeHoverProvider",((e,t,n)=>function(e,t,n,i){return d(e,t,n,i).map((e=>e.hover)).toPromise()}(e.get(a.u).hoverProvider,t,n,o.X.None)))},86591:function(e,t,n){n.r(t),n.d(t,{ModesHoverController:function(){return he}});var i=n(68387),o=n(10998),s=n(50946),r=n(28061),a=n(38122),c=n(77922),h=n(46124),d=n(14333),l=n(19179),u=n(13338),g=n(15365),_=n(20491),p=n(47317),m=n(65958),f=n(94327),v=n(2106),C=function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((i=i.apply(e,t||[])).next())}))},b=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,o){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,o,(t=e[n](t)).done,t.value)}))}}};class y{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}}class w extends o.jG{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new v.vl),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new m.uC((()=>this._triggerAsyncComputation()),0)),this._secondWaitScheduler=this._register(new m.uC((()=>this._triggerSyncComputation()),0)),this._loadingMessageScheduler=this._register(new m.uC((()=>this._triggerLoadingMessage()),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(55).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,m.bI)((e=>this._computer.computeAsync(e))),(()=>{C(this,void 0,void 0,(function*(){var e,t;try{try{for(var n,i=b(this._asyncIterable);!(n=yield i.next()).done;){const e=n.value;e&&(this._result.push(e),this._fireResult())}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&(yield t.call(i))}finally{if(e)throw e.error}}this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0)}catch(e){(0,f.dz)(e)}}))})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){3===this._state&&this._setState(4)}_fireResult(){if(1===this._state||2===this._state)return;const e=0===this._state,t=4===this._state;this._onResult.fire(new y(this._result.slice(0),e,t))}start(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}var S=n(46311),k=n(96655),D=n(82399),I=n(56071),L=n(93516),N=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},M=function(e,t){return function(n,i){t(n,i,e)}};const x=d.$;let R=class e extends o.jG{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._widget=this._register(this._instantiationService.createInstance(O,this._editor)),this._isChangingDecorations=!1,this._messages=[],this._messagesAreComplete=!1,this._participants=[];for(const e of S.B2.getAll())this._participants.push(this._instantiationService.createInstance(e,this._editor));this._participants.sort(((e,t)=>e.hoverOrdinal-t.hoverOrdinal)),this._computer=new T(this._editor,this._participants),this._hoverOperation=this._register(new w(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value,e.isComplete,e.hasLoadingMessage)}))),this._register(this._editor.onDidChangeModelDecorations((()=>{this._isChangingDecorations||this._onModelDecorationsChanged()}))),this._register(d.b2(this._widget.getDomNode(),"keydown",(e=>{e.equals(9)&&this.hide()}))),this._register(p.dG.onDidChange((()=>{this._widget.position&&this._computer.anchor&&this._messages.length>0&&(this._widget.clear(),this._renderMessages(this._computer.anchor,this._messages))})))}_onModelDecorationsChanged(){this._widget.position&&(this._hoverOperation.cancel(),this._widget.isColorPickerVisible||this._hoverOperation.start(0))}maybeShowAt(e){const t=[];for(const n of this._participants)if(n.suggestHoverAnchor){const i=n.suggestHoverAnchor(e);i&&t.push(i)}const n=e.target;if(6===n.type&&t.push(new S.hx(0,n.range)),7===n.type){const e=this._editor.getOption(46).typicalHalfwidthCharacterWidth/2;!n.detail.isAfterLines&&"number"==typeof n.detail.horizontalDistanceToText&&n.detail.horizontalDistanceToText<e&&t.push(new S.hx(0,n.range))}return 0!==t.length&&(t.sort(((e,t)=>t.priority-e.priority)),this._startShowingAt(t[0],0,!1),!0)}startShowingAtRange(e,t,n){this._startShowingAt(new S.hx(0,e),t,n)}_startShowingAt(e,t,n){if(!this._computer.anchor||!this._computer.anchor.equals(e)){if(this._hoverOperation.cancel(),this._widget.position)if(this._computer.anchor&&e.canAdoptVisibleHover(this._computer.anchor,this._widget.position)){const t=this._messages.filter((t=>t.isValidForHoverAnchor(e)));if(0===t.length)this.hide();else{if(t.length===this._messages.length&&this._messagesAreComplete)return;this._renderMessages(e,t)}}else this.hide();this._computer.anchor=e,this._computer.shouldFocus=n,this._hoverOperation.start(t)}}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._widget.hide()}isColorPickerVisible(){return this._widget.isColorPickerVisible}containsNode(e){return this._widget.getDomNode().contains(e)}_addLoadingMessage(e){if(this._computer.anchor)for(const t of this._participants)if(t.createLoadingMessage){const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}return e}_withResult(e,t,n){this._messages=n?this._addLoadingMessage(e):e,this._messagesAreComplete=t,this._computer.anchor&&this._messages.length>0?this._renderMessages(this._computer.anchor,this._messages):t&&this.hide()}_renderMessages(t,n){const{showAtPosition:i,showAtRange:s,highlightRange:r}=e.computeHoverRanges(t.range,n),a=new o.Cm,c=a.add(new P(this._keybindingService)),h=document.createDocumentFragment();let d=null;const l={fragment:h,statusBar:c,setColorPicker:e=>d=e,onContentsChanged:()=>this._widget.onContentsChanged(),hide:()=>this.hide()};for(const e of this._participants){const t=n.filter((t=>t.owner===e));t.length>0&&a.add(e.renderHoverParts(l,t))}if(c.hasContent&&h.appendChild(c.hoverElement),h.hasChildNodes()){if(r){const t=this._editor.createDecorationsCollection();try{this._isChangingDecorations=!0,t.set([{range:r,options:e._DECORATION_OPTIONS}])}finally{this._isChangingDecorations=!1}a.add((0,o.s)((()=>{try{this._isChangingDecorations=!0,t.clear()}finally{this._isChangingDecorations=!1}})))}this._widget.showAt(h,new A(d,i,s,this._editor.getOption(55).above,this._computer.shouldFocus,a))}else a.dispose()}static computeHoverRanges(e,t){const n=e.startLineNumber;let i=e.startColumn,o=e.endColumn,s=t[0].range,a=null;for(const e of t)s=r.Q.plusRange(s,e.range),e.range.startLineNumber===n&&e.range.endLineNumber===n&&(i=Math.min(i,e.range.startColumn),o=Math.max(o,e.range.endColumn)),e.forceShowAtRange&&(a=e.range);return{showAtPosition:a?a.getStartPosition():new g.y(e.startLineNumber,i),showAtRange:a||new r.Q(n,i,n,o),highlightRange:s}}};R._DECORATION_OPTIONS=_.kI.register({description:"content-hover-highlight",className:"hoverHighlight"}),R=N([M(1,D._Y),M(2,I.b)],R);class A{constructor(e,t,n,i,o,s){this.colorPicker=e,this.showAtPosition=t,this.showAtRange=n,this.preferAbove=i,this.stoleFocus=o,this.disposables=s}}let O=class e extends o.jG{constructor(e,t){super(),this._editor=e,this._contextKeyService=t,this.allowEditorOverflow=!0,this._hoverVisibleKey=a.R.hoverVisible.bindTo(this._contextKeyService),this._hover=this._register(new l.N),this._visibleData=null,this._register(this._editor.onDidLayoutChange((()=>this._layout()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(46)&&this._updateFont()}))),this._setVisibleData(null),this._layout(),this._editor.addContentWidget(this)}get position(){var e,t;return null!==(t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition)&&void 0!==t?t:null}get isColorPickerVisible(){var e;return Boolean(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}dispose(){this._editor.removeContentWidget(this),this._visibleData&&this._visibleData.disposables.dispose(),super.dispose()}getId(){return e.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){if(!this._visibleData)return null;let e=this._visibleData.preferAbove;return!e&&this._contextKeyService.getContextKeyValue(L.ob.Visible.key)&&(e=!0),{position:this._visibleData.showAtPosition,range:this._visibleData.showAtRange,preference:e?[1,2]:[2,1]}}_setVisibleData(e){this._visibleData&&this._visibleData.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!this._visibleData),this._hover.containerDomNode.classList.toggle("hidden",!this._visibleData)}_layout(){const e=Math.max(this._editor.getLayoutInfo().height/4,250),{fontSize:t,lineHeight:n}=this._editor.getOption(46);this._hover.contentsDomNode.style.fontSize=`${t}px`,this._hover.contentsDomNode.style.lineHeight=""+n/t,this._hover.contentsDomNode.style.maxHeight=`${e}px`,this._hover.contentsDomNode.style.maxWidth=`${Math.max(.66*this._editor.getLayoutInfo().width,500)}px`}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}showAt(e,t){this._setVisibleData(t),this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._hover.contentsDomNode.style.paddingBottom="",this._updateFont(),this.onContentsChanged(),this._editor.render(),this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),t.colorPicker&&t.colorPicker.layout()}hide(){if(this._visibleData){const e=this._visibleData.stoleFocus;this._setVisibleData(null),this._editor.layoutContentWidget(this),e&&this._editor.focus()}}onContentsChanged(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged();const e=this._hover.scrollbar.getScrollDimensions();if(e.scrollWidth>e.width){const e=`${this._hover.scrollbar.options.horizontalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingBottom!==e&&(this._hover.contentsDomNode.style.paddingBottom=e,this._editor.layoutContentWidget(this),this._hover.onContentsChanged())}}clear(){this._hover.contentsDomNode.textContent=""}};O.ID="editor.contrib.contentHoverWidget",O=N([M(1,k.fN)],O);let P=class extends o.jG{constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=x("div.hover-row.status-bar"),this.actionsElement=d.BC(this.hoverElement,x("div.actions"))}get hasContent(){return this._hasContent}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(l.j.render(this.actionsElement,e,n))}append(e){const t=d.BC(this.actionsElement,e);return this._hasContent=!0,t}};P=N([M(0,I.b)],P);class T{constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1}get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}static _getLineDecorations(e,t){if(1!==t.type)return[];const n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];const o=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter((e=>{if(e.options.isWholeLine)return!0;const n=e.range.startLineNumber===i?e.range.startColumn:1,s=e.range.endLineNumber===i?e.range.endColumn:o;if(e.options.showIfCollapsed){if(n>t.range.startColumn+1||t.range.endColumn-1>s)return!1}else if(n>t.range.startColumn||t.range.endColumn>s)return!1;return!0}))}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return m.AE.EMPTY;const n=T._getLineDecorations(this._editor,t);return m.AE.merge(this._participants.map((i=>i.computeAsync?i.computeAsync(t,n,e):m.AE.EMPTY)))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=T._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return(0,u.Yc)(t)}}var E=n(90028),W=n(54968),F=n(54435);const H=d.$;class U extends o.jG{constructor(e,t,n=F.m5){super(),this._renderDisposeables=this._register(new o.Cm),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new l.N),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new W.T({editor:this._editor},t,n)),this._computer=new z(this._editor),this._hoverOperation=this._register(new w(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value)}))),this._register(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(46)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return U.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}startShowingAt(e){this._computer.lineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const e of t){const t=H("div.hover-row.markdown-hover"),i=d.BC(t,H("div.hover-contents")),o=this._renderDisposeables.add(this._markdownRenderer.render(e.value));i.appendChild(o.element),n.appendChild(t)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),o=this._editor.getOption(61),s=n-i-(this._hover.containerDomNode.clientHeight-o)/2;this._hover.containerDomNode.style.left=`${t.glyphMarginLeft+t.glyphMarginWidth}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(s),0)}px`}}U.ID="editor.contrib.modesGlyphHoverWidget";class z{constructor(e){this._editor=e,this._lineNumber=-1}get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}computeSync(){const e=e=>({value:e}),t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;for(const i of t){if(!i.options.glyphMarginClassName)continue;const t=i.options.glyphMarginHoverMessage;t&&!(0,E.it)(t)&&n.push(...(0,u._j)(t).map(e))}return n}}var V=n(3765),$=n(4874),j=n(89044),B=n(14270),Q=n(22467),K=n(80886),q=n(73042),Y=n(58129),G=n(7524),Z=n(86506),J=n(27619),X=n(44023),ee=n(52230),te=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},ne=function(e,t){return function(n,i){t(n,i,e)}};const ie=d.$;class oe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const se={type:1,filter:{include:G.gB.QuickFix},triggerAction:G.fo.QuickFixHover};let re=class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=5,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),s=[];for(const a of t){const t=a.range.startLineNumber===i?a.range.startColumn:1,c=a.range.endLineNumber===i?a.range.endColumn:o,h=this._markerDecorationsService.getMarker(n.uri,a);if(!h)continue;const d=new r.Q(e.range.startLineNumber,t,e.range.startLineNumber,c);s.push(new oe(this,d,h))}return s}renderHoverParts(e,t){if(!t.length)return o.jG.None;const n=new o.Cm;t.forEach((t=>e.fragment.appendChild(this.renderMarkerHover(t,n))));const i=1===t.length?t[0]:t.sort(((e,t)=>J.cj.compare(e.marker.severity,t.marker.severity)))[0];return this.renderMarkerStatusbar(e,i,n),n}renderMarkerHover(e,t){const n=ie("div.hover-row"),i=d.BC(n,ie("div.marker.hover-contents")),{source:o,message:s,code:r,relatedInformation:a}=e.marker;this._editor.applyFontInfo(i);const c=d.BC(i,ie("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=s,o||r)if(r&&"string"!=typeof r){const e=ie("span");if(o){d.BC(e,ie("span")).innerText=o}const n=d.BC(e,ie("a.code-link"));n.setAttribute("href",r.target.toString()),t.add(d.ko(n,"click",(e=>{this._openerService.open(r.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));d.BC(n,ie("span")).innerText=r.value;const s=d.BC(i,e);s.style.opacity="0.6",s.style.paddingLeft="6px"}else{const e=d.BC(i,ie("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=o&&r?`${o}(${r})`:o||`(${r})`}if((0,u.EI)(a))for(const{message:e,resource:n,startLineNumber:o,startColumn:s}of a){const r=d.BC(i,ie("div"));r.style.marginTop="8px";const a=d.BC(r,ie("a"));a.innerText=`${(0,Q.P8)(n)}(${o}, ${s}): `,a.style.cursor="pointer",t.add(d.ko(a,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(n,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:o,startColumn:s}}}).catch(f.dz)})));const c=d.BC(r,ie("span"));c.innerText=e,this._editor.applyFontInfo(c)}return n}renderMarkerStatusbar(e,t,n){if(t.marker.severity!==J.cj.Error&&t.marker.severity!==J.cj.Warning&&t.marker.severity!==J.cj.Info||e.statusBar.addAction({label:V.kg("view problem","View Problem"),commandId:Z.i.ID,run:()=>{var n;e.hide(),null===(n=Z.j.get(this._editor))||void 0===n||n.showAtMarker(t.marker),this._editor.focus()}}),!this._editor.getOption(83)){const i=e.statusBar.append(ie("div"));this.recentMarkerCodeActionsInfo&&(J.oc.makeKey(this.recentMarkerCodeActionsInfo.marker)===J.oc.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=V.kg("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const s=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?o.jG.None:n.add((0,m.EQ)((()=>i.textContent=V.kg("checkingForQuickFixes","Checking for quick fixes...")),200));i.textContent||(i.textContent=String.fromCharCode(160));const r=this.getCodeActions(t.marker);n.add((0,o.s)((()=>r.cancel()))),r.then((r=>{if(s.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:r.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return r.dispose(),void(i.textContent=V.kg("noQuickFixes","No quick fixes available"));i.style.display="none";let a=!1;n.add((0,o.s)((()=>{a||r.dispose()}))),e.statusBar.addAction({label:V.kg("quick fixes","Quick Fix..."),commandId:Y.hi.Id,run:t=>{a=!0;const n=Y.d1.get(this._editor),i=d.BK(t);e.hide(),null==n||n.showCodeActions(se,r,{x:i.left+6,y:i.top+i.height+6,width:i.width,height:i.height})}})}),f.dz)}}getCodeActions(e){return(0,m.SS)((t=>(0,q.dU)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new r.Q(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),se,X.ke.None,t)))}};re=te([ne(1,K.A),ne(2,F.Cr),ne(3,ee.u)],re),(0,j.zy)(((e,t)=>{const n=e.getColor($.vwp);n&&t.addRule(`.monaco-hover .hover-contents a.code-link span { color: ${n}; }`);const i=e.getColor($.FEE);i&&t.addRule(`.monaco-hover .hover-contents a.code-link span:hover { color: ${i}; }`)}));var ae=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},ce=function(e,t){return function(n,i){t(n,i,e)}};let he=class e{constructor(e,t,n,i,s){this._editor=e,this._instantiationService=t,this._openerService=n,this._languageService=i,this._toUnhook=new o.Cm,this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((e=>{e.hasChanged(55)&&(this._unhookEvents(),this._hookEvents())}))}static get(t){return t.getContribution(e.ID)}_hookEvents(){const e=this._editor.getOption(55);this._isHoverEnabled=e.enabled,this._isHoverSticky=e.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._toUnhook.add(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))):(this._toUnhook.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._toUnhook.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._toUnhook.add(this._editor.onMouseLeave((e=>this._onEditorMouseLeave(e)))),this._toUnhook.add(this._editor.onDidChangeModel((()=>this._hideWidgets()))),this._toUnhook.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookEvents(){this._toUnhook.clear()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._isMouseDown=!0;const t=e.target;9!==t.type||t.detail!==O.ID?12===t.type&&t.detail===U.ID||(12!==t.type&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}_onEditorMouseUp(e){this._isMouseDown=!1}_onEditorMouseLeave(e){var t;const n=e.event.browserEvent.relatedTarget;(null===(t=this._contentWidget)||void 0===t?void 0:t.containsNode(n))||this._hideWidgets()}_onEditorMouseMove(e){var t,n,i,o,s;const r=e.target;if(this._isMouseDown&&this._hoverClicked)return;if(this._isHoverSticky&&9===r.type&&r.detail===O.ID)return;if(this._isHoverSticky&&!(null===(n=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===n?void 0:n.isCollapsed))return;if(!this._isHoverSticky&&9===r.type&&r.detail===O.ID&&(null===(i=this._contentWidget)||void 0===i?void 0:i.isColorPickerVisible()))return;if(this._isHoverSticky&&12===r.type&&r.detail===U.ID)return;if(!this._isHoverEnabled)return void this._hideWidgets();if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===r.type&&r.position?(null===(s=this._contentWidget)||void 0===s||s.hide(),this._glyphWidget||(this._glyphWidget=new U(this._editor,this._languageService,this._openerService)),void this._glyphWidget.startShowingAt(r.position.lineNumber)):void this._hideWidgets();null===(o=this._glyphWidget)||void 0===o||o.hide()}_onKeyDown(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}_hideWidgets(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(n=this._contentWidget)||void 0===n||n.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(R,this._editor)),this._contentWidget}isColorPickerVisible(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}showContentHover(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}dispose(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};he.ID="editor.contrib.hover",he=ae([ce(1,D._Y),ce(2,F.Cr),ce(3,c.L),ce(4,k.fN)],he);class de extends s.ks{constructor(){super({id:"editor.action.showHover",label:V.kg({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:a.R.editorTextFocus,primary:(0,i.m5)(2089,2087),weight:100}})}run(e,t){if(!t.hasModel())return;const n=he.get(t);if(!n)return;const i=t.getPosition(),o=new r.Q(i.lineNumber,i.column,i.lineNumber,i.column),s=2===t.getOption(2);n.showContentHover(o,1,s)}}class le extends s.ks{constructor(){super({id:"editor.action.showDefinitionPreviewHover",label:V.kg({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}run(e,t){const n=he.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const o=new r.Q(i.lineNumber,i.column,i.lineNumber,i.column),s=h.k.get(t);if(!s)return;s.startFindDefinitionFromCursor(i).then((()=>{n.showContentHover(o,1,!0)}))}}(0,s.HW)(he.ID,he),(0,s.Fl)(de),(0,s.Fl)(le),S.B2.register(B.xJ),S.B2.register(re),(0,j.zy)(((e,t)=>{const n=e.getColor($.mH6);n&&t.addRule(`.monaco-editor .hoverHighlight { background-color: ${n}; }`);const i=e.getColor($.WfR);i&&t.addRule(`.monaco-editor .monaco-hover { background-color: ${i}; }`);const o=e.getColor($.oZ8);o&&(t.addRule(`.monaco-editor .monaco-hover { border: 1px solid ${o}; }`),t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${o.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${o.transparent(.5)}; }`));const s=e.getColor($.vwp);s&&t.addRule(`.monaco-editor .monaco-hover a { color: ${s}; }`);const r=e.getColor($.FEE);r&&t.addRule(`.monaco-editor .monaco-hover a:hover { color: ${r}; }`);const a=e.getColor($.Xo2);a&&t.addRule(`.monaco-editor .monaco-hover { color: ${a}; }`);const c=e.getColor($.rRi);c&&t.addRule(`.monaco-editor .monaco-hover .hover-row .actions { background-color: ${c}; }`);const h=e.getColor($.S6W);h&&t.addRule(`.monaco-editor .monaco-hover code { background-color: ${h}; }`)}))},46311:function(e,t,n){n.d(t,{B2:function(){return s},hx:function(){return i},mm:function(){return o}});class i{constructor(e,t){this.priority=e,this.range=t,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class o{constructor(e,t,n){this.priority=e,this.owner=t,this.range=n,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}const s=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}}},14270:function(e,t,n){n.d(t,{eH:function(){return b},fm:function(){return w},xJ:function(){return y}});var i=n(14333),o=n(13338),s=n(65958),r=n(90028),a=n(10998),c=n(54968),h=n(15365),d=n(28061),l=n(77922),u=n(11950),g=n(3765),_=n(85753),p=n(54435),m=n(52230),f=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},v=function(e,t){return function(n,i){t(n,i,e)}};const C=i.$;class b{constructor(e,t,n,i){this.owner=e,this.range=t,this.contents=n,this.ordinal=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let y=class{constructor(e,t,n,i,o){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=o,this.hoverOrdinal=2}createLoadingMessage(e){return new b(this,e.range,[(new r.Bc).appendText(g.kg("modesContentHover.loading","Loading..."))],2e3)}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,s=n.getLineMaxColumn(i),a=[];let c=1e3;const h=n.getLineLength(i),l=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),u=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});"number"==typeof u&&h>=u&&a.push(new b(this,e.range,[{value:g.kg("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],c++));for(const n of t){const t=n.range.startLineNumber===i?n.range.startColumn:1,h=n.range.endLineNumber===i?n.range.endColumn:s,l=n.options.hoverMessage;if(!l||(0,r.it)(l))continue;const u=new d.Q(e.range.startLineNumber,t,e.range.startLineNumber,h);a.push(new b(this,u,(0,o._j)(l),c++))}return a}computeAsync(e,t,n){if(!this._editor.hasModel()||1!==e.type)return s.AE.EMPTY;const i=this._editor.getModel();if(!this._languageFeaturesService.hoverProvider.has(i))return s.AE.EMPTY;const o=new h.y(e.range.startLineNumber,e.range.startColumn);return(0,u.Zt)(this._languageFeaturesService.hoverProvider,i,o,n).filter((e=>!(0,r.it)(e.hover.contents))).map((t=>{const n=t.hover.range?d.Q.lift(t.hover.range):e.range;return new b(this,n,t.hover.contents,t.ordinal)}))}renderHoverParts(e,t){return w(e,t,this._editor,this._languageService,this._openerService)}};function w(e,t,n,o,s){t.sort(((e,t)=>e.ordinal-t.ordinal));const h=new a.Cm;for(const a of t)for(const t of a.contents){if((0,r.it)(t))continue;const a=C("div.hover-row.markdown-hover"),d=i.BC(a,C("div.hover-contents")),l=h.add(new c.T({editor:n},o,s));h.add(l.onDidRenderAsync((()=>{d.className="hover-contents code-hover-contents",e.onContentsChanged()})));const u=h.add(l.render(t));d.appendChild(u.element),e.fragment.appendChild(a)}return h}y=f([v(1,l.L),v(2,p.Cr),v(3,_.pG),v(4,m.u)],y)},593:function(e,t,n){var i=n(65958),o=n(94327),s=n(62105),r=n(50946),a=n(28061),c=n(93702),h=n(38122),d=n(20491),l=n(90304),u=n(48295),g=n(3765),_=n(89044);class p{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new c.L(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new c.L(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}var m=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},f=function(e,t){return function(n,i){t(n,i,e)}};let v=class e{constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}static get(t){return t.getContribution(e.ID)}dispose(){}run(t,n){this.currentRequest&&this.currentRequest.cancel();const r=this.editor.getSelection(),h=this.editor.getModel();if(!h||!r)return;let d=r;if(d.startLineNumber!==d.endLineNumber)return;const l=new s.$t(this.editor,5),u=h.uri;return this.editorWorkerService.canNavigateValueSet(u)?(this.currentRequest=(0,i.SS)((e=>this.editorWorkerService.navigateValueSet(u,d,n))),this.currentRequest.then((n=>{if(!n||!n.range||!n.value)return;if(!l.validate(this.editor))return;const s=a.Q.lift(n.range);let r=n.range;const h=n.value.length-(d.endColumn-d.startColumn);r={startLineNumber:r.startLineNumber,startColumn:r.startColumn,endLineNumber:r.endLineNumber,endColumn:r.startColumn+n.value.length},h>1&&(d=new c.L(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn+h-1));const u=new p(s,d,n.value);this.editor.pushUndoStop(),this.editor.executeCommand(t,u),this.editor.pushUndoStop(),this.decorations.set([{range:r,options:e.DECORATION}]),this.decorationRemover&&this.decorationRemover.cancel(),this.decorationRemover=(0,i.wR)(350),this.decorationRemover.then((()=>this.decorations.clear())).catch(o.dz)})).catch(o.dz)):Promise.resolve(void 0)}};v.ID="editor.contrib.inPlaceReplaceController",v.DECORATION=d.kI.register({description:"in-place-replace",className:"valueSetReplacement"}),v=m([f(1,l.w)],v);class C extends r.ks{constructor(){super({id:"editor.action.inPlaceReplace.up",label:g.kg("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:h.R.writable,kbOpts:{kbExpr:h.R.editorTextFocus,primary:3154,weight:100}})}run(e,t){const n=v.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}class b extends r.ks{constructor(){super({id:"editor.action.inPlaceReplace.down",label:g.kg("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:h.R.writable,kbOpts:{kbExpr:h.R.editorTextFocus,primary:3156,weight:100}})}run(e,t){const n=v.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}(0,r.HW)(v.ID,v),(0,r.Fl)(C),(0,r.Fl)(b),(0,_.zy)(((e,t)=>{const n=e.getColor(u.$u);n&&t.addRule(`.monaco-editor.vs .valueSetReplacement { outline: solid 2px ${n}; }`)}))},4548:function(e,t,n){function i(e,t){let n=0;for(let i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;return n}function o(e,t,n){e=e<0?0:e;let i="";if(!n){const n=Math.floor(e/t);e%=t;for(let e=0;e<n;e++)i+="\t"}for(let t=0;t<e;t++)i+=" ";return i}n.d(t,{c:function(){return i},k:function(){return o}})},84432:function(e,t,n){n.r(t),n.d(t,{AutoIndentOnPaste:function(){return x},AutoIndentOnPasteCommand:function(){return M},ChangeIndentationSizeAction:function(){return S},DetectIndentation:function(){return I},IndentUsingSpaces:function(){return D},IndentUsingTabs:function(){return k},IndentationToSpacesAction:function(){return y},IndentationToSpacesCommand:function(){return A},IndentationToTabsAction:function(){return w},IndentationToTabsCommand:function(){return O},ReindentLinesAction:function(){return L},ReindentSelectedLinesAction:function(){return N},getReindentEditOperations:function(){return b}});var i=n(10998),o=n(16844),s=n(50946),r=n(41672),a=n(23877),c=n(28061),h=n(93702),d=n(38122),l=n(52394),u=n(64830),g=n(4548),_=n(3765),p=n(73027),m=n(57999),f=n(70645),v=function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},C=function(e,t){return function(n,i){t(n,i,e)}};function b(e,t,n,i,s){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];const c=t.getLanguageConfiguration(e.getLanguageId()).indentationRules;if(!c)return[];for(i=Math.min(i,e.getLineCount());n<=i&&c.unIndentedLinePattern;){const t=e.getLineContent(n);if(!c.unIndentedLinePattern.test(t))break;n++}if(n>i-1)return[];const{tabSize:d,indentSize:l,insertSpaces:u}=e.getOptions(),g=(e,t)=>(t=t||1,r.Y.shiftIndent(e,e.length+t,d,l,u)),_=(e,t)=>(t=t||1,r.Y.unshiftIndent(e,e.length+t,d,l,u)),p=[];let f;const v=e.getLineContent(n);let C=v;if(null!=s){f=s;const e=o.UU(v);C=f+v.substring(e.length),c.decreaseIndentPattern&&c.decreaseIndentPattern.test(C)&&(f=_(f),C=f+v.substring(e.length)),v!==C&&p.push(a.k.replaceMove(new h.L(n,1,n,e.length+1),(0,m.P)(f,l,u)))}else f=o.UU(v);let b=f;c.increaseIndentPattern&&c.increaseIndentPattern.test(C)?(b=g(b),f=g(f)):c.indentNextLinePattern&&c.indentNextLinePattern.test(C)&&(b=g(b));for(let t=++n;t<=i;t++){const n=e.getLineContent(t),i=o.UU(n),s=b+n.substring(i.length);c.decreaseIndentPattern&&c.decreaseIndentPattern.test(s)&&(b=_(b),f=_(f)),i!==b&&p.push(a.k.replaceMove(new h.L(t,1,t,i.length+1),(0,m.P)(b,l,u))),c.unIndentedLinePattern&&c.unIndentedLinePattern.test(n)||(c.increaseIndentPattern&&c.increaseIndentPattern.test(s)?(f=g(f),b=f):b=c.indentNextLinePattern&&c.indentNextLinePattern.test(s)?g(b):f)}return p}class y extends s.ks{constructor(){super({id:y.ID,label:_.kg("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:d.R.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),o=t.getSelection();if(!o)return;const s=new A(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}y.ID="editor.action.indentationToSpaces";class w extends s.ks{constructor(){super({id:w.ID,label:_.kg("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:d.R.writable})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),o=t.getSelection();if(!o)return;const s=new O(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}w.ID="editor.action.indentationToTabs";class S extends s.ks{constructor(e,t){super(t),this.insertSpaces=e}run(e,t){const n=e.get(p.GK),i=e.get(u.S),o=t.getModel();if(!o)return;const s=i.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),r=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===s.tabSize?_.kg("configuredTabSize","Configured Tab Size"):void 0}))),a=Math.min(o.getOptions().tabSize-1,7);setTimeout((()=>{n.pick(r,{placeHolder:_.kg({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:r[a]}).then((e=>{e&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:this.insertSpaces})}))}),50)}}class k extends S{constructor(){super(!1,{id:k.ID,label:_.kg("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}}k.ID="editor.action.indentUsingTabs";class D extends S{constructor(){super(!0,{id:D.ID,label:_.kg("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}}D.ID="editor.action.indentUsingSpaces";class I extends s.ks{constructor(){super({id:I.ID,label:_.kg("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}run(e,t){const n=e.get(u.S),i=t.getModel();if(!i)return;const o=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(o.insertSpaces,o.tabSize)}}I.ID="editor.action.detectIndentation";class L extends s.ks{constructor(){super({id:"editor.action.reindentlines",label:_.kg("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:d.R.writable})}run(e,t){const n=e.get(l.JZ),i=t.getModel();if(!i)return;const o=b(i,n,1,i.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class N extends s.ks{constructor(){super({id:"editor.action.reindentselectedlines",label:_.kg("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:d.R.writable})}run(e,t){const n=e.get(l.JZ),i=t.getModel();if(!i)return;const o=t.getSelections();if(null===o)return;const s=[];for(const e of o){let t=e.startLineNumber,o=e.endLineNumber;if(t!==o&&1===e.endColumn&&o--,1===t){if(t===o)continue}else t--;const r=b(i,n,t,o);s.push(...r)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class M{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const t of e)t.range&&"string"==typeof t.text&&this._edits.push(t)}getEditOperations(e,t){for(const e of this._edits)t.addEditOperation(c.Q.lift(e.range),e.text);let n=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let x=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new i.Cm,this.callOnModel=new i.Cm,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(50)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:e})=>{this.trigger(e)})))}trigger(e){const t=this.editor.getSelections();if(null===t||t.length>1)return;const n=this.editor.getModel();if(!n)return;if(!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const i=this.editor.getOption(9),{tabSize:s,indentSize:a,insertSpaces:h}=n.getOptions(),d=[],l={shiftIndent:e=>r.Y.shiftIndent(e,e.length+1,s,a,h),unshiftIndent:e=>r.Y.unshiftIndent(e,e.length+1,s,a,h)};let u=e.startLineNumber;for(;u<=e.endLineNumber&&this.shouldIgnoreLine(n,u);)u++;if(u>e.endLineNumber)return;let _=n.getLineContent(u);if(!/\S/.test(_.substring(0,e.startColumn-1))){const e=(0,f.$f)(i,n,n.getLanguageId(),u,l,this._languageConfigurationService);if(null!==e){const t=o.UU(_),i=g.c(e,s);if(i!==g.c(t,s)){const e=g.k(i,s,h);d.push({range:new c.Q(u,1,u,t.length+1),text:e}),_=e+_.substr(t.length)}else{const e=(0,f.Yb)(n,u,this._languageConfigurationService);if(0===e||8===e)return}}}const p=u;for(;u<e.endLineNumber&&!/\S/.test(n.getLineContent(u+1));)u++;if(u!==e.endLineNumber){const t={tokenization:{getLineTokens:e=>n.tokenization.getLineTokens(e),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(e,t)=>n.getLanguageIdAtPosition(e,t)},getLineContent:e=>e===p?_:n.getLineContent(e)},r=(0,f.$f)(i,t,n.getLanguageId(),u+1,l,this._languageConfigurationService);if(null!==r){const t=g.c(r,s),i=g.c(o.UU(n.getLineContent(u+1)),s);if(t!==i){const r=t-i;for(let t=u+1;t<=e.endLineNumber;t++){const e=n.getLineContent(t),i=o.UU(e),a=g.c(i,s)+r,l=g.k(a,s,h);l!==i&&d.push({range:new c.Q(t,1,t,i.length+1),text:l})}}}}if(d.length>0){this.editor.pushUndoStop();const e=new M(d,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(0===n)return!0;const i=e.tokenization.getLineTokens(t);if(i.getCount()>0){const e=i.findTokenIndexAtOffset(n);if(e>=0&&1===i.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function R(e,t,n,i){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let o="";for(let e=0;e<n;e++)o+=" ";const s=new RegExp(o,"gi");for(let n=1,r=e.getLineCount();n<=r;n++){let r=e.getLineFirstNonWhitespaceColumn(n);if(0===r&&(r=e.getLineMaxColumn(n)),1===r)continue;const a=new c.Q(n,1,n,r),h=e.getValueInRange(a),d=i?h.replace(/\t/gi,o):h.replace(s,"\t");t.addEditOperation(a,d)}}x.ID="editor.contrib.autoIndentOnPaste",x=v([C(1,l.JZ)],x);class A{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),R(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class O{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),R(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}(0,s.HW)(x.ID,x),(0,s.Fl)(y),(0,s.Fl)(w),(0,s.Fl)(k),(0,s.Fl)(D),(0,s.Fl)(I),(0,s.Fl)(L),(0,s.Fl)(N)}}]);
